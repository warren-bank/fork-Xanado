"use strict";(window.webpackChunk_warren_bank_scrabble=window.webpackChunk_warren_bank_scrabble||[]).push([[458],{430:function(t,e,n){n.d(e,{V:function(){return a}});var i=n(755);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,a=void 0,a=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===r(a)?a:String(a)),i)}var o,a}var a=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.options=n,this.$dlg=i("#".concat(e)),(0===this.$dlg.length?i.get(Platform.getFilePath("html/".concat(n.html||e,".html"))).then((function(t){i("body").append(i(document.createElement("div")).attr("id",e).addClass("dialog").html(t)),r.$dlg=i("#".concat(e))})):Promise.resolve()).then((function(){return r.$dlg.dialog({title:n.title,width:"auto",minWidth:400,modal:!0,open:function(){r.$dlg.data("dialog_created")?r.openDialog():(r.$dlg.data("dialog_created",!0),r.createDialog().then((function(){return r.openDialog()})))}})}))}var e,n,r;return e=t,(n=[{key:"createDialog",value:function(){var t=this;this.$dlg.find("[data-i18n]").i18n(),this.$dlg.find("input[data-i18n-placeholder]").each((function(){i(this).attr("placeholder",i.i18n(i(this).data("i18n-placeholder")))})),this.$dlg.find("label[data-image]").each((function(){i(this).css("background-image",'url("'.concat(i(this).data("image"),'")'))}));var e=this;return this.$dlg.find("select").selectmenu().on("selectmenuchange",(function(){i(this).blur(),e.$dlg.data("this").enableSubmit()})),setTimeout((function(){return t.$dlg.find("select[data-i18n-tooltip] ~ .ui-selectmenu-button").tooltip({items:".ui-selectmenu-button",position:{my:"left+15 center",at:"right center",within:"body"},content:function(){return i.i18n(i(this).prev().data("i18n-tooltip"))}})}),100),this.$dlg.find(".submit").on("click",(function(){return t.submit()})),this.enableSubmit(),console.debug("Created",this.id),Promise.resolve()}},{key:"openDialog",value:function(){return console.debug("Opening",this.id),this.$dlg.data("this",this),Promise.resolve(this)}},{key:"canSubmit",value:function(){return!0}},{key:"enableSubmit",value:function(){this.$dlg.find(".submit").prop("disabled",!this.canSubmit())}},{key:"getFieldValues",value:function(t){return t||(t={}),this.$dlg.find("input[name],select[name],textarea[name]").each((function(){var e,n=i(this).attr("name");if("checkbox"===this.type)e=!!i(this).is(":checked");else if("radio"===this.type){if(!i(this).is(":checked"))return;n=this.id,e=!0}else if("number"===this.type){if(e=parseInt(i(this).val()),isNaN(e))return}else e=i(this).val()||i(this).text();void 0===t[n]?t[n]=e:"string"==typeof t[n]?t[n]=[t[n],e]:t[n].push(e)})),t}},{key:"submit",value:function(t){var e=this;this.$dlg.dialog("close"),t=this.getFieldValues(t),this.options.onSubmit&&this.options.onSubmit(this,t),this.options.postAction&&i.ajax({url:this.options.postAction,type:"POST",contentType:"application/json",data:JSON.stringify(t)}).then((function(t){"function"==typeof e.options.postResult&&e.options.postResult(t)})).catch((function(t){"function"==typeof e.options.error?e.options.error(t):console.error(t.responseText)}))}}])&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()},265:function(t,e,n){n.r(e),n.d(e,{GameSetupDialog:function(){return b}});var i=n(594),r=n(430),o=n(755);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,g(i.key),i)}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=f(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},s.apply(this,arguments)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=y(t);if(e){var r=y(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function p(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function m(t,e,n){return(e=g(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(c,t);var e,n,r,a=h(c);function c(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),a.call(this,"GameSetupDialog",t)}return e=c,(n=[{key:"canSubmit",value:function(){return console.debug("Validate edition",this.$dlg.find("[name=edition]").val(),"play dictionary",this.$dlg.find("[name=dictionary]").val()),"none"!==this.$dlg.find("[name=edition]").val()}},{key:"showTimerFields",value:function(){switch(this.$dlg.find("[name=timerType]").val()){default:this.$dlg.find("[name=timeAllowed]").parent().hide(),this.$dlg.find("[name=timePenalty]").parent().hide();break;case i.l.Timer.TURN:this.$dlg.find("[name=timeAllowed]").parent().show(),this.$dlg.find("[name=timePenalty]").parent().hide();break;case i.l.Timer.GAME:this.$dlg.find("[name=timeAllowed]").parent().show(),this.$dlg.find("[name=timePenalty]").parent().show()}}},{key:"showPenaltyFields",value:function(){switch(this.$dlg.find("[name=challengePenalty]").val()){default:this.$dlg.find("[name=penaltyPoints]").parent().hide();break;case i.l.Penalty.PER_TURN:case i.l.Penalty.PER_WORD:this.$dlg.find("[name=penaltyPoints]").parent().show()}}},{key:"showFeedbackFields",value:function(){var t=this.$dlg.find("[name=dictionary]").val();this.$dlg.find("[name=wordCheck]").parent().toggle("none"!==t)}},{key:"createDialog",value:function(){var t=this;function e(t,e){var n,i=l(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.append('<option value="'.concat(r||"none",'">').concat(r?o.i18n(r):o.i18n("None"),"</option>"))}}catch(t){i.e(t)}finally{i.f()}}var n=this.$dlg.find("[name=challengePenalty]");e(c.Penalty_types,n),n.on("selectmenuchange",(function(){return t.showPenaltyFields()})),this.showPenaltyFields();var i=this.$dlg.find("[name=timerType]");e(c.Timer_types,i),i.on("selectmenuchange",(function(){return t.showTimerFields()})),this.showTimerFields();var r=this.$dlg.find("[name=wordCheck]");e(c.WordCheck_types,r);var a=this.options.ui;return Promise.all([a.getEditions().then((function(e){var n=t.$dlg.find("[name=edition]");e.forEach((function(t){return n.append("<option>".concat(t,"</option>"))})),a.getSetting("edition")&&n.val(a.getSetting("edition"))})),a.getDictionaries().then((function(e){var n=t.$dlg.find("[name=dictionary]");e.forEach((function(t){return n.append("<option>".concat(t,"</option>"))})),a.getSetting("dictionary")&&n.val(a.getSetting("dictionary")),n.on("selectmenuchange",(function(){return t.showFeedbackFields()})),t.showFeedbackFields()}))]).then((function(){return s(y(c.prototype),"createDialog",t).call(t)}))}},{key:"openDialog",value:function(){var t=this;return s(y(c.prototype),"openDialog",this).call(this).then((function(){t.$dlg.find(".dialog-row").show();var e=t.options.game;e&&(e.turns.length>0&&t.$dlg.find(".noturns").hide(),t.$dlg.find("[name]").each((function(t,n){var i=o(n).attr("name"),r=e[i];return"INPUT"===n.tagName&&"checkbox"===n.type?r?o(n).attr("checked","checked"):o(n).removeAttr("checked"):(o(n).val(e[i]),"SELECT"===n.tagName&&o(n).selectmenu("refresh")),!0})))})).then((function(){return s(y(c.prototype),"openDialog",t).call(t)}))}}])&&u(e.prototype,n),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(r.V);m(b,"Penalty_types",[i.l.Penalty.PER_WORD,i.l.Penalty.PER_TURN,i.l.Penalty.MISS,i.l.Penalty.NONE]),m(b,"Timer_types",[i.l.Timer.NONE,i.l.Timer.TURN,i.l.Timer.GAME]),m(b,"WordCheck_types",[i.l.WordCheck.NONE,i.l.WordCheck.AFTER,i.l.WordCheck.REJECT])}}]);