/*! For license information please see StandaloneGameUI.js.LICENSE.txt */
!function(){var e,t,o={"./node_modules/@rwap/jquery-ui-touch-punch/jquery.ui.touch-punch.js":function(e,t,o){var l,u,f;u=[o("./node_modules/jquery/dist/jquery.js"),o("./node_modules/jquery-ui/ui/widget.js")],void 0===(f="function"==typeof(l=function(e){if(e.support.mspointer=window.navigator.msPointerEnabled,e.support.touch="ontouchstart"in document||"ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,(e.support.touch||e.support.mspointer)&&e.ui.mouse){var t,o=e.ui.mouse.prototype,l=o._mouseInit,u=o._mouseDestroy;o._touchStart=function(e){var o=this;this._startedMove=e.timeStamp,o._startPos=f(e),!t&&o._mouseCapture(e.originalEvent.changedTouches[0])&&(t=!0,o._touchMoved=!1,p(e,"mouseover"),p(e,"mousemove"),p(e,"mousedown"))},o._touchMove=function(e){t&&(this._touchMoved=!0,p(e,"mousemove"))},o._touchEnd=function(e){if(t){p(e,"mouseup"),p(e,"mouseout");var o=e.timeStamp-this._startedMove;if(!this._touchMoved||o<500)p(e,"click");else{var l=f(e);Math.abs(l.x-this._startPos.x)<10&&Math.abs(l.y-this._startPos.y)<10&&(this._touchMoved&&"stylus"!==e.originalEvent.changedTouches[0].touchType||p(e,"click"))}this._touchMoved=!1,t=!1}},o._mouseInit=function(){var t=this;e.support.mspointer&&(t.element[0].style.msTouchAction="none"),t.element.on({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),l.call(t)},o._mouseDestroy=function(){var t=this;t.element.off({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),u.call(t)}}function f(e){return{x:e.originalEvent.changedTouches[0].pageX,y:e.originalEvent.changedTouches[0].pageY}}function p(e,t){if(!(e.originalEvent.touches.length>1)){e.cancelable&&e.preventDefault();var o=e.originalEvent.changedTouches[0],l=document.createEvent("MouseEvents");l.initMouseEvent(t,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(l)}}})?l.apply(t,u):l)||(e.exports=f)},"./node_modules/@wikimedia/jquery.i18n/src/jquery.i18n.emitter.js":function(e,t,o){var l,u,f=o("./node_modules/jquery/dist/jquery.js");l=f,(u=function(){this.language=l.i18n.languages[String.locale]||l.i18n.languages.default}).prototype={constructor:u,emit:function(e,t){var o,u,f,p=this;switch(typeof e){case"string":case"number":o=e;break;case"object":if(u=l.map(e.slice(1),(function(e){return p.emit(e,t)})),f=e[0].toLowerCase(),"function"!=typeof p[f])throw new Error('unknown operation "'+f+'"');o=p[f](u,t);break;case"undefined":o="";break;default:throw new Error("unexpected type in AST: "+typeof e)}return o},concat:function(e){var t="";return l.each(e,(function(e,o){t+=o})),t},replace:function(e,t){var o=parseInt(e[0],10);return o<t.length?t[o]:"$"+(o+1)},plural:function(e){var t=parseFloat(this.language.convertNumber(e[0],10)),o=e.slice(1);return o.length?this.language.convertPlural(t,o):""},gender:function(e){var t=e[0],o=e.slice(1);return this.language.gender(t,o)},grammar:function(e){var t=e[0],o=e[1];return o&&t&&this.language.convertGrammar(o,t)}},l.extend(l.i18n.parser.emitter,new u)},"./node_modules/@wikimedia/jquery.i18n/src/jquery.i18n.fallbacks.js":function(e,t,o){var l,u=o("./node_modules/jquery/dist/jquery.js");(l=u).i18n=l.i18n||{},l.extend(l.i18n.fallbacks,{ab:["ru"],ace:["id"],aln:["sq"],als:["gsw","de"],an:["es"],anp:["hi"],arn:["es"],arz:["ar"],av:["ru"],ay:["es"],ba:["ru"],bar:["de"],"bat-smg":["sgs","lt"],bcc:["fa"],"be-x-old":["be-tarask"],bh:["bho"],bjn:["id"],bm:["fr"],bpy:["bn"],bqi:["fa"],bug:["id"],"cbk-zam":["es"],ce:["ru"],crh:["crh-latn"],"crh-cyrl":["ru"],csb:["pl"],cv:["ru"],"de-at":["de"],"de-ch":["de"],"de-formal":["de"],dsb:["de"],dtp:["ms"],egl:["it"],eml:["it"],ff:["fr"],fit:["fi"],"fiu-vro":["vro","et"],frc:["fr"],frp:["fr"],frr:["de"],fur:["it"],gag:["tr"],gan:["gan-hant","zh-hant","zh-hans"],"gan-hans":["zh-hans"],"gan-hant":["zh-hant","zh-hans"],gl:["pt"],glk:["fa"],gn:["es"],gsw:["de"],hif:["hif-latn"],hsb:["de"],ht:["fr"],ii:["zh-cn","zh-hans"],inh:["ru"],iu:["ike-cans"],jut:["da"],jv:["id"],kaa:["kk-latn","kk-cyrl"],kbd:["kbd-cyrl"],khw:["ur"],kiu:["tr"],kk:["kk-cyrl"],"kk-arab":["kk-cyrl"],"kk-latn":["kk-cyrl"],"kk-cn":["kk-arab","kk-cyrl"],"kk-kz":["kk-cyrl"],"kk-tr":["kk-latn","kk-cyrl"],kl:["da"],"ko-kp":["ko"],koi:["ru"],krc:["ru"],ks:["ks-arab"],ksh:["de"],ku:["ku-latn"],"ku-arab":["ckb"],kv:["ru"],lad:["es"],lb:["de"],lbe:["ru"],lez:["ru"],li:["nl"],lij:["it"],liv:["et"],lmo:["it"],ln:["fr"],ltg:["lv"],lzz:["tr"],mai:["hi"],"map-bms":["jv","id"],mg:["fr"],mhr:["ru"],min:["id"],mo:["ro"],mrj:["ru"],mwl:["pt"],myv:["ru"],mzn:["fa"],nah:["es"],nap:["it"],nds:["de"],"nds-nl":["nl"],"nl-informal":["nl"],no:["nb"],os:["ru"],pcd:["fr"],pdc:["de"],pdt:["de"],pfl:["de"],pms:["it"],pt:["pt-br"],"pt-br":["pt"],qu:["es"],qug:["qu","es"],rgn:["it"],rmy:["ro"],"roa-rup":["rup"],rue:["uk","ru"],ruq:["ruq-latn","ro"],"ruq-cyrl":["mk"],"ruq-latn":["ro"],sa:["hi"],sah:["ru"],scn:["it"],sg:["fr"],sgs:["lt"],sli:["de"],sr:["sr-ec"],srn:["nl"],stq:["de"],su:["id"],szl:["pl"],tcy:["kn"],tg:["tg-cyrl"],tt:["tt-cyrl","ru"],"tt-cyrl":["ru"],ty:["fr"],udm:["ru"],ug:["ug-arab"],uk:["ru"],vec:["it"],vep:["et"],vls:["nl"],vmf:["de"],vot:["fi"],vro:["et"],wa:["fr"],wo:["fr"],wuu:["zh-hans"],xal:["ru"],xmf:["ka"],yi:["he"],za:["zh-hans"],zea:["nl"],zh:["zh-hans"],"zh-classical":["lzh"],"zh-cn":["zh-hans"],"zh-hant":["zh-hans"],"zh-hk":["zh-hant","zh-hans"],"zh-min-nan":["nan"],"zh-mo":["zh-hk","zh-hant","zh-hans"],"zh-my":["zh-sg","zh-hans"],"zh-sg":["zh-hans"],"zh-tw":["zh-hant","zh-hans"],"zh-yue":["yue"]})},"./node_modules/@wikimedia/jquery.i18n/src/jquery.i18n.js":function(e,t,o){var l,u,f,p,m=o("./node_modules/jquery/dist/jquery.js");l=m,p=Array.prototype.slice,(u=function(e){this.options=l.extend({},u.defaults,e),this.parser=this.options.parser,this.locale=this.options.locale,this.messageStore=this.options.messageStore,this.languages={}}).prototype={localize:function(e){var t,o,u,f,p,m;for(u=this.locale,f=0;u;){o=(t=u.split("-")).length;do{if(p=t.slice(0,o).join("-"),m=this.messageStore.get(p,e))return m;o--}while(o);if(u===this.options.fallbackLocale)break;u=l.i18n.fallbacks[this.locale]&&l.i18n.fallbacks[this.locale][f]||this.options.fallbackLocale,l.i18n.log("Trying fallback locale for "+this.locale+": "+u+" ("+e+")"),f++}return""},destroy:function(){l.removeData(document,"i18n")},load:function(e,t){var o,u,f,p={};if(e||t||(e="i18n/"+l.i18n().locale+".json",t=l.i18n().locale),"string"==typeof e&&"json"!==e.split("?")[0].split(".").pop()){for(p[t]=e+"/"+t+".json",o=(l.i18n.fallbacks[t]||[]).concat(this.options.fallbackLocale),u=0;u<o.length;u++)p[f=o[u]]=e+"/"+f+".json";return this.load(p)}return this.messageStore.load(e,t)},parse:function(e,t){var o=this.localize(e);return this.parser.language=l.i18n.languages[l.i18n().locale]||l.i18n.languages.default,""===o&&(o=e),this.parser.parse(o,t)}},l.i18n=function(e,t){var o,f=l.data(document,"i18n"),m="object"==typeof e&&e;return m&&m.locale&&f&&f.locale!==m.locale&&(f.locale=m.locale),f||(f=new u(m),l.data(document,"i18n",f)),"string"==typeof e?(o=void 0!==t?p.call(arguments,1):[],f.parse(e,o)):f},l.fn.i18n=function(){var e=l.data(document,"i18n");return e||(e=new u,l.data(document,"i18n",e)),this.each((function(){var t,o,u,f,p=l(this),m=p.data("i18n");m?(t=m.indexOf("["),o=m.indexOf("]"),-1!==t&&-1!==o&&t<o?(u=m.slice(t+1,o),f=m.slice(o+1),"html"===u?p.html(e.parse(f)):p.attr(u,e.parse(f))):p.text(e.parse(m))):p.find("[data-i18n]").i18n()}))},l.i18n.languages={},l.i18n.messageStore=l.i18n.messageStore||{},l.i18n.parser={parse:function(e,t){return e.replace(/\$(\d+)/g,(function(e,o){var l=parseInt(o,10)-1;return void 0!==t[l]?t[l]:"$"+o}))},emitter:{}},l.i18n.fallbacks={},l.i18n.debug=!1,l.i18n.log=function(){window.console&&l.i18n.debug&&window.console.log.apply(window.console,arguments)},u.defaults={locale:(f=l("html").attr("lang"),f||(f=navigator.language||navigator.userLanguage||""),f),fallbackLocale:"en",parser:l.i18n.parser,messageStore:l.i18n.messageStore},l.i18n.constructor=u},"./node_modules/@wikimedia/jquery.i18n/src/jquery.i18n.language.js":function(e,t,o){var l,u,f=o("./node_modules/jquery/dist/jquery.js");u={pluralRules:{ak:{one:"n = 0..1"},am:{one:"i = 0 or n = 1"},ar:{zero:"n = 0",one:"n = 1",two:"n = 2",few:"n % 100 = 3..10",many:"n % 100 = 11..99"},ars:{zero:"n = 0",one:"n = 1",two:"n = 2",few:"n % 100 = 3..10",many:"n % 100 = 11..99"},as:{one:"i = 0 or n = 1"},be:{one:"n % 10 = 1 and n % 100 != 11",few:"n % 10 = 2..4 and n % 100 != 12..14",many:"n % 10 = 0 or n % 10 = 5..9 or n % 100 = 11..14"},bh:{one:"n = 0..1"},bn:{one:"i = 0 or n = 1"},br:{one:"n % 10 = 1 and n % 100 != 11,71,91",two:"n % 10 = 2 and n % 100 != 12,72,92",few:"n % 10 = 3..4,9 and n % 100 != 10..19,70..79,90..99",many:"n != 0 and n % 1000000 = 0"},bs:{one:"v = 0 and i % 10 = 1 and i % 100 != 11 or f % 10 = 1 and f % 100 != 11",few:"v = 0 and i % 10 = 2..4 and i % 100 != 12..14 or f % 10 = 2..4 and f % 100 != 12..14"},cs:{one:"i = 1 and v = 0",few:"i = 2..4 and v = 0",many:"v != 0"},cy:{zero:"n = 0",one:"n = 1",two:"n = 2",few:"n = 3",many:"n = 6"},da:{one:"n = 1 or t != 0 and i = 0,1"},dsb:{one:"v = 0 and i % 100 = 1 or f % 100 = 1",two:"v = 0 and i % 100 = 2 or f % 100 = 2",few:"v = 0 and i % 100 = 3..4 or f % 100 = 3..4"},fa:{one:"i = 0 or n = 1"},ff:{one:"i = 0,1"},fil:{one:"v = 0 and i = 1,2,3 or v = 0 and i % 10 != 4,6,9 or v != 0 and f % 10 != 4,6,9"},fr:{one:"i = 0,1"},ga:{one:"n = 1",two:"n = 2",few:"n = 3..6",many:"n = 7..10"},gd:{one:"n = 1,11",two:"n = 2,12",few:"n = 3..10,13..19"},gu:{one:"i = 0 or n = 1"},guw:{one:"n = 0..1"},gv:{one:"v = 0 and i % 10 = 1",two:"v = 0 and i % 10 = 2",few:"v = 0 and i % 100 = 0,20,40,60,80",many:"v != 0"},he:{one:"i = 1 and v = 0",two:"i = 2 and v = 0",many:"v = 0 and n != 0..10 and n % 10 = 0"},hi:{one:"i = 0 or n = 1"},hr:{one:"v = 0 and i % 10 = 1 and i % 100 != 11 or f % 10 = 1 and f % 100 != 11",few:"v = 0 and i % 10 = 2..4 and i % 100 != 12..14 or f % 10 = 2..4 and f % 100 != 12..14"},hsb:{one:"v = 0 and i % 100 = 1 or f % 100 = 1",two:"v = 0 and i % 100 = 2 or f % 100 = 2",few:"v = 0 and i % 100 = 3..4 or f % 100 = 3..4"},hy:{one:"i = 0,1"},is:{one:"t = 0 and i % 10 = 1 and i % 100 != 11 or t != 0"},iu:{one:"n = 1",two:"n = 2"},iw:{one:"i = 1 and v = 0",two:"i = 2 and v = 0",many:"v = 0 and n != 0..10 and n % 10 = 0"},kab:{one:"i = 0,1"},kn:{one:"i = 0 or n = 1"},kw:{one:"n = 1",two:"n = 2"},lag:{zero:"n = 0",one:"i = 0,1 and n != 0"},ln:{one:"n = 0..1"},lt:{one:"n % 10 = 1 and n % 100 != 11..19",few:"n % 10 = 2..9 and n % 100 != 11..19",many:"f != 0"},lv:{zero:"n % 10 = 0 or n % 100 = 11..19 or v = 2 and f % 100 = 11..19",one:"n % 10 = 1 and n % 100 != 11 or v = 2 and f % 10 = 1 and f % 100 != 11 or v != 2 and f % 10 = 1"},mg:{one:"n = 0..1"},mk:{one:"v = 0 and i % 10 = 1 or f % 10 = 1"},mo:{one:"i = 1 and v = 0",few:"v != 0 or n = 0 or n != 1 and n % 100 = 1..19"},mr:{one:"i = 0 or n = 1"},mt:{one:"n = 1",few:"n = 0 or n % 100 = 2..10",many:"n % 100 = 11..19"},naq:{one:"n = 1",two:"n = 2"},nso:{one:"n = 0..1"},pa:{one:"n = 0..1"},pl:{one:"i = 1 and v = 0",few:"v = 0 and i % 10 = 2..4 and i % 100 != 12..14",many:"v = 0 and i != 1 and i % 10 = 0..1 or v = 0 and i % 10 = 5..9 or v = 0 and i % 100 = 12..14"},prg:{zero:"n % 10 = 0 or n % 100 = 11..19 or v = 2 and f % 100 = 11..19",one:"n % 10 = 1 and n % 100 != 11 or v = 2 and f % 10 = 1 and f % 100 != 11 or v != 2 and f % 10 = 1"},pt:{one:"i = 0..1"},ro:{one:"i = 1 and v = 0",few:"v != 0 or n = 0 or n != 1 and n % 100 = 1..19"},ru:{one:"v = 0 and i % 10 = 1 and i % 100 != 11",few:"v = 0 and i % 10 = 2..4 and i % 100 != 12..14",many:"v = 0 and i % 10 = 0 or v = 0 and i % 10 = 5..9 or v = 0 and i % 100 = 11..14"},se:{one:"n = 1",two:"n = 2"},sh:{one:"v = 0 and i % 10 = 1 and i % 100 != 11 or f % 10 = 1 and f % 100 != 11",few:"v = 0 and i % 10 = 2..4 and i % 100 != 12..14 or f % 10 = 2..4 and f % 100 != 12..14"},shi:{one:"i = 0 or n = 1",few:"n = 2..10"},si:{one:"n = 0,1 or i = 0 and f = 1"},sk:{one:"i = 1 and v = 0",few:"i = 2..4 and v = 0",many:"v != 0"},sl:{one:"v = 0 and i % 100 = 1",two:"v = 0 and i % 100 = 2",few:"v = 0 and i % 100 = 3..4 or v != 0"},sma:{one:"n = 1",two:"n = 2"},smi:{one:"n = 1",two:"n = 2"},smj:{one:"n = 1",two:"n = 2"},smn:{one:"n = 1",two:"n = 2"},sms:{one:"n = 1",two:"n = 2"},sr:{one:"v = 0 and i % 10 = 1 and i % 100 != 11 or f % 10 = 1 and f % 100 != 11",few:"v = 0 and i % 10 = 2..4 and i % 100 != 12..14 or f % 10 = 2..4 and f % 100 != 12..14"},ti:{one:"n = 0..1"},tl:{one:"v = 0 and i = 1,2,3 or v = 0 and i % 10 != 4,6,9 or v != 0 and f % 10 != 4,6,9"},tzm:{one:"n = 0..1 or n = 11..99"},uk:{one:"v = 0 and i % 10 = 1 and i % 100 != 11",few:"v = 0 and i % 10 = 2..4 and i % 100 != 12..14",many:"v = 0 and i % 10 = 0 or v = 0 and i % 10 = 5..9 or v = 0 and i % 100 = 11..14"},wa:{one:"n = 0..1"},zu:{one:"i = 0 or n = 1"}},convertPlural:function(e,t){var o,u,f,p,m=new RegExp("\\d+=","i");if(!t||0===t.length)return"";for(f=0;f<t.length;f++)if(p=t[f],m.test(p)){if(parseInt(p.slice(0,p.indexOf("=")),10)===e)return p.slice(p.indexOf("=")+1);t[f]=void 0}return t=l.map(t,(function(e){if(void 0!==e)return e})),(o=this.pluralRules[l.i18n().locale])?(u=this.getPluralForm(e,o),t[u=Math.min(u,t.length-1)]):1===e?t[0]:t[1]},getPluralForm:function(e,t){var o,l=["zero","one","two","few","many","other"],u=0;for(o=0;o<l.length;o++)if(t[l[o]]){if(pluralRuleParser(t[l[o]],e))return u;u++}return u},convertNumber:function(e,t){var o,u,f,p,m,g;if(p=this.digitTransformTable(l.i18n().locale),m=String(e),g="",!p)return e;if(t){if(parseFloat(e,10)===e)return e;for(u in o=[],p)o[p[u]]=u;p=o}for(f=0;f<m.length;f++)p[m[f]]?g+=p[m[f]]:g+=m[f];return t?parseFloat(g,10):g},convertGrammar:function(e,t){return e},gender:function(e,t){if(!t||0===t.length)return"";for(;t.length<2;)t.push(t[t.length-1]);return"male"===e?t[0]:"female"===e?t[1]:3===t.length?t[2]:t[0]},digitTransformTable:function(e){var t={ar:"٠١٢٣٤٥٦٧٨٩",fa:"۰۱۲۳۴۵۶۷۸۹",ml:"൦൧൨൩൪൫൬൭൮൯",kn:"೦೧೨೩೪೫೬೭೮೯",lo:"໐໑໒໓໔໕໖໗໘໙",or:"୦୧୨୩୪୫୬୭୮୯",kh:"០១២៣៤៥៦៧៨៩",nqo:"߀߁߂߃߄߅߆߇߈߉",pa:"੦੧੨੩੪੫੬੭੮੯",gu:"૦૧૨૩૪૫૬૭૮૯",hi:"०१२३४५६७८९",my:"၀၁၂၃၄၅၆၇၈၉",ta:"௦௧௨௩௪௫௬௭௮௯",te:"౦౧౨౩౪౫౬౭౮౯",th:"๐๑๒๓๔๕๖๗๘๙",bo:"༠༡༢༣༤༥༦༧༨༩"};return!!t[e]&&t[e].split("")}},(l=f).extend(l.i18n.languages,{default:u})},"./node_modules/@wikimedia/jquery.i18n/src/jquery.i18n.messagestore.js":function(e,t,o){var l,u,f=o("./node_modules/jquery/dist/jquery.js");l=f,(u=function(){this.messages={},this.sources={}}).prototype={load:function(e,t){var o,u,f=null,p=[],m=this;if("string"==typeof e)return l.i18n.log("Loading messages from: "+e),(o=e,u=l.Deferred(),l.getJSON(o).done(u.resolve).fail((function(e,t,f){l.i18n.log("Error in loading messages from "+o+" Exception: "+f),u.resolve()})),u.promise()).then((function(e){return m.load(e,t)}));if(t)return m.set(t,e),l.Deferred().resolve();for(f in e)Object.prototype.hasOwnProperty.call(e,f)&&(t=f,p.push(m.load(e[f],t)));return l.when.apply(l,p)},set:function(e,t){this.messages[e]?this.messages[e]=l.extend(this.messages[e],t):this.messages[e]=t},get:function(e,t){return this.messages[e]&&this.messages[e][t]}},l.extend(l.i18n.messageStore,new u)},"./node_modules/@wikimedia/jquery.i18n/src/jquery.i18n.parser.js":function(e,t,o){var l,u,f=o("./node_modules/jquery/dist/jquery.js");l=f,(u=function(e){this.options=l.extend({},l.i18n.parser.defaults,e),this.language=l.i18n.languages[String.locale]||l.i18n.languages.default,this.emitter=l.i18n.parser.emitter}).prototype={constructor:u,simpleParse:function(e,t){return e.replace(/\$(\d+)/g,(function(e,o){var l=parseInt(o,10)-1;return void 0!==t[l]?t[l]:"$"+o}))},parse:function(e,t){return e.indexOf("{{")<0?this.simpleParse(e,t):(this.emitter.language=l.i18n.languages[l.i18n().locale]||l.i18n.languages.default,this.emitter.emit(this.ast(e),t))},ast:function(e){var t,o,l,u,f,p,m,g,y,v,b,_,w,k,x,S,T,C,A,P=0;function E(e){return function(){var t,o;for(t=0;t<e.length;t++)if(null!==(o=e[t]()))return o;return null}}function D(e){var t,o,l=P,u=[];for(t=0;t<e.length;t++){if(null===(o=e[t]()))return P=l,null;u.push(o)}return u}function O(e,t){return function(){for(var o=P,l=[],u=t();null!==u;)l.push(u),u=t();return l.length<e?(P=o,null):l}}function j(t){var o=t.length;return function(){var l=null;return e.slice(P,P+o)===t&&(l=t,P+=o),l}}function I(t){return function(){var o=e.slice(P).match(t);return null===o?null:(P+=o[0].length,o[0])}}function N(){var e=D([l,u]);return null===e?null:e[1]}function M(){var e=D([f,p]);return null===e?null:["REPLACE",parseInt(e[1],10)-1]}function L(){var e,o=D([t,O(0,S)]);return null===o?null:(e=o[1]).length>1?["CONCAT"].concat(e):e[0]}function R(){var e=D([_,o,M]);return null===e?null:[e[0],e[2]]}function B(){var e=D([_,o,S]);return null===e?null:[e[0],e[2]]}function H(){var e=D([w,b,k]);return null===e?null:e[1]}if(t=j("|"),o=j(":"),l=j("\\"),u=I(/^./),f=j("$"),p=I(/^\d+/),m=I(/^[^{}[\]$\\]/),g=I(/^[^{}[\]$\\|]/),E([N,I(/^[^{}[\]$\s]/)]),y=E([N,g]),v=E([N,m]),C=I(/^[ !"$&'()*,./0-9;=?@A-Z^_`a-z~\x80-\xFF+-]+/),A=function(e){return e.toString()},_=function(){var e=C();return null===e?null:A(e)},b=E([function(){var e=D([E([R,B]),O(0,L)]);return null===e?null:e[0].concat(e[1])},function(){var e=D([_,O(0,L)]);return null===e?null:[e[0]].concat(e[1])}]),w=j("{{"),k=j("}}"),x=E([H,M,function(){var e=O(1,v)();return null===e?null:e.join("")}]),S=E([H,M,function(){var e=O(1,y)();return null===e?null:e.join("")}]),null===(T=function(){var e=O(0,x)();return null===e?null:["CONCAT"].concat(e)}())||P!==e.length)throw new Error("Parse error at position "+P.toString()+" in input: "+e);return T}},l.extend(l.i18n.parser,new u)},"./node_modules/jquery-ui/dist/jquery-ui.js":function(e,t,o){var l,u,f;u=[o("./node_modules/jquery/dist/jquery.js")],l=function(e){e.ui=e.ui||{},e.ui.version="1.13.2";var t,o=0,l=Array.prototype.hasOwnProperty,u=Array.prototype.slice;e.cleanData=(t=e.cleanData,function(o){var l,u,f;for(f=0;null!=(u=o[f]);f++)(l=e._data(u,"events"))&&l.remove&&e(u).triggerHandler("remove");t(o)}),e.widget=function(t,o,l){var u,f,p,m={},g=t.split(".")[0],y=g+"-"+(t=t.split(".")[1]);return l||(l=o,o=e.Widget),Array.isArray(l)&&(l=e.extend.apply(null,[{}].concat(l))),e.expr.pseudos[y.toLowerCase()]=function(t){return!!e.data(t,y)},e[g]=e[g]||{},u=e[g][t],f=e[g][t]=function(e,t){if(!this||!this._createWidget)return new f(e,t);arguments.length&&this._createWidget(e,t)},e.extend(f,u,{version:l.version,_proto:e.extend({},l),_childConstructors:[]}),(p=new o).options=e.widget.extend({},p.options),e.each(l,(function(e,t){m[e]="function"==typeof t?function(){function l(){return o.prototype[e].apply(this,arguments)}function u(t){return o.prototype[e].apply(this,t)}return function(){var e,o=this._super,f=this._superApply;return this._super=l,this._superApply=u,e=t.apply(this,arguments),this._super=o,this._superApply=f,e}}():t})),f.prototype=e.widget.extend(p,{widgetEventPrefix:u&&p.widgetEventPrefix||t},m,{constructor:f,namespace:g,widgetName:t,widgetFullName:y}),u?(e.each(u._childConstructors,(function(t,o){var l=o.prototype;e.widget(l.namespace+"."+l.widgetName,f,o._proto)})),delete u._childConstructors):o._childConstructors.push(f),e.widget.bridge(t,f),f},e.widget.extend=function(t){for(var o,f,p=u.call(arguments,1),m=0,g=p.length;m<g;m++)for(o in p[m])f=p[m][o],l.call(p[m],o)&&void 0!==f&&(e.isPlainObject(f)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],f):e.widget.extend({},f):t[o]=f);return t},e.widget.bridge=function(t,o){var l=o.prototype.widgetFullName||t;e.fn[t]=function(f){var p="string"==typeof f,m=u.call(arguments,1),g=this;return p?this.length||"instance"!==f?this.each((function(){var o,u=e.data(this,l);return"instance"===f?(g=u,!1):u?"function"!=typeof u[f]||"_"===f.charAt(0)?e.error("no such method '"+f+"' for "+t+" widget instance"):(o=u[f].apply(u,m))!==u&&void 0!==o?(g=o&&o.jquery?g.pushStack(o.get()):o,!1):void 0:e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+f+"'")})):g=void 0:(m.length&&(f=e.widget.extend.apply(null,[f].concat(m))),this.each((function(){var t=e.data(this,l);t?(t.option(f||{}),t._init&&t._init()):e.data(this,l,new o(f,this))}))),g}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,l){l=e(l||this.defaultElement||this)[0],this.element=e(l),this.uuid=o++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},l!==this&&(e.data(l,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===l&&this.destroy()}}),this.document=e(l.style?l.ownerDocument:l.document||l),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,o){t._removeClass(o,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,o){var l,u,f,p=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(p={},l=t.split("."),t=l.shift(),l.length){for(u=p[t]=e.widget.extend({},this.options[t]),f=0;f<l.length-1;f++)u[l[f]]=u[l[f]]||{},u=u[l[f]];if(t=l.pop(),1===arguments.length)return void 0===u[t]?null:u[t];u[t]=o}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];p[t]=o}return this._setOptions(p),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var o,l,u;for(o in t)u=this.classesElementLookup[o],t[o]!==this.options.classes[o]&&u&&u.length&&(l=e(u.get()),this._removeClass(u,o),l.addClass(this._classes({element:l,keys:o,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var o=[],l=this;function u(){var o=[];t.element.each((function(t,u){e.map(l.classesElementLookup,(function(e){return e})).some((function(e){return e.is(u)}))||o.push(u)})),l._on(e(o),{remove:"_untrackClassesElement"})}function f(f,p){var m,g;for(g=0;g<f.length;g++)m=l.classesElementLookup[f[g]]||e(),t.add?(u(),m=e(e.uniqueSort(m.get().concat(t.element.get())))):m=e(m.not(t.element).get()),l.classesElementLookup[f[g]]=m,o.push(f[g]),p&&t.classes[f[g]]&&o.push(t.classes[f[g]])}return(t=e.extend({element:this.element,classes:this.options.classes||{}},t)).keys&&f(t.keys.match(/\S+/g)||[],!0),t.extra&&f(t.extra.match(/\S+/g)||[]),o.join(" ")},_untrackClassesElement:function(t){var o=this;e.each(o.classesElementLookup,(function(l,u){-1!==e.inArray(t.target,u)&&(o.classesElementLookup[l]=e(u.not(t.target).get()))})),this._off(e(t.target))},_removeClass:function(e,t,o){return this._toggleClass(e,t,o,!1)},_addClass:function(e,t,o){return this._toggleClass(e,t,o,!0)},_toggleClass:function(e,t,o,l){l="boolean"==typeof l?l:o;var u="string"==typeof e||null===e,f={extra:u?t:o,keys:u?e:t,element:u?this.element:e,add:l};return f.element.toggleClass(this._classes(f),l),this},_on:function(t,o,l){var u,f=this;"boolean"!=typeof t&&(l=o,o=t,t=!1),l?(o=u=e(o),this.bindings=this.bindings.add(o)):(l=o,o=this.element,u=this.widget()),e.each(l,(function(l,p){function m(){if(t||!0!==f.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof p?f[p]:p).apply(f,arguments)}"string"!=typeof p&&(m.guid=p.guid=p.guid||m.guid||e.guid++);var g=l.match(/^([\w:-]*)\s*(.*)$/),y=g[1]+f.eventNamespace,v=g[2];v?u.on(y,v,m):o.on(y,m)}))},_off:function(t,o){o=(o||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(o),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function o(){return("string"==typeof e?l[e]:e).apply(l,arguments)}var l=this;return setTimeout(o,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,o,l){var u,f,p=this.options[t];if(l=l||{},(o=e.Event(o)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),o.target=this.element[0],f=o.originalEvent)for(u in f)u in o||(o[u]=f[u]);return this.element.trigger(o,l),!("function"==typeof p&&!1===p.apply(this.element[0],[o].concat(l))||o.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,o){e.Widget.prototype["_"+t]=function(l,u,f){var p;"string"==typeof u&&(u={effect:u});var m=u?!0===u||"number"==typeof u?o:u.effect||o:t;"number"==typeof(u=u||{})?u={duration:u}:!0===u&&(u={}),p=!e.isEmptyObject(u),u.complete=f,u.delay&&l.delay(u.delay),p&&e.effects&&e.effects.effect[m]?l[t](u):m!==t&&l[m]?l[m](u.duration,u.easing,f):l.queue((function(o){e(this)[t](),f&&f.call(l[0]),o()}))}})),e.widget,function(){var t,o=Math.max,l=Math.abs,u=/left|center|right/,f=/top|center|bottom/,p=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,g=/%$/,y=e.fn.position;function v(e,t,o){return[parseFloat(e[0])*(g.test(e[0])?t/100:1),parseFloat(e[1])*(g.test(e[1])?o/100:1)]}function b(t,o){return parseInt(e.css(t,o),10)||0}function _(e){return null!=e&&e===e.window}function w(e){var t=e[0];return 9===t.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:_(t)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:t.preventDefault?{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}e.position={scrollbarWidth:function(){if(void 0!==t)return t;var o,l,u=e("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>"),f=u.children()[0];return e("body").append(u),o=f.offsetWidth,u.css("overflow","scroll"),o===(l=f.offsetWidth)&&(l=u[0].clientWidth),u.remove(),t=o-l},getScrollInfo:function(t){var o=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),l=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),u="scroll"===o||"auto"===o&&t.width<t.element[0].scrollWidth;return{width:"scroll"===l||"auto"===l&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:u?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var o=e(t||window),l=_(o[0]),u=!!o[0]&&9===o[0].nodeType;return{element:o,isWindow:l,isDocument:u,offset:l||u?{left:0,top:0}:e(t).offset(),scrollLeft:o.scrollLeft(),scrollTop:o.scrollTop(),width:o.outerWidth(),height:o.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return y.apply(this,arguments);var g,_,k,x,S,T,C="string"==typeof(t=e.extend({},t)).of?e(document).find(t.of):e(t.of),A=e.position.getWithinInfo(t.within),P=e.position.getScrollInfo(A),E=(t.collision||"flip").split(" "),D={};return T=w(C),C[0].preventDefault&&(t.at="left top"),_=T.width,k=T.height,x=T.offset,S=e.extend({},x),e.each(["my","at"],(function(){var e,o,l=(t[this]||"").split(" ");1===l.length&&(l=u.test(l[0])?l.concat(["center"]):f.test(l[0])?["center"].concat(l):["center","center"]),l[0]=u.test(l[0])?l[0]:"center",l[1]=f.test(l[1])?l[1]:"center",e=p.exec(l[0]),o=p.exec(l[1]),D[this]=[e?e[0]:0,o?o[0]:0],t[this]=[m.exec(l[0])[0],m.exec(l[1])[0]]})),1===E.length&&(E[1]=E[0]),"right"===t.at[0]?S.left+=_:"center"===t.at[0]&&(S.left+=_/2),"bottom"===t.at[1]?S.top+=k:"center"===t.at[1]&&(S.top+=k/2),g=v(D.at,_,k),S.left+=g[0],S.top+=g[1],this.each((function(){var u,f,p=e(this),m=p.outerWidth(),y=p.outerHeight(),w=b(this,"marginLeft"),T=b(this,"marginTop"),O=m+w+b(this,"marginRight")+P.width,j=y+T+b(this,"marginBottom")+P.height,I=e.extend({},S),N=v(D.my,p.outerWidth(),p.outerHeight());"right"===t.my[0]?I.left-=m:"center"===t.my[0]&&(I.left-=m/2),"bottom"===t.my[1]?I.top-=y:"center"===t.my[1]&&(I.top-=y/2),I.left+=N[0],I.top+=N[1],u={marginLeft:w,marginTop:T},e.each(["left","top"],(function(o,l){e.ui.position[E[o]]&&e.ui.position[E[o]][l](I,{targetWidth:_,targetHeight:k,elemWidth:m,elemHeight:y,collisionPosition:u,collisionWidth:O,collisionHeight:j,offset:[g[0]+N[0],g[1]+N[1]],my:t.my,at:t.at,within:A,elem:p})})),t.using&&(f=function(e){var u=x.left-I.left,f=u+_-m,g=x.top-I.top,v=g+k-y,b={target:{element:C,left:x.left,top:x.top,width:_,height:k},element:{element:p,left:I.left,top:I.top,width:m,height:y},horizontal:f<0?"left":u>0?"right":"center",vertical:v<0?"top":g>0?"bottom":"middle"};_<m&&l(u+f)<_&&(b.horizontal="center"),k<y&&l(g+v)<k&&(b.vertical="middle"),o(l(u),l(f))>o(l(g),l(v))?b.important="horizontal":b.important="vertical",t.using.call(this,e,b)}),p.offset(e.extend(I,{using:f}))}))},e.ui.position={fit:{left:function(e,t){var l,u=t.within,f=u.isWindow?u.scrollLeft:u.offset.left,p=u.width,m=e.left-t.collisionPosition.marginLeft,g=f-m,y=m+t.collisionWidth-p-f;t.collisionWidth>p?g>0&&y<=0?(l=e.left+g+t.collisionWidth-p-f,e.left+=g-l):e.left=y>0&&g<=0?f:g>y?f+p-t.collisionWidth:f:g>0?e.left+=g:y>0?e.left-=y:e.left=o(e.left-m,e.left)},top:function(e,t){var l,u=t.within,f=u.isWindow?u.scrollTop:u.offset.top,p=t.within.height,m=e.top-t.collisionPosition.marginTop,g=f-m,y=m+t.collisionHeight-p-f;t.collisionHeight>p?g>0&&y<=0?(l=e.top+g+t.collisionHeight-p-f,e.top+=g-l):e.top=y>0&&g<=0?f:g>y?f+p-t.collisionHeight:f:g>0?e.top+=g:y>0?e.top-=y:e.top=o(e.top-m,e.top)}},flip:{left:function(e,t){var o,u,f=t.within,p=f.offset.left+f.scrollLeft,m=f.width,g=f.isWindow?f.scrollLeft:f.offset.left,y=e.left-t.collisionPosition.marginLeft,v=y-g,b=y+t.collisionWidth-m-g,_="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,w="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,k=-2*t.offset[0];v<0?((o=e.left+_+w+k+t.collisionWidth-m-p)<0||o<l(v))&&(e.left+=_+w+k):b>0&&((u=e.left-t.collisionPosition.marginLeft+_+w+k-g)>0||l(u)<b)&&(e.left+=_+w+k)},top:function(e,t){var o,u,f=t.within,p=f.offset.top+f.scrollTop,m=f.height,g=f.isWindow?f.scrollTop:f.offset.top,y=e.top-t.collisionPosition.marginTop,v=y-g,b=y+t.collisionHeight-m-g,_="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,w="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,k=-2*t.offset[1];v<0?((u=e.top+_+w+k+t.collisionHeight-m-p)<0||u<l(v))&&(e.top+=_+w+k):b>0&&((o=e.top-t.collisionPosition.marginTop+_+w+k-g)>0||l(o)<b)&&(e.top+=_+w+k)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}(),e.ui.position,e.extend(e.expr.pseudos,{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(o){return!!e.data(o,t)}})):function(t,o,l){return!!e.data(t,l[3])}}),e.fn.extend({disableSelection:(p="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(p+".ui-disableSelection",(function(e){e.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}});var f,p,m=e,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",y={},v=y.toString,b=/^([\-+])=\s*(\d+\.?\d*)/,_=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),e[4]?(parseInt(e[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),e[4]?(parseInt(e[4]+e[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],w=m.Color=function(e,t,o,l){return new m.Color.fn.parse(e,t,o,l)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},x={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},S=w.support={},T=m("<p>")[0],C=m.each;function A(e){return null==e?e+"":"object"==typeof e?y[v.call(e)]||"object":typeof e}function P(e,t,o){var l=x[t.type]||{};return null==e?o||!t.def?null:t.def:(e=l.floor?~~e:parseFloat(e),isNaN(e)?t.def:l.mod?(e+l.mod)%l.mod:Math.min(l.max,Math.max(0,e)))}function E(e){var t=w(),o=t._rgba=[];return e=e.toLowerCase(),C(_,(function(l,u){var f,p=u.re.exec(e),m=p&&u.parse(p),g=u.space||"rgba";if(m)return f=t[g](m),t[k[g].cache]=f[k[g].cache],o=t._rgba=f._rgba,!1})),o.length?("0,0,0,0"===o.join()&&m.extend(o,f.transparent),t):f[e]}function D(e,t,o){return 6*(o=(o+1)%1)<1?e+(t-e)*o*6:2*o<1?t:3*o<2?e+(t-e)*(2/3-o)*6:e}T.style.cssText="background-color:rgba(1,1,1,.5)",S.rgba=T.style.backgroundColor.indexOf("rgba")>-1,C(k,(function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}})),m.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){y["[object "+t+"]"]=t.toLowerCase()})),w.fn=m.extend(w.prototype,{parse:function(e,t,o,l){if(void 0===e)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=m(e).css(t),t=void 0);var u=this,p=A(e),g=this._rgba=[];return void 0!==t&&(e=[e,t,o,l],p="array"),"string"===p?this.parse(E(e)||f._default):"array"===p?(C(k.rgba.props,(function(t,o){g[o.idx]=P(e[o.idx],o)})),this):"object"===p?(C(k,e instanceof w?function(t,o){e[o.cache]&&(u[o.cache]=e[o.cache].slice())}:function(t,o){var l=o.cache;C(o.props,(function(t,f){if(!u[l]&&o.to){if("alpha"===t||null==e[t])return;u[l]=o.to(u._rgba)}u[l][f.idx]=P(e[t],f,!0)})),u[l]&&m.inArray(null,u[l].slice(0,3))<0&&(null==u[l][3]&&(u[l][3]=1),o.from&&(u._rgba=o.from(u[l])))}),this):void 0},is:function(e){var t=w(e),o=!0,l=this;return C(k,(function(e,u){var f,p=t[u.cache];return p&&(f=l[u.cache]||u.to&&u.to(l._rgba)||[],C(u.props,(function(e,t){if(null!=p[t.idx])return o=p[t.idx]===f[t.idx]}))),o})),o},_space:function(){var e=[],t=this;return C(k,(function(o,l){t[l.cache]&&e.push(o)})),e.pop()},transition:function(e,t){var o=w(e),l=o._space(),u=k[l],f=0===this.alpha()?w("transparent"):this,p=f[u.cache]||u.to(f._rgba),m=p.slice();return o=o[u.cache],C(u.props,(function(e,l){var u=l.idx,f=p[u],g=o[u],y=x[l.type]||{};null!==g&&(null===f?m[u]=g:(y.mod&&(g-f>y.mod/2?f+=y.mod:f-g>y.mod/2&&(f-=y.mod)),m[u]=P((g-f)*t+f,l)))})),this[l](m)},blend:function(e){if(1===this._rgba[3])return this;var t=this._rgba.slice(),o=t.pop(),l=w(e)._rgba;return w(m.map(t,(function(e,t){return(1-o)*l[t]+o*e})))},toRgbaString:function(){var e="rgba(",t=m.map(this._rgba,(function(e,t){return null!=e?e:t>2?1:0}));return 1===t[3]&&(t.pop(),e="rgb("),e+t.join()+")"},toHslaString:function(){var e="hsla(",t=m.map(this.hsla(),(function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e}));return 1===t[3]&&(t.pop(),e="hsl("),e+t.join()+")"},toHexString:function(e){var t=this._rgba.slice(),o=t.pop();return e&&t.push(~~(255*o)),"#"+m.map(t,(function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),w.fn.parse.prototype=w.fn,k.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,o,l=e[0]/255,u=e[1]/255,f=e[2]/255,p=e[3],m=Math.max(l,u,f),g=Math.min(l,u,f),y=m-g,v=m+g,b=.5*v;return t=g===m?0:l===m?60*(u-f)/y+360:u===m?60*(f-l)/y+120:60*(l-u)/y+240,o=0===y?0:b<=.5?y/v:y/(2-v),[Math.round(t)%360,o,b,null==p?1:p]},k.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,o=e[1],l=e[2],u=e[3],f=l<=.5?l*(1+o):l+o-l*o,p=2*l-f;return[Math.round(255*D(p,f,t+1/3)),Math.round(255*D(p,f,t)),Math.round(255*D(p,f,t-1/3)),u]},C(k,(function(e,t){var o=t.props,l=t.cache,u=t.to,f=t.from;w.fn[e]=function(e){if(u&&!this[l]&&(this[l]=u(this._rgba)),void 0===e)return this[l].slice();var t,p=A(e),m="array"===p||"object"===p?e:arguments,g=this[l].slice();return C(o,(function(e,t){var o=m["object"===p?e:t.idx];null==o&&(o=g[t.idx]),g[t.idx]=P(o,t)})),f?((t=w(f(g)))[l]=g,t):w(g)},C(o,(function(t,o){w.fn[t]||(w.fn[t]=function(l){var u,f,p,m,g=A(l);return f=(u=this[m="alpha"===t?this._hsla?"hsla":"rgba":e]())[o.idx],"undefined"===g?f:("function"===g&&(g=A(l=l.call(this,f))),null==l&&o.empty?this:("string"===g&&(p=b.exec(l))&&(l=f+parseFloat(p[2])*("+"===p[1]?1:-1)),u[o.idx]=l,this[m](u)))})}))})),w.hook=function(e){var t=e.split(" ");C(t,(function(e,t){m.cssHooks[t]={set:function(e,o){var l,u,f="";if("transparent"!==o&&("string"!==A(o)||(l=E(o)))){if(o=w(l||o),!S.rgba&&1!==o._rgba[3]){for(u="backgroundColor"===t?e.parentNode:e;(""===f||"transparent"===f)&&u&&u.style;)try{f=m.css(u,"backgroundColor"),u=u.parentNode}catch(e){}o=o.blend(f&&"transparent"!==f?f:"_default")}o=o.toRgbaString()}try{e.style[t]=o}catch(e){}}},m.fx.step[t]=function(e){e.colorInit||(e.start=w(e.elem,t),e.end=w(e.end),e.colorInit=!0),m.cssHooks[t].set(e.elem,e.start.transition(e.end,e.pos))}}))},w.hook(g),m.cssHooks.borderColor={expand:function(e){var t={};return C(["Top","Right","Bottom","Left"],(function(o,l){t["border"+l+"Color"]=e})),t}},f=m.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};var O,j,I="ui-effects-",N="ui-effects-style",M="ui-effects-animated";function L(e){for(var t=e.css("visibility");"inherit"===t;)t=(e=e.parent()).css("visibility");return"visible"===t}if(e.effects={effect:{}},function(){var t=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function l(e){return e.replace(/-([\da-z])/gi,(function(e,t){return t.toUpperCase()}))}function u(e){var t,o,u=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,f={};if(u&&u.length&&u[0]&&u[u[0]])for(o=u.length;o--;)"string"==typeof u[t=u[o]]&&(f[l(t)]=u[t]);else for(t in u)"string"==typeof u[t]&&(f[t]=u[t]);return f}function f(t,l){var u,f,p={};for(u in l)f=l[u],t[u]!==f&&(o[u]||!e.fx.step[u]&&isNaN(parseFloat(f))||(p[u]=f));return p}e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(t,o){e.fx.step[o]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(m.style(e.elem,o,e.end),e.setAttr=!0)}})),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(o,l,p,m){var g=e.speed(l,p,m);return this.queue((function(){var l,p=e(this),m=p.attr("class")||"",y=g.children?p.find("*").addBack():p;y=y.map((function(){return{el:e(this),start:u(this)}})),(l=function(){e.each(t,(function(e,t){o[t]&&p[t+"Class"](o[t])}))})(),y=y.map((function(){return this.end=u(this.el[0]),this.diff=f(this.start,this.end),this})),p.attr("class",m),y=y.map((function(){var t=this,o=e.Deferred(),l=e.extend({},g,{queue:!1,complete:function(){o.resolve(t)}});return this.el.animate(this.diff,l),o.promise()})),e.when.apply(e,y.get()).done((function(){l(),e.each(arguments,(function(){var t=this.el;e.each(this.diff,(function(e){t.css(e,"")}))})),g.complete.call(p[0])}))}))},e.fn.extend({addClass:function(t){return function(o,l,u,f){return l?e.effects.animateClass.call(this,{add:o},l,u,f):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(o,l,u,f){return arguments.length>1?e.effects.animateClass.call(this,{remove:o},l,u,f):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(o,l,u,f,p){return"boolean"==typeof l||void 0===l?u?e.effects.animateClass.call(this,l?{add:o}:{remove:o},u,f,p):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:o},l,u,f)}}(e.fn.toggleClass),switchClass:function(t,o,l,u,f){return e.effects.animateClass.call(this,{add:o,remove:t},l,u,f)}})}(),function(){function t(t,o,l,u){return e.isPlainObject(t)&&(o=t,t=t.effect),t={effect:t},null==o&&(o={}),"function"==typeof o&&(u=o,l=null,o={}),("number"==typeof o||e.fx.speeds[o])&&(u=l,l=o,o={}),"function"==typeof l&&(u=l,l=null),o&&e.extend(t,o),l=l||o.duration,t.duration=e.fx.off?0:"number"==typeof l?l:l in e.fx.speeds?e.fx.speeds[l]:e.fx.speeds._default,t.complete=u||o.complete,t}function o(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||"string"==typeof t&&!e.effects.effect[t]||"function"==typeof t||"object"==typeof t&&!t.effect}function l(e,t){var o=t.outerWidth(),l=t.outerHeight(),u=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(e)||["",0,o,l,0];return{top:parseFloat(u[1])||0,right:"auto"===u[2]?o:parseFloat(u[2]),bottom:"auto"===u[3]?l:parseFloat(u[3]),left:parseFloat(u[4])||0}}e.expr&&e.expr.pseudos&&e.expr.pseudos.animated&&(e.expr.pseudos.animated=function(t){return function(o){return!!e(o).data(M)||t(o)}}(e.expr.pseudos.animated)),!1!==e.uiBackCompat&&e.extend(e.effects,{save:function(e,t){for(var o=0,l=t.length;o<l;o++)null!==t[o]&&e.data(I+t[o],e[0].style[t[o]])},restore:function(e,t){for(var o,l=0,u=t.length;l<u;l++)null!==t[l]&&(o=e.data(I+t[l]),e.css(t[l],o))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var o={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},l=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),u={width:t.width(),height:t.height()},f=document.activeElement;try{f.id}catch(e){f=document.body}return t.wrap(l),(t[0]===f||e.contains(t[0],f))&&e(f).trigger("focus"),l=t.parent(),"static"===t.css("position")?(l.css({position:"relative"}),t.css({position:"relative"})):(e.extend(o,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],(function(e,l){o[l]=t.css(l),isNaN(parseInt(o[l],10))&&(o[l]="auto")})),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(u),l.css(o).show()},removeWrapper:function(t){var o=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===o||e.contains(t[0],o))&&e(o).trigger("focus")),t}}),e.extend(e.effects,{version:"1.13.2",define:function(t,o,l){return l||(l=o,o="effect"),e.effects.effect[t]=l,e.effects.effect[t].mode=o,l},scaledDimensions:function(e,t,o){if(0===t)return{height:0,width:0,outerHeight:0,outerWidth:0};var l="horizontal"!==o?(t||100)/100:1,u="vertical"!==o?(t||100)/100:1;return{height:e.height()*u,width:e.width()*l,outerHeight:e.outerHeight()*u,outerWidth:e.outerWidth()*l}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,o){var l=e.queue();t>1&&l.splice.apply(l,[1,0].concat(l.splice(t,o))),e.dequeue()},saveStyle:function(e){e.data(N,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(N)||"",e.removeData(N)},mode:function(e,t){var o=e.is(":hidden");return"toggle"===t&&(t=o?"show":"hide"),(o?"hide"===t:"show"===t)&&(t="none"),t},getBaseline:function(e,t){var o,l;switch(e[0]){case"top":o=0;break;case"middle":o=.5;break;case"bottom":o=1;break;default:o=e[0]/t.height}switch(e[1]){case"left":l=0;break;case"center":l=.5;break;case"right":l=1;break;default:l=e[1]/t.width}return{x:l,y:o}},createPlaceholder:function(t){var o,l=t.css("position"),u=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(l)&&(l="absolute",o=e("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(I+"placeholder",o)),t.css({position:l,left:u.left,top:u.top}),o},removePlaceholder:function(e){var t=I+"placeholder",o=e.data(t);o&&(o.remove(),e.removeData(t))},cleanUp:function(t){e.effects.restoreStyle(t),e.effects.removePlaceholder(t)},setTransition:function(t,o,l,u){return u=u||{},e.each(o,(function(e,o){var f=t.cssUnit(o);f[0]>0&&(u[o]=f[0]*l+f[1])})),u}}),e.fn.extend({effect:function(){var o=t.apply(this,arguments),l=e.effects.effect[o.effect],u=l.mode,f=o.queue,p=f||"fx",m=o.complete,g=o.mode,y=[],v=function(t){var o=e(this),l=e.effects.mode(o,g)||u;o.data(M,!0),y.push(l),u&&("show"===l||l===u&&"hide"===l)&&o.show(),u&&"none"===l||e.effects.saveStyle(o),"function"==typeof t&&t()};if(e.fx.off||!l)return g?this[g](o.duration,m):this.each((function(){m&&m.call(this)}));function b(t){var f=e(this);function p(){f.removeData(M),e.effects.cleanUp(f),"hide"===o.mode&&f.hide(),v()}function v(){"function"==typeof m&&m.call(f[0]),"function"==typeof t&&t()}o.mode=y.shift(),!1===e.uiBackCompat||u?"none"===o.mode?(f[g](),v()):l.call(f[0],o,p):(f.is(":hidden")?"hide"===g:"show"===g)?(f[g](),v()):l.call(f[0],o,v)}return!1===f?this.each(v).each(b):this.queue(p,v).queue(p,b)},show:function(e){return function(l){if(o(l))return e.apply(this,arguments);var u=t.apply(this,arguments);return u.mode="show",this.effect.call(this,u)}}(e.fn.show),hide:function(e){return function(l){if(o(l))return e.apply(this,arguments);var u=t.apply(this,arguments);return u.mode="hide",this.effect.call(this,u)}}(e.fn.hide),toggle:function(e){return function(l){if(o(l)||"boolean"==typeof l)return e.apply(this,arguments);var u=t.apply(this,arguments);return u.mode="toggle",this.effect.call(this,u)}}(e.fn.toggle),cssUnit:function(t){var o=this.css(t),l=[];return e.each(["em","px","%","pt"],(function(e,t){o.indexOf(t)>0&&(l=[parseFloat(o),t])})),l},cssClip:function(e){return e?this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"):l(this.css("clip"),this)},transfer:function(t,o){var l=e(this),u=e(t.to),f="fixed"===u.css("position"),p=e("body"),m=f?p.scrollTop():0,g=f?p.scrollLeft():0,y=u.offset(),v={top:y.top-m,left:y.left-g,height:u.innerHeight(),width:u.innerWidth()},b=l.offset(),_=e("<div class='ui-effects-transfer'></div>");_.appendTo("body").addClass(t.className).css({top:b.top-m,left:b.left-g,height:l.innerHeight(),width:l.innerWidth(),position:f?"fixed":"absolute"}).animate(v,t.duration,t.easing,(function(){_.remove(),"function"==typeof o&&o()}))}}),e.fx.step.clip=function(t){t.clipInit||(t.start=e(t.elem).cssClip(),"string"==typeof t.end&&(t.end=l(t.end,t.elem)),t.clipInit=!0),e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),O={},e.each(["Quad","Cubic","Quart","Quint","Expo"],(function(e,t){O[t]=function(t){return Math.pow(t,e+2)}})),e.extend(O,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,o=4;e<((t=Math.pow(2,--o))-1)/11;);return 1/Math.pow(4,3-o)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(O,(function(t,o){e.easing["easeIn"+t]=o,e.easing["easeOut"+t]=function(e){return 1-o(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?o(2*e)/2:1-o(-2*e+2)/2}})),e.effects,e.effects.define("blind","hide",(function(t,o){var l={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},u=e(this),f=t.direction||"up",p=u.cssClip(),m={clip:e.extend({},p)},g=e.effects.createPlaceholder(u);m.clip[l[f][0]]=m.clip[l[f][1]],"show"===t.mode&&(u.cssClip(m.clip),g&&g.css(e.effects.clipToBox(m)),m.clip=p),g&&g.animate(e.effects.clipToBox(m),t.duration,t.easing),u.animate(m,{queue:!1,duration:t.duration,easing:t.easing,complete:o})})),e.effects.define("bounce",(function(t,o){var l,u,f,p=e(this),m=t.mode,g="hide"===m,y="show"===m,v=t.direction||"up",b=t.distance,_=t.times||5,w=2*_+(y||g?1:0),k=t.duration/w,x=t.easing,S="up"===v||"down"===v?"top":"left",T="up"===v||"left"===v,C=0,A=p.queue().length;for(e.effects.createPlaceholder(p),f=p.css(S),b||(b=p["top"===S?"outerHeight":"outerWidth"]()/3),y&&((u={opacity:1})[S]=f,p.css("opacity",0).css(S,T?2*-b:2*b).animate(u,k,x)),g&&(b/=Math.pow(2,_-1)),(u={})[S]=f;C<_;C++)(l={})[S]=(T?"-=":"+=")+b,p.animate(l,k,x).animate(u,k,x),b=g?2*b:b/2;g&&((l={opacity:0})[S]=(T?"-=":"+=")+b,p.animate(l,k,x)),p.queue(o),e.effects.unshift(p,A,w+1)})),e.effects.define("clip","hide",(function(t,o){var l,u={},f=e(this),p=t.direction||"vertical",m="both"===p,g=m||"horizontal"===p,y=m||"vertical"===p;l=f.cssClip(),u.clip={top:y?(l.bottom-l.top)/2:l.top,right:g?(l.right-l.left)/2:l.right,bottom:y?(l.bottom-l.top)/2:l.bottom,left:g?(l.right-l.left)/2:l.left},e.effects.createPlaceholder(f),"show"===t.mode&&(f.cssClip(u.clip),u.clip=l),f.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:o})})),e.effects.define("drop","hide",(function(t,o){var l,u=e(this),f="show"===t.mode,p=t.direction||"left",m="up"===p||"down"===p?"top":"left",g="up"===p||"left"===p?"-=":"+=",y="+="===g?"-=":"+=",v={opacity:0};e.effects.createPlaceholder(u),l=t.distance||u["top"===m?"outerHeight":"outerWidth"](!0)/2,v[m]=g+l,f&&(u.css(v),v[m]=y+l,v.opacity=1),u.animate(v,{queue:!1,duration:t.duration,easing:t.easing,complete:o})})),e.effects.define("explode","hide",(function(t,o){var l,u,f,p,m,g,y=t.pieces?Math.round(Math.sqrt(t.pieces)):3,v=y,b=e(this),_="show"===t.mode,w=b.show().css("visibility","hidden").offset(),k=Math.ceil(b.outerWidth()/v),x=Math.ceil(b.outerHeight()/y),S=[];function T(){S.push(this),S.length===y*v&&C()}for(l=0;l<y;l++)for(p=w.top+l*x,g=l-(y-1)/2,u=0;u<v;u++)f=w.left+u*k,m=u-(v-1)/2,b.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-u*k,top:-l*x}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:k,height:x,left:f+(_?m*k:0),top:p+(_?g*x:0),opacity:_?0:1}).animate({left:f+(_?0:m*k),top:p+(_?0:g*x),opacity:_?1:0},t.duration||500,t.easing,T);function C(){b.css({visibility:"visible"}),e(S).remove(),o()}})),e.effects.define("fade","toggle",(function(t,o){var l="show"===t.mode;e(this).css("opacity",l?0:1).animate({opacity:l?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:o})})),e.effects.define("fold","hide",(function(t,o){var l=e(this),u=t.mode,f="show"===u,p="hide"===u,m=t.size||15,g=/([0-9]+)%/.exec(m),y=t.horizFirst?["right","bottom"]:["bottom","right"],v=t.duration/2,b=e.effects.createPlaceholder(l),_=l.cssClip(),w={clip:e.extend({},_)},k={clip:e.extend({},_)},x=[_[y[0]],_[y[1]]],S=l.queue().length;g&&(m=parseInt(g[1],10)/100*x[p?0:1]),w.clip[y[0]]=m,k.clip[y[0]]=m,k.clip[y[1]]=0,f&&(l.cssClip(k.clip),b&&b.css(e.effects.clipToBox(k)),k.clip=_),l.queue((function(o){b&&b.animate(e.effects.clipToBox(w),v,t.easing).animate(e.effects.clipToBox(k),v,t.easing),o()})).animate(w,v,t.easing).animate(k,v,t.easing).queue(o),e.effects.unshift(l,S,4)})),e.effects.define("highlight","show",(function(t,o){var l=e(this),u={backgroundColor:l.css("backgroundColor")};"hide"===t.mode&&(u.opacity=0),e.effects.saveStyle(l),l.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:o})})),e.effects.define("size",(function(t,o){var l,u,f,p=e(this),m=["fontSize"],g=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],y=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],v=t.mode,b="effect"!==v,_=t.scale||"both",w=t.origin||["middle","center"],k=p.css("position"),x=p.position(),S=e.effects.scaledDimensions(p),T=t.from||S,C=t.to||e.effects.scaledDimensions(p,0);e.effects.createPlaceholder(p),"show"===v&&(f=T,T=C,C=f),u={from:{y:T.height/S.height,x:T.width/S.width},to:{y:C.height/S.height,x:C.width/S.width}},"box"!==_&&"both"!==_||(u.from.y!==u.to.y&&(T=e.effects.setTransition(p,g,u.from.y,T),C=e.effects.setTransition(p,g,u.to.y,C)),u.from.x!==u.to.x&&(T=e.effects.setTransition(p,y,u.from.x,T),C=e.effects.setTransition(p,y,u.to.x,C))),"content"!==_&&"both"!==_||u.from.y!==u.to.y&&(T=e.effects.setTransition(p,m,u.from.y,T),C=e.effects.setTransition(p,m,u.to.y,C)),w&&(l=e.effects.getBaseline(w,S),T.top=(S.outerHeight-T.outerHeight)*l.y+x.top,T.left=(S.outerWidth-T.outerWidth)*l.x+x.left,C.top=(S.outerHeight-C.outerHeight)*l.y+x.top,C.left=(S.outerWidth-C.outerWidth)*l.x+x.left),delete T.outerHeight,delete T.outerWidth,p.css(T),"content"!==_&&"both"!==_||(g=g.concat(["marginTop","marginBottom"]).concat(m),y=y.concat(["marginLeft","marginRight"]),p.find("*[width]").each((function(){var o=e(this),l=e.effects.scaledDimensions(o),f={height:l.height*u.from.y,width:l.width*u.from.x,outerHeight:l.outerHeight*u.from.y,outerWidth:l.outerWidth*u.from.x},p={height:l.height*u.to.y,width:l.width*u.to.x,outerHeight:l.height*u.to.y,outerWidth:l.width*u.to.x};u.from.y!==u.to.y&&(f=e.effects.setTransition(o,g,u.from.y,f),p=e.effects.setTransition(o,g,u.to.y,p)),u.from.x!==u.to.x&&(f=e.effects.setTransition(o,y,u.from.x,f),p=e.effects.setTransition(o,y,u.to.x,p)),b&&e.effects.saveStyle(o),o.css(f),o.animate(p,t.duration,t.easing,(function(){b&&e.effects.restoreStyle(o)}))}))),p.animate(C,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){var t=p.offset();0===C.opacity&&p.css("opacity",T.opacity),b||(p.css("position","static"===k?"relative":k).offset(t),e.effects.saveStyle(p)),o()}})})),e.effects.define("scale",(function(t,o){var l=e(this),u=t.mode,f=parseInt(t.percent,10)||(0===parseInt(t.percent,10)||"effect"!==u?0:100),p=e.extend(!0,{from:e.effects.scaledDimensions(l),to:e.effects.scaledDimensions(l,f,t.direction||"both"),origin:t.origin||["middle","center"]},t);t.fade&&(p.from.opacity=1,p.to.opacity=0),e.effects.effect.size.call(this,p,o)})),e.effects.define("puff","hide",(function(t,o){var l=e.extend(!0,{},t,{fade:!0,percent:parseInt(t.percent,10)||150});e.effects.effect.scale.call(this,l,o)})),e.effects.define("pulsate","show",(function(t,o){var l=e(this),u=t.mode,f="show"===u,p=f||"hide"===u,m=2*(t.times||5)+(p?1:0),g=t.duration/m,y=0,v=1,b=l.queue().length;for(!f&&l.is(":visible")||(l.css("opacity",0).show(),y=1);v<m;v++)l.animate({opacity:y},g,t.easing),y=1-y;l.animate({opacity:y},g,t.easing),l.queue(o),e.effects.unshift(l,b,m+1)})),e.effects.define("shake",(function(t,o){var l=1,u=e(this),f=t.direction||"left",p=t.distance||20,m=t.times||3,g=2*m+1,y=Math.round(t.duration/g),v="up"===f||"down"===f?"top":"left",b="up"===f||"left"===f,_={},w={},k={},x=u.queue().length;for(e.effects.createPlaceholder(u),_[v]=(b?"-=":"+=")+p,w[v]=(b?"+=":"-=")+2*p,k[v]=(b?"-=":"+=")+2*p,u.animate(_,y,t.easing);l<m;l++)u.animate(w,y,t.easing).animate(k,y,t.easing);u.animate(w,y,t.easing).animate(_,y/2,t.easing).queue(o),e.effects.unshift(u,x,g+1)})),e.effects.define("slide","show",(function(t,o){var l,u,f=e(this),p={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},m=t.mode,g=t.direction||"left",y="up"===g||"down"===g?"top":"left",v="up"===g||"left"===g,b=t.distance||f["top"===y?"outerHeight":"outerWidth"](!0),_={};e.effects.createPlaceholder(f),l=f.cssClip(),u=f.position()[y],_[y]=(v?-1:1)*b+u,_.clip=f.cssClip(),_.clip[p[g][1]]=_.clip[p[g][0]],"show"===m&&(f.cssClip(_.clip),f.css(y,_[y]),_.clip=l,_[y]=u),f.animate(_,{queue:!1,duration:t.duration,easing:t.easing,complete:o})})),!1!==e.uiBackCompat&&e.effects.define("transfer",(function(t,o){e(this).transfer(t,o)})),e.ui.focusable=function(t,o){var l,u,f,p,m,g=t.nodeName.toLowerCase();return"area"===g?(u=(l=t.parentNode).name,!(!t.href||!u||"map"!==l.nodeName.toLowerCase())&&(f=e("img[usemap='#"+u+"']")).length>0&&f.is(":visible")):(/^(input|select|textarea|button|object)$/.test(g)?(p=!t.disabled)&&(m=e(t).closest("fieldset")[0])&&(p=!m.disabled):p="a"===g&&t.href||o,p&&e(t).is(":visible")&&L(e(t)))},e.extend(e.expr.pseudos,{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}}),e.ui.focusable,e.fn._form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)},e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout((function(){var o=t.data("ui-form-reset-instances");e.each(o,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){if(this.form=this.element._form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},e.expr.pseudos||(e.expr.pseudos=e.expr[":"]),e.uniqueSort||(e.uniqueSort=e.unique),!e.escapeSelector){var R=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,B=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e};e.escapeSelector=function(e){return(e+"").replace(R,B)}}e.fn.even&&e.fn.odd||e.fn.extend({even:function(){return this.filter((function(e){return e%2==0}))},odd:function(){return this.filter((function(e){return e%2==1}))}}),e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},e.fn.labels=function(){var t,o,l,u,f;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(u=this.eq(0).parents("label"),(l=this.attr("id"))&&(f=(t=this.eq(0).parents().last()).add(t.length?t.siblings():this.siblings()),o="label[for='"+e.escapeSelector(l)+"']",u=u.add(f.find(o).addBack(o))),this.pushStack(u)):this.pushStack([])},e.fn.scrollParent=function(t){var o=this.css("position"),l="absolute"===o,u=t?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter((function(){var t=e(this);return(!l||"static"!==t.css("position"))&&u.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))})).eq(0);return"fixed"!==o&&f.length?f:e(this[0].ownerDocument||document)},e.extend(e.expr.pseudos,{tabbable:function(t){var o=e.attr(t,"tabindex"),l=null!=o;return(!l||o>=0)&&e.ui.focusable(t,l)}}),e.fn.extend({uniqueId:(j=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++j)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")}))}}),e.widget("ui.accordion",{version:"1.13.2",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:function(e){return e.find("> li > :first-child").add(e.find("> :not(li)").even())},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t,o,l=this.options.icons;l&&(t=e("<span>"),this._addClass(t,"ui-accordion-header-icon","ui-icon "+l.header),t.prependTo(this.headers),o=this.active.children(".ui-accordion-header-icon"),this._removeClass(o,l.header)._addClass(o,null,l.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){"active"!==e?("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||!1!==this.options.active||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons())):this._activate(t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!e)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var o=e.ui.keyCode,l=this.headers.length,u=this.headers.index(t.target),f=!1;switch(t.keyCode){case o.RIGHT:case o.DOWN:f=this.headers[(u+1)%l];break;case o.LEFT:case o.UP:f=this.headers[(u-1+l)%l];break;case o.SPACE:case o.ENTER:this._eventHandler(t);break;case o.HOME:f=this.headers[0];break;case o.END:f=this.headers[l-1]}f&&(e(t.target).attr("tabIndex",-1),e(f).attr("tabIndex",0),e(f).trigger("focus"),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=e()):!1===t.active?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;"function"==typeof this.options.header?this.headers=this.options.header(this.element):this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,o=this.options,l=o.heightStyle,u=this.element.parent();this.active=this._findActive(o.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each((function(){var t=e(this),o=t.uniqueId().attr("id"),l=t.next(),u=l.uniqueId().attr("id");t.attr("aria-controls",u),l.attr("aria-labelledby",o)})).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(o.event),"fill"===l?(t=u.height(),this.element.siblings(":visible").each((function(){var o=e(this),l=o.css("position");"absolute"!==l&&"fixed"!==l&&(t-=o.outerHeight(!0))})),this.headers.each((function(){t-=e(this).outerHeight(!0)})),this.headers.next().each((function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===l&&(t=0,this.headers.next().each((function(){var o=e(this).is(":visible");o||e(this).show(),t=Math.max(t,e(this).css("height","").height()),o||e(this).hide()})).height(t))},_activate:function(t){var o=this._findActive(t)[0];o!==this.active[0]&&(o=o||this.active[0],this._eventHandler({target:o,currentTarget:o,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var o={keydown:"_keydown"};t&&e.each(t.split(" "),(function(e,t){o[t]="_eventHandler"})),this._off(this.headers.add(this.headers.next())),this._on(this.headers,o),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var o,l,u=this.options,f=this.active,p=e(t.currentTarget),m=p[0]===f[0],g=m&&u.collapsible,y=g?e():p.next(),v=f.next(),b={oldHeader:f,oldPanel:v,newHeader:g?e():p,newPanel:y};t.preventDefault(),m&&!u.collapsible||!1===this._trigger("beforeActivate",t,b)||(u.active=!g&&this.headers.index(p),this.active=m?e():p,this._toggle(b),this._removeClass(f,"ui-accordion-header-active","ui-state-active"),u.icons&&(o=f.children(".ui-accordion-header-icon"),this._removeClass(o,null,u.icons.activeHeader)._addClass(o,null,u.icons.header)),m||(this._removeClass(p,"ui-accordion-header-collapsed")._addClass(p,"ui-accordion-header-active","ui-state-active"),u.icons&&(l=p.children(".ui-accordion-header-icon"),this._removeClass(l,null,u.icons.header)._addClass(l,null,u.icons.activeHeader)),this._addClass(p.next(),"ui-accordion-content-active")))},_toggle:function(t){var o=t.newPanel,l=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=o,this.prevHide=l,this.options.animate?this._animate(o,l,t):(l.hide(),o.show(),this._toggleComplete(t)),l.attr({"aria-hidden":"true"}),l.prev().attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&l.length?l.prev().attr({tabIndex:-1,"aria-expanded":"false"}):o.length&&this.headers.filter((function(){return 0===parseInt(e(this).attr("tabIndex"),10)})).attr("tabIndex",-1),o.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,o){var l,u,f,p=this,m=0,g=e.css("box-sizing"),y=e.length&&(!t.length||e.index()<t.index()),v=this.options.animate||{},b=y&&v.down||v,_=function(){p._toggleComplete(o)};return"number"==typeof b&&(f=b),"string"==typeof b&&(u=b),u=u||b.easing||v.easing,f=f||b.duration||v.duration,t.length?e.length?(l=e.show().outerHeight(),t.animate(this.hideProps,{duration:f,easing:u,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(this.showProps,{duration:f,easing:u,complete:_,step:function(e,o){o.now=Math.round(e),"height"!==o.prop?"content-box"===g&&(m+=o.now):"content"!==p.options.heightStyle&&(o.now=Math.round(l-t.outerHeight()-m),m=0)}})):t.animate(this.hideProps,f,u,_):e.animate(this.showProps,f,u,_)},_toggleComplete:function(e){var t=e.oldPanel,o=t.prev();this._removeClass(t,"ui-accordion-content-active"),this._removeClass(o,"ui-accordion-header-active")._addClass(o,"ui-accordion-header-collapsed"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(o){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t},e.widget("ui.menu",{version:"1.13.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault(),this._activateItem(e)},"click .ui-menu-item":function(t){var o=e(t.target),l=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&o.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),o.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&l.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var o=this.active||this._menuItems().first();t||this.focus(e,o)},blur:function(t){this._delay((function(){!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]))&&this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e,!0),this.mouseHandled=!1}})},_activateItem:function(t){if(!this.previousFilter&&(t.clientX!==this.lastMousePosition.x||t.clientY!==this.lastMousePosition.y)){this.lastMousePosition={x:t.clientX,y:t.clientY};var o=e(t.target).closest(".ui-menu-item"),l=e(t.currentTarget);o[0]===l[0]&&(l.is(".ui-state-active")||(this._removeClass(l.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,l)))}},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each((function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()}))},_keydown:function(t){var o,l,u,f,p=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:p=!1,l=this.previousFilter||"",f=!1,u=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),u===l?f=!0:u=l+u,o=this._filterMenuItems(u),(o=f&&-1!==o.index(this.active.next())?this.active.nextAll(".ui-menu-item"):o).length||(u=String.fromCharCode(t.keyCode),o=this._filterMenuItems(u)),o.length?(this.focus(t,o),this.previousFilter=u,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}p&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,o,l,u,f=this,p=this.options.icons.submenu,m=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),o=m.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),o=t.prev(),l=e("<span>").data("ui-menu-submenu-caret",!0);f._addClass(l,"ui-menu-icon","ui-icon "+p),o.attr("aria-haspopup","true").prepend(l),t.attr("aria-labelledby",o.attr("id"))})),this._addClass(o,"ui-menu","ui-widget ui-widget-content ui-front"),(t=m.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var t=e(this);f._isDivider(t)&&f._addClass(t,"ui-menu-divider","ui-widget-content")})),u=(l=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(l,"ui-menu-item")._addClass(u,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var o=this.element.find(".ui-menu-icon");this._removeClass(o,null,this.options.icons.submenu)._addClass(o,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var o,l,u;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),l=this.active.children(".ui-menu-item-wrapper"),this._addClass(l,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",l.attr("id")),u=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(u,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(o=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(o),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var o,l,u,f,p,m;this._hasScroll()&&(o=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,l=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,u=t.offset().top-this.activeMenu.offset().top-o-l,f=this.activeMenu.scrollTop(),p=this.activeMenu.height(),m=t.outerHeight(),u<0?this.activeMenu.scrollTop(f+u):u+m>p&&this.activeMenu.scrollTop(f+u-p+m))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var o=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(o)},collapseAll:function(t,o){clearTimeout(this.timer),this.timer=this._delay((function(){var l=o?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));l.length||(l=this.element),this._close(l),this.blur(t),this._removeClass(l.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=l}),o?0:this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this._menuItems(this.active.children(".ui-menu")).first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(e){return(e||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(e,t,o){var l;this.active&&(l="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").last():this.active[e+"All"](".ui-menu-item").first()),l&&l.length&&this.active||(l=this._menuItems(this.activeMenu)[t]()),this.focus(o,l)},nextPage:function(t){var o,l,u;this.active?this.isLastItem()||(this._hasScroll()?(l=this.active.offset().top,u=this.element.innerHeight(),0===e.fn.jquery.indexOf("3.2.")&&(u+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.nextAll(".ui-menu-item").each((function(){return(o=e(this)).offset().top-l-u<0})),this.focus(t,o)):this.focus(t,this._menuItems(this.activeMenu)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var o,l,u;this.active?this.isFirstItem()||(this._hasScroll()?(l=this.active.offset().top,u=this.element.innerHeight(),0===e.fn.jquery.indexOf("3.2.")&&(u+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.prevAll(".ui-menu-item").each((function(){return(o=e(this)).offset().top-l+u>0})),this.focus(t,o)):this.focus(t,this._menuItems(this.activeMenu).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var o={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,o)},_filterMenuItems:function(t){var o=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),l=new RegExp("^"+o,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return l.test(String.prototype.trim.call(e(this).children(".ui-menu-item-wrapper").text()))}))}}),e.widget("ui.autocomplete",{version:"1.13.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var t,o,l,u=this.element[0].nodeName.toLowerCase(),f="textarea"===u,p="input"===u;this.isMultiLine=f||!p&&this._isContentEditable(this.element),this.valueMethod=this.element[f||p?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(u){if(this.element.prop("readOnly"))return t=!0,l=!0,void(o=!0);t=!1,l=!1,o=!1;var f=e.ui.keyCode;switch(u.keyCode){case f.PAGE_UP:t=!0,this._move("previousPage",u);break;case f.PAGE_DOWN:t=!0,this._move("nextPage",u);break;case f.UP:t=!0,this._keyEvent("previous",u);break;case f.DOWN:t=!0,this._keyEvent("next",u);break;case f.ENTER:this.menu.active&&(t=!0,u.preventDefault(),this.menu.select(u));break;case f.TAB:this.menu.active&&this.menu.select(u);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(u),u.preventDefault());break;default:o=!0,this._searchTimeout(u)}},keypress:function(l){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||l.preventDefault());if(!o){var u=e.ui.keyCode;switch(l.keyCode){case u.PAGE_UP:this._move("previousPage",l);break;case u.PAGE_DOWN:this._move("nextPage",l);break;case u.UP:this._keyEvent("previous",l);break;case u.DOWN:this._keyEvent("next",l)}}},input:function(e){if(l)return l=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().attr({unselectable:"on"}).menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault()},menufocus:function(t,o){var l,u;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));u=o.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:u})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(u.value),(l=o.item.attr("aria-label")||u.value)&&String.prototype.trim.call(l).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay((function(){this.liveRegion.html(e("<div>").text(l))}),100))},menuselect:function(t,o){var l=o.item.data("ui-autocomplete-item"),u=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=u,this._delay((function(){this.previous=u,this.selectedItem=l}))),!1!==this._trigger("select",t,{item:l})&&this._value(l.value),this.term=this._value(),this.close(t),this.selectedItem=l}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var o=this.menu.element[0];return t.target===this.element[0]||t.target===o||e.contains(o,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,o,l=this;Array.isArray(this.options.source)?(t=this.options.source,this.source=function(o,l){l(e.ui.autocomplete.filter(t,o.term))}):"string"==typeof this.options.source?(o=this.options.source,this.source=function(t,u){l.xhr&&l.xhr.abort(),l.xhr=e.ajax({url:o,data:t,dataType:"json",success:function(e){u(e)},error:function(){u([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){var t=this.term===this._value(),o=this.menu.element.is(":visible"),l=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||o||l)||(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=++this.requestIndex;return function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}.bind(this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})}))},_suggest:function(t){var o=this.menu.element.empty();this._renderMenu(o,t),this.isNewMenu=!0,this.menu.refresh(),o.show(),this._resizeMenu(),o.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,o){var l=this;e.each(o,(function(e,o){l._renderItemData(t,o)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,o){return e("<li>").append(e("<div>").text(o.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,o){var l=new RegExp(e.ui.autocomplete.escapeRegex(o),"i");return e.grep(t,(function(e){return l.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var o;this._superApply(arguments),this.options.disabled||this.cancelSearch||(o=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay((function(){this.liveRegion.html(e("<div>").text(o))}),100))}}),e.ui.autocomplete;var H,W=/ui-corner-([a-z]){2,6}/g;function G(e){for(var t,o;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(o=parseInt(e.css("zIndex"),10),!isNaN(o)&&0!==o))return o;e=e.parent()}return 0}function q(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=z(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function z(t){var o="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",o,(function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")})).on("mouseover",o,U)}function U(){e.datepicker._isDisabledDatepicker(H.inline?H.dpDiv.parent()[0]:H.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function F(t,o){for(var l in e.extend(t,o),o)null==o[l]&&(t[l]=o[l]);return t}e.widget("ui.controlgroup",{version:"1.13.2",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,o=[];e.each(this.options.items,(function(l,u){var f,p={};if(u)return"controlgroupLabel"===l?((f=t.element.find(u)).each((function(){var t=e(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")})),t._addClass(f,null,"ui-widget ui-widget-content ui-state-default"),void(o=o.concat(f.get()))):void(e.fn[l]&&(p=t["_"+l+"Options"]?t["_"+l+"Options"]("middle"):{classes:{}},t.element.find(u).each((function(){var u=e(this),f=u[l]("instance"),m=e.widget.extend({},p);if("button"!==l||!u.parent(".ui-spinner").length){f||(f=u[l]()[l]("instance")),f&&(m.classes=t._resolveClassesValues(m.classes,f)),u[l](m);var g=u[l]("widget");e.data(g[0],"ui-controlgroup-data",f||u[l]("instance")),o.push(g[0])}}))))})),this.childWidgets=e(e.uniqueSort(o)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each((function(){var o=e(this).data("ui-controlgroup-data");o&&o[t]&&o[t]()}))},_updateCornerClass:function(e,t){var o="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",l=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,o),this._addClass(e,null,l)},_buildSimpleOptions:function(e,t){var o="vertical"===this.options.direction,l={classes:{}};return l.classes[t]={middle:"",first:"ui-corner-"+(o?"top":"left"),last:"ui-corner-"+(o?"bottom":"right"),only:"ui-corner-all"}[e],l},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(t,o){var l={};return e.each(t,(function(e){var u=o.options.classes[e]||"";u=String.prototype.trim.call(u.replace(W,"")),l[e]=(u+" "+t[e]).replace(/\s+/g," ")})),l},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"!==e?this.refresh():this._callChildMethod(t?"disable":"enable")},refresh:function(){var t,o=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),t=this.childWidgets,this.options.onlyVisible&&(t=t.filter(":visible")),t.length&&(e.each(["first","last"],(function(e,l){var u=t[l]().data("ui-controlgroup-data");if(u&&o["_"+u.widgetName+"Options"]){var f=o["_"+u.widgetName+"Options"](1===t.length?"only":l);f.classes=o._resolveClassesValues(f.classes,u),u.element[u.widgetName](f)}else o._updateCornerClass(t[l](),l)})),this._callChildMethod("refresh"))}}),e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.13.2",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,o,l,u=this._super()||{};return this._readType(),o=this.element.labels(),this.label=e(o[o.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",(l=this.label.contents().not(this.element[0])).length&&(this.originalLabel+=l.clone().wrapAll("<div></div>").parent().html()),this.originalLabel&&(u.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(u.disabled=t),u},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,o="input[name='"+e.escapeSelector(t)+"']";return t?(this.form.length?e(this.form[0].elements).filter(o):e(o).filter((function(){return 0===e(this)._form().length}))).not(this.element):e([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each((function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")}))},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t){if(this._super(e,t),"disabled"===e)return this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t);this.refresh()}},_updateIcon:function(t){var o="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(o+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):o+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",o),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]),e.ui.checkboxradio,e.widget("ui.button",{version:"1.13.2",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),null!=(e=this.element[0].disabled)&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,o){var l="iconPosition"!==t,u=l?this.options.iconPosition:o,f="top"===u||"bottom"===u;this.icon?l&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),l&&this._addClass(this.icon,null,o),this._attachIcon(u),f?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(u))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,o=void 0===e.icon?this.options.icon:e.icon;t||o||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.trigger("blur"))},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!1!==e.uiBackCompat&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){"text"!==e?("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",t)}}),e.fn.button=function(t){return function(o){var l="string"==typeof o,u=Array.prototype.slice.call(arguments,1),f=this;return l?this.length||"instance"!==o?this.each((function(){var t,l=e(this).attr("type"),p="checkbox"!==l&&"radio"!==l?"button":"checkboxradio",m=e.data(this,"ui-"+p);return"instance"===o?(f=m,!1):m?"function"!=typeof m[o]||"_"===o.charAt(0)?e.error("no such method '"+o+"' for button widget instance"):(t=m[o].apply(m,u))!==m&&void 0!==t?(f=t&&t.jquery?f.pushStack(t.get()):t,!1):void 0:e.error("cannot call methods on button prior to initialization; attempted to call method '"+o+"'")})):f=void 0:(u.length&&(o=e.widget.extend.apply(null,[o].concat(u))),this.each((function(){var l=e(this).attr("type"),u="checkbox"!==l&&"radio"!==l?"button":"checkboxradio",f=e.data(this,"ui-"+u);if(f)f.option(o||{}),f._init&&f._init();else{if("button"===u)return void t.call(e(this),o);e(this).checkboxradio(e.extend({icon:!1},o))}}))),f}}(e.fn.button),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.13.2"}}),e.extend(q.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return F(this._defaults,e||{}),this},_attachDatepicker:function(t,o){var l,u,f;u="div"===(l=t.nodeName.toLowerCase())||"span"===l,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(f=this._newInst(e(t),u)).settings=e.extend({},o||{}),"input"===l?this._connectDatepicker(t,f):u&&this._inlineDatepicker(t,f)},_newInst:function(t,o){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:o,dpDiv:o?z(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,o){var l=e(t);o.append=e([]),o.trigger=e([]),l.hasClass(this.markerClassName)||(this._attachments(l,o),l.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(o),e.data(t,"datepicker",o),o.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,o){var l,u,f,p=this._get(o,"appendText"),m=this._get(o,"isRTL");o.append&&o.append.remove(),p&&(o.append=e("<span>").addClass(this._appendClass).text(p),t[m?"before":"after"](o.append)),t.off("focus",this._showDatepicker),o.trigger&&o.trigger.remove(),"focus"!==(l=this._get(o,"showOn"))&&"both"!==l||t.on("focus",this._showDatepicker),"button"!==l&&"both"!==l||(u=this._get(o,"buttonText"),f=this._get(o,"buttonImage"),this._get(o,"buttonImageOnly")?o.trigger=e("<img>").addClass(this._triggerClass).attr({src:f,alt:u,title:u}):(o.trigger=e("<button type='button'>").addClass(this._triggerClass),f?o.trigger.html(e("<img>").attr({src:f,alt:u,title:u})):o.trigger.text(u)),t[m?"before":"after"](o.trigger),o.trigger.on("click",(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,o,l,u,f=new Date(2009,11,20),p=this._get(e,"dateFormat");p.match(/[DM]/)&&(t=function(e){for(o=0,l=0,u=0;u<e.length;u++)e[u].length>o&&(o=e[u].length,l=u);return l},f.setMonth(t(this._get(e,p.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(t(this._get(e,p.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),e.input.attr("size",this._formatDate(e,f).length)}},_inlineDatepicker:function(t,o){var l=e(t);l.hasClass(this.markerClassName)||(l.addClass(this.markerClassName).append(o.dpDiv),e.data(t,"datepicker",o),this._setDate(o,this._getDefaultDate(o),!0),this._updateDatepicker(o),this._updateAlternate(o),o.settings.disabled&&this._disableDatepicker(t),o.dpDiv.css("display","block"))},_dialogDatepicker:function(t,o,l,u,f){var p,m,g,y,v,b=this._dialogInst;return b||(this.uuid+=1,p="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+p+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),e("body").append(this._dialogInput),(b=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],"datepicker",b)),F(b.settings,u||{}),o=o&&o.constructor===Date?this._formatDate(b,o):o,this._dialogInput.val(o),this._pos=f?f.length?f:[f.pageX,f.pageY]:null,this._pos||(m=document.documentElement.clientWidth,g=document.documentElement.clientHeight,y=document.documentElement.scrollLeft||document.body.scrollLeft,v=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[m/2-100+y,g/2-150+v]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),b.settings.onSelect=l,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",b),this},_destroyDatepicker:function(t){var o,l=e(t),u=e.data(t,"datepicker");l.hasClass(this.markerClassName)&&(o=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===o?(u.append.remove(),u.trigger.remove(),l.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==o&&"span"!==o||l.removeClass(this.markerClassName).empty(),H===u&&(H=null,this._curInst=null))},_enableDatepicker:function(t){var o,l,u=e(t),f=e.data(t,"datepicker");u.hasClass(this.markerClassName)&&("input"===(o=t.nodeName.toLowerCase())?(t.disabled=!1,f.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==o&&"span"!==o||((l=u.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),l.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e})))},_disableDatepicker:function(t){var o,l,u=e(t),f=e.data(t,"datepicker");u.hasClass(this.markerClassName)&&("input"===(o=t.nodeName.toLowerCase())?(t.disabled=!0,f.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==o&&"span"!==o||((l=u.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),l.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e})),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,o,l){var u,f,p,m,g=this._getInst(t);if(2===arguments.length&&"string"==typeof o)return"defaults"===o?e.extend({},e.datepicker._defaults):g?"all"===o?e.extend({},g.settings):this._get(g,o):null;u=o||{},"string"==typeof o&&((u={})[o]=l),g&&(this._curInst===g&&this._hideDatepicker(),f=this._getDateDatepicker(t,!0),p=this._getMinMaxDate(g,"min"),m=this._getMinMaxDate(g,"max"),F(g.settings,u),null!==p&&void 0!==u.dateFormat&&void 0===u.minDate&&(g.settings.minDate=this._formatDate(g,p)),null!==m&&void 0!==u.dateFormat&&void 0===u.maxDate&&(g.settings.maxDate=this._formatDate(g,m)),"disabled"in u&&(u.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),g),this._autoSize(g),this._setDate(g,f),this._updateAlternate(g),this._updateDatepicker(g))},_changeDatepicker:function(e,t,o){this._optionDatepicker(e,t,o)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var o=this._getInst(e);o&&(this._setDate(o,t),this._updateDatepicker(o),this._updateAlternate(o))},_getDateDatepicker:function(e,t){var o=this._getInst(e);return o&&!o.inline&&this._setDateFromField(o,t),o?this._getDate(o):null},_doKeyDown:function(t){var o,l,u,f=e.datepicker._getInst(t.target),p=!0,m=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),p=!1;break;case 13:return(u=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",f.dpDiv))[0]&&e.datepicker._selectDay(t.target,f.selectedMonth,f.selectedYear,u[0]),(o=e.datepicker._get(f,"onSelect"))?(l=e.datepicker._formatDate(f),o.apply(f.input?f.input[0]:null,[l,f])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(f,"stepBigMonths"):-e.datepicker._get(f,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(f,"stepBigMonths"):+e.datepicker._get(f,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),p=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),p=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,m?1:-1,"D"),p=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(f,"stepBigMonths"):-e.datepicker._get(f,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),p=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,m?-1:1,"D"),p=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(f,"stepBigMonths"):+e.datepicker._get(f,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),p=t.ctrlKey||t.metaKey;break;default:p=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):p=!1;p&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var o,l,u=e.datepicker._getInst(t.target);if(e.datepicker._get(u,"constrainInput"))return o=e.datepicker._possibleChars(e.datepicker._get(u,"dateFormat")),l=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||l<" "||!o||o.indexOf(l)>-1},_doKeyUp:function(t){var o=e.datepicker._getInst(t.target);if(o.input.val()!==o.lastVal)try{e.datepicker.parseDate(e.datepicker._get(o,"dateFormat"),o.input?o.input.val():null,e.datepicker._getFormatConfig(o))&&(e.datepicker._setDateFromField(o),e.datepicker._updateAlternate(o),e.datepicker._updateDatepicker(o))}catch(e){}return!0},_showDatepicker:function(t){var o,l,u,f,p,m,g;"input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t||(o=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==o&&(e.datepicker._curInst.dpDiv.stop(!0,!0),o&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),!1!==(u=(l=e.datepicker._get(o,"beforeShow"))?l.apply(t,[t,o]):{})&&(F(o.settings,u),o.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(o),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),f=!1,e(t).parents().each((function(){return!(f|="fixed"===e(this).css("position"))})),p={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,o.dpDiv.empty(),o.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(o),p=e.datepicker._checkOffset(o,p,f),o.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":f?"fixed":"absolute",display:"none",left:p.left+"px",top:p.top+"px"}),o.inline||(m=e.datepicker._get(o,"showAnim"),g=e.datepicker._get(o,"duration"),o.dpDiv.css("z-index",G(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[m]?o.dpDiv.show(m,e.datepicker._get(o,"showOptions"),g):o.dpDiv[m||"show"](m?g:null),e.datepicker._shouldFocusInput(o)&&o.input.trigger("focus"),e.datepicker._curInst=o)))},_updateDatepicker:function(t){this.maxRows=4,H=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var o,l=this._getNumberOfMonths(t),u=l[1],f=17,p=t.dpDiv.find("."+this._dayOverClass+" a"),m=e.datepicker._get(t,"onUpdateDatepicker");p.length>0&&U.apply(p.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),u>1&&t.dpDiv.addClass("ui-datepicker-multi-"+u).css("width",f*u+"em"),t.dpDiv[(1!==l[0]||1!==l[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(o=t.yearshtml,setTimeout((function(){o===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year").first().replaceWith(t.yearshtml),o=t.yearshtml=null}),0)),m&&m.apply(t.input?t.input[0]:null,[t])},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,o,l){var u=t.dpDiv.outerWidth(),f=t.dpDiv.outerHeight(),p=t.input?t.input.outerWidth():0,m=t.input?t.input.outerHeight():0,g=document.documentElement.clientWidth+(l?0:e(document).scrollLeft()),y=document.documentElement.clientHeight+(l?0:e(document).scrollTop());return o.left-=this._get(t,"isRTL")?u-p:0,o.left-=l&&o.left===t.input.offset().left?e(document).scrollLeft():0,o.top-=l&&o.top===t.input.offset().top+m?e(document).scrollTop():0,o.left-=Math.min(o.left,o.left+u>g&&g>u?Math.abs(o.left+u-g):0),o.top-=Math.min(o.top,o.top+f>y&&y>f?Math.abs(f+m):0),o},_findPos:function(t){for(var o,l=this._getInst(t),u=this._get(l,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.pseudos.hidden(t));)t=t[u?"previousSibling":"nextSibling"];return[(o=e(t).offset()).left,o.top]},_hideDatepicker:function(t){var o,l,u,f,p=this._curInst;!p||t&&p!==e.data(t,"datepicker")||this._datepickerShowing&&(o=this._get(p,"showAnim"),l=this._get(p,"duration"),u=function(){e.datepicker._tidyDialog(p)},e.effects&&(e.effects.effect[o]||e.effects[o])?p.dpDiv.hide(o,e.datepicker._get(p,"showOptions"),l,u):p.dpDiv["slideDown"===o?"slideUp":"fadeIn"===o?"fadeOut":"hide"](o?l:null,u),o||u(),this._datepickerShowing=!1,(f=this._get(p,"onClose"))&&f.apply(p.input?p.input[0]:null,[p.input?p.input.val():"",p]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var o=e(t.target),l=e.datepicker._getInst(o[0]);(o[0].id===e.datepicker._mainDivId||0!==o.parents("#"+e.datepicker._mainDivId).length||o.hasClass(e.datepicker.markerClassName)||o.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!o.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===l)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,o,l){var u=e(t),f=this._getInst(u[0]);this._isDisabledDatepicker(u[0])||(this._adjustInstDate(f,o,l),this._updateDatepicker(f))},_gotoToday:function(t){var o,l=e(t),u=this._getInst(l[0]);this._get(u,"gotoCurrent")&&u.currentDay?(u.selectedDay=u.currentDay,u.drawMonth=u.selectedMonth=u.currentMonth,u.drawYear=u.selectedYear=u.currentYear):(o=new Date,u.selectedDay=o.getDate(),u.drawMonth=u.selectedMonth=o.getMonth(),u.drawYear=u.selectedYear=o.getFullYear()),this._notifyChange(u),this._adjustDate(l)},_selectMonthYear:function(t,o,l){var u=e(t),f=this._getInst(u[0]);f["selected"+("M"===l?"Month":"Year")]=f["draw"+("M"===l?"Month":"Year")]=parseInt(o.options[o.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(u)},_selectDay:function(t,o,l,u){var f,p=e(t);e(u).hasClass(this._unselectableClass)||this._isDisabledDatepicker(p[0])||((f=this._getInst(p[0])).selectedDay=f.currentDay=parseInt(e("a",u).attr("data-date")),f.selectedMonth=f.currentMonth=o,f.selectedYear=f.currentYear=l,this._selectDate(t,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(t){var o=e(t);this._selectDate(o,"")},_selectDate:function(t,o){var l,u=e(t),f=this._getInst(u[0]);o=null!=o?o:this._formatDate(f),f.input&&f.input.val(o),this._updateAlternate(f),(l=this._get(f,"onSelect"))?l.apply(f.input?f.input[0]:null,[o,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var o,l,u,f=this._get(t,"altField");f&&(o=this._get(t,"altFormat")||this._get(t,"dateFormat"),l=this._getDate(t),u=this.formatDate(o,l,this._getFormatConfig(t)),e(document).find(f).val(u))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,o=new Date(e.getTime());return o.setDate(o.getDate()+4-(o.getDay()||7)),t=o.getTime(),o.setMonth(0),o.setDate(1),Math.floor(Math.round((t-o)/864e5)/7)+1},parseDate:function(t,o,l){if(null==t||null==o)throw"Invalid arguments";if(""===(o="object"==typeof o?o.toString():o+""))return null;var u,f,p,m,g=0,y=(l?l.shortYearCutoff:null)||this._defaults.shortYearCutoff,v="string"!=typeof y?y:(new Date).getFullYear()%100+parseInt(y,10),b=(l?l.dayNamesShort:null)||this._defaults.dayNamesShort,_=(l?l.dayNames:null)||this._defaults.dayNames,w=(l?l.monthNamesShort:null)||this._defaults.monthNamesShort,k=(l?l.monthNames:null)||this._defaults.monthNames,x=-1,S=-1,T=-1,C=-1,A=!1,P=function(e){var o=u+1<t.length&&t.charAt(u+1)===e;return o&&u++,o},E=function(e){var t=P(e),l="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,u=new RegExp("^\\d{"+("y"===e?l:1)+","+l+"}"),f=o.substring(g).match(u);if(!f)throw"Missing number at position "+g;return g+=f[0].length,parseInt(f[0],10)},D=function(t,l,u){var f=-1,p=e.map(P(t)?u:l,(function(e,t){return[[t,e]]})).sort((function(e,t){return-(e[1].length-t[1].length)}));if(e.each(p,(function(e,t){var l=t[1];if(o.substr(g,l.length).toLowerCase()===l.toLowerCase())return f=t[0],g+=l.length,!1})),-1!==f)return f+1;throw"Unknown name at position "+g},O=function(){if(o.charAt(g)!==t.charAt(u))throw"Unexpected literal at position "+g;g++};for(u=0;u<t.length;u++)if(A)"'"!==t.charAt(u)||P("'")?O():A=!1;else switch(t.charAt(u)){case"d":T=E("d");break;case"D":D("D",b,_);break;case"o":C=E("o");break;case"m":S=E("m");break;case"M":S=D("M",w,k);break;case"y":x=E("y");break;case"@":x=(m=new Date(E("@"))).getFullYear(),S=m.getMonth()+1,T=m.getDate();break;case"!":x=(m=new Date((E("!")-this._ticksTo1970)/1e4)).getFullYear(),S=m.getMonth()+1,T=m.getDate();break;case"'":P("'")?O():A=!0;break;default:O()}if(g<o.length&&(p=o.substr(g),!/^\s+/.test(p)))throw"Extra/unparsed characters found in date: "+p;if(-1===x?x=(new Date).getFullYear():x<100&&(x+=(new Date).getFullYear()-(new Date).getFullYear()%100+(x<=v?0:-100)),C>-1)for(S=1,T=C;!(T<=(f=this._getDaysInMonth(x,S-1)));)S++,T-=f;if((m=this._daylightSavingAdjust(new Date(x,S-1,T))).getFullYear()!==x||m.getMonth()+1!==S||m.getDate()!==T)throw"Invalid date";return m},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,o){if(!t)return"";var l,u=(o?o.dayNamesShort:null)||this._defaults.dayNamesShort,f=(o?o.dayNames:null)||this._defaults.dayNames,p=(o?o.monthNamesShort:null)||this._defaults.monthNamesShort,m=(o?o.monthNames:null)||this._defaults.monthNames,g=function(t){var o=l+1<e.length&&e.charAt(l+1)===t;return o&&l++,o},y=function(e,t,o){var l=""+t;if(g(e))for(;l.length<o;)l="0"+l;return l},v=function(e,t,o,l){return g(e)?l[t]:o[t]},b="",_=!1;if(t)for(l=0;l<e.length;l++)if(_)"'"!==e.charAt(l)||g("'")?b+=e.charAt(l):_=!1;else switch(e.charAt(l)){case"d":b+=y("d",t.getDate(),2);break;case"D":b+=v("D",t.getDay(),u,f);break;case"o":b+=y("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":b+=y("m",t.getMonth()+1,2);break;case"M":b+=v("M",t.getMonth(),p,m);break;case"y":b+=g("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":b+=t.getTime();break;case"!":b+=1e4*t.getTime()+this._ticksTo1970;break;case"'":g("'")?b+="'":_=!0;break;default:b+=e.charAt(l)}return b},_possibleChars:function(e){var t,o="",l=!1,u=function(o){var l=t+1<e.length&&e.charAt(t+1)===o;return l&&t++,l};for(t=0;t<e.length;t++)if(l)"'"!==e.charAt(t)||u("'")?o+=e.charAt(t):l=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":o+="0123456789";break;case"D":case"M":return null;case"'":u("'")?o+="'":l=!0;break;default:o+=e.charAt(t)}return o},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var o=this._get(e,"dateFormat"),l=e.lastVal=e.input?e.input.val():null,u=this._getDefaultDate(e),f=u,p=this._getFormatConfig(e);try{f=this.parseDate(o,l,p)||u}catch(e){l=t?"":l}e.selectedDay=f.getDate(),e.drawMonth=e.selectedMonth=f.getMonth(),e.drawYear=e.selectedYear=f.getFullYear(),e.currentDay=l?f.getDate():0,e.currentMonth=l?f.getMonth():0,e.currentYear=l?f.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,o,l){var u=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},f=function(o){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),o,e.datepicker._getFormatConfig(t))}catch(e){}for(var l=(o.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,u=l.getFullYear(),f=l.getMonth(),p=l.getDate(),m=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,g=m.exec(o);g;){switch(g[2]||"d"){case"d":case"D":p+=parseInt(g[1],10);break;case"w":case"W":p+=7*parseInt(g[1],10);break;case"m":case"M":f+=parseInt(g[1],10),p=Math.min(p,e.datepicker._getDaysInMonth(u,f));break;case"y":case"Y":u+=parseInt(g[1],10),p=Math.min(p,e.datepicker._getDaysInMonth(u,f))}g=m.exec(o)}return new Date(u,f,p)},p=null==o||""===o?l:"string"==typeof o?f(o):"number"==typeof o?isNaN(o)?l:u(o):new Date(o.getTime());return(p=p&&"Invalid Date"===p.toString()?l:p)&&(p.setHours(0),p.setMinutes(0),p.setSeconds(0),p.setMilliseconds(0)),this._daylightSavingAdjust(p)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,o){var l=!t,u=e.selectedMonth,f=e.selectedYear,p=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=p.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=p.getMonth(),e.drawYear=e.selectedYear=e.currentYear=p.getFullYear(),u===e.selectedMonth&&f===e.selectedYear||o||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(l?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var o=this._get(t,"stepMonths"),l="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map((function(){var t={prev:function(){e.datepicker._adjustDate(l,-o,"M")},next:function(){e.datepicker._adjustDate(l,+o,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(l)},selectDay:function(){return e.datepicker._selectDay(l,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(l,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(l,this,"Y"),!1}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])}))},_generateHTML:function(t){var o,l,u,f,p,m,g,y,v,b,_,w,k,x,S,T,C,A,P,E,D,O,j,I,N,M,L,R,B,H,W,G,q,z,U,F,K,Y,$,V=new Date,X=this._daylightSavingAdjust(new Date(V.getFullYear(),V.getMonth(),V.getDate())),Q=this._get(t,"isRTL"),Z=this._get(t,"showButtonPanel"),J=this._get(t,"hideIfNoPrevNext"),ee=this._get(t,"navigationAsDateFormat"),te=this._getNumberOfMonths(t),ie=this._get(t,"showCurrentAtPos"),ne=this._get(t,"stepMonths"),re=1!==te[0]||1!==te[1],oe=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),se=this._getMinMaxDate(t,"min"),ae=this._getMinMaxDate(t,"max"),le=t.drawMonth-ie,ue=t.drawYear;if(le<0&&(le+=12,ue--),ae)for(o=this._daylightSavingAdjust(new Date(ae.getFullYear(),ae.getMonth()-te[0]*te[1]+1,ae.getDate())),o=se&&o<se?se:o;this._daylightSavingAdjust(new Date(ue,le,1))>o;)--le<0&&(le=11,ue--);for(t.drawMonth=le,t.drawYear=ue,l=this._get(t,"prevText"),l=ee?this.formatDate(l,this._daylightSavingAdjust(new Date(ue,le-ne,1)),this._getFormatConfig(t)):l,u=this._canAdjustMonth(t,-1,ue,le)?e("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:l}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")).text(l))[0].outerHTML:J?"":e("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:l}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")).text(l))[0].outerHTML,f=this._get(t,"nextText"),f=ee?this.formatDate(f,this._daylightSavingAdjust(new Date(ue,le+ne,1)),this._getFormatConfig(t)):f,p=this._canAdjustMonth(t,1,ue,le)?e("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:f}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")).text(f))[0].outerHTML:J?"":e("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:f}).append(e("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")).text(f))[0].outerHTML,m=this._get(t,"currentText"),g=this._get(t,"gotoCurrent")&&t.currentDay?oe:X,m=ee?this.formatDate(m,g,this._getFormatConfig(t)):m,y="",t.inline||(y=e("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(t,"closeText"))[0].outerHTML),v="",Z&&(v=e("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(Q?y:"").append(this._isInRange(t,g)?e("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(m):"").append(Q?"":y)[0].outerHTML),b=parseInt(this._get(t,"firstDay"),10),b=isNaN(b)?0:b,_=this._get(t,"showWeek"),w=this._get(t,"dayNames"),k=this._get(t,"dayNamesMin"),x=this._get(t,"monthNames"),S=this._get(t,"monthNamesShort"),T=this._get(t,"beforeShowDay"),C=this._get(t,"showOtherMonths"),A=this._get(t,"selectOtherMonths"),P=this._getDefaultDate(t),E="",O=0;O<te[0];O++){for(j="",this.maxRows=4,I=0;I<te[1];I++){if(N=this._daylightSavingAdjust(new Date(ue,le,t.selectedDay)),M=" ui-corner-all",L="",re){if(L+="<div class='ui-datepicker-group",te[1]>1)switch(I){case 0:L+=" ui-datepicker-group-first",M=" ui-corner-"+(Q?"right":"left");break;case te[1]-1:L+=" ui-datepicker-group-last",M=" ui-corner-"+(Q?"left":"right");break;default:L+=" ui-datepicker-group-middle",M=""}L+="'>"}for(L+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+M+"'>"+(/all|left/.test(M)&&0===O?Q?p:u:"")+(/all|right/.test(M)&&0===O?Q?u:p:"")+this._generateMonthYearHeader(t,le,ue,se,ae,O>0||I>0,x,S)+"</div><table class='ui-datepicker-calendar'><thead><tr>",R=_?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",D=0;D<7;D++)R+="<th scope='col'"+((D+b+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+w[B=(D+b)%7]+"'>"+k[B]+"</span></th>";for(L+=R+"</tr></thead><tbody>",H=this._getDaysInMonth(ue,le),ue===t.selectedYear&&le===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,H)),W=(this._getFirstDayOfMonth(ue,le)-b+7)%7,G=Math.ceil((W+H)/7),q=re&&this.maxRows>G?this.maxRows:G,this.maxRows=q,z=this._daylightSavingAdjust(new Date(ue,le,1-W)),U=0;U<q;U++){for(L+="<tr>",F=_?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(z)+"</td>":"",D=0;D<7;D++)K=T?T.apply(t.input?t.input[0]:null,[z]):[!0,""],$=(Y=z.getMonth()!==le)&&!A||!K[0]||se&&z<se||ae&&z>ae,F+="<td class='"+((D+b+6)%7>=5?" ui-datepicker-week-end":"")+(Y?" ui-datepicker-other-month":"")+(z.getTime()===N.getTime()&&le===t.selectedMonth&&t._keyEvent||P.getTime()===z.getTime()&&P.getTime()===N.getTime()?" "+this._dayOverClass:"")+($?" "+this._unselectableClass+" ui-state-disabled":"")+(Y&&!C?"":" "+K[1]+(z.getTime()===oe.getTime()?" "+this._currentClass:"")+(z.getTime()===X.getTime()?" ui-datepicker-today":""))+"'"+(Y&&!C||!K[2]?"":" title='"+K[2].replace(/'/g,"&#39;")+"'")+($?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+(Y&&!C?"&#xa0;":$?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===X.getTime()?" ui-state-highlight":"")+(z.getTime()===oe.getTime()?" ui-state-active":"")+(Y?" ui-priority-secondary":"")+"' href='#' aria-current='"+(z.getTime()===oe.getTime()?"true":"false")+"' data-date='"+z.getDate()+"'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);L+=F+"</tr>"}++le>11&&(le=0,ue++),j+=L+="</tbody></table>"+(re?"</div>"+(te[0]>0&&I===te[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}E+=j}return E+=v,t._keyEvent=!1,E},_generateMonthYearHeader:function(e,t,o,l,u,f,p,m){var g,y,v,b,_,w,k,x,S=this._get(e,"changeMonth"),T=this._get(e,"changeYear"),C=this._get(e,"showMonthAfterYear"),A=this._get(e,"selectMonthLabel"),P=this._get(e,"selectYearLabel"),E="<div class='ui-datepicker-title'>",D="";if(f||!S)D+="<span class='ui-datepicker-month'>"+p[t]+"</span>";else{for(g=l&&l.getFullYear()===o,y=u&&u.getFullYear()===o,D+="<select class='ui-datepicker-month' aria-label='"+A+"' data-handler='selectMonth' data-event='change'>",v=0;v<12;v++)(!g||v>=l.getMonth())&&(!y||v<=u.getMonth())&&(D+="<option value='"+v+"'"+(v===t?" selected='selected'":"")+">"+m[v]+"</option>");D+="</select>"}if(C||(E+=D+(!f&&S&&T?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",f||!T)E+="<span class='ui-datepicker-year'>"+o+"</span>";else{for(b=this._get(e,"yearRange").split(":"),_=(new Date).getFullYear(),w=function(e){var t=e.match(/c[+\-].*/)?o+parseInt(e.substring(1),10):e.match(/[+\-].*/)?_+parseInt(e,10):parseInt(e,10);return isNaN(t)?_:t},k=w(b[0]),x=Math.max(k,w(b[1]||"")),k=l?Math.max(k,l.getFullYear()):k,x=u?Math.min(x,u.getFullYear()):x,e.yearshtml+="<select class='ui-datepicker-year' aria-label='"+P+"' data-handler='selectYear' data-event='change'>";k<=x;k++)e.yearshtml+="<option value='"+k+"'"+(k===o?" selected='selected'":"")+">"+k+"</option>";e.yearshtml+="</select>",E+=e.yearshtml,e.yearshtml=null}return E+=this._get(e,"yearSuffix"),C&&(E+=(!f&&S&&T?"":"&#xa0;")+D),E+="</div>"},_adjustInstDate:function(e,t,o){var l=e.selectedYear+("Y"===o?t:0),u=e.selectedMonth+("M"===o?t:0),f=Math.min(e.selectedDay,this._getDaysInMonth(l,u))+("D"===o?t:0),p=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(l,u,f)));e.selectedDay=p.getDate(),e.drawMonth=e.selectedMonth=p.getMonth(),e.drawYear=e.selectedYear=p.getFullYear(),"M"!==o&&"Y"!==o||this._notifyChange(e)},_restrictMinMax:function(e,t){var o=this._getMinMaxDate(e,"min"),l=this._getMinMaxDate(e,"max"),u=o&&t<o?o:t;return l&&u>l?l:u},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,o,l){var u=this._getNumberOfMonths(e),f=this._daylightSavingAdjust(new Date(o,l+(t<0?t:u[0]*u[1]),1));return t<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(e,f)},_isInRange:function(e,t){var o,l,u=this._getMinMaxDate(e,"min"),f=this._getMinMaxDate(e,"max"),p=null,m=null,g=this._get(e,"yearRange");return g&&(o=g.split(":"),l=(new Date).getFullYear(),p=parseInt(o[0],10),m=parseInt(o[1],10),o[0].match(/[+\-].*/)&&(p+=l),o[1].match(/[+\-].*/)&&(m+=l)),(!u||t.getTime()>=u.getTime())&&(!f||t.getTime()<=f.getTime())&&(!p||t.getFullYear()>=p)&&(!m||t.getFullYear()<=m)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,o,l){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var u=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(l,o,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),u,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).on("mousedown",e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var o=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(o)):this.each((function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(o)):e.datepicker._attachDatepicker(this,t)})):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(o))},e.datepicker=new q,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.13.2",e.datepicker,e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var K,Y=!1;function $(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e(document).on("mouseup",(function(){Y=!1})),e.widget("ui.mouse",{version:"1.13.2",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).on("click."+this.widgetName,(function(o){if(!0===e.data(o.target,t.widgetName+".preventClickEvent"))return e.removeData(o.target,t.widgetName+".preventClickEvent"),o.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!Y){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var o=this,l=1===t.which,u=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(l&&!u&&this._mouseCapture(t)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){o.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return o._mouseMove(e)},this._mouseUpDelegate=function(e){return o._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),Y=!0,0)))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,Y=!1,t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.ui.plugin={add:function(t,o,l){var u,f=e.ui[t].prototype;for(u in l)f.plugins[u]=f.plugins[u]||[],f.plugins[u].push([o,l[u]])},call:function(e,t,o,l){var u,f=e.plugins[t];if(f&&(l||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(u=0;u<f.length;u++)e.options[f[u][0]]&&f[u][1].apply(e.element,o)}},e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")},e.widget("ui.draggable",e.ui.mouse,{version:"1.13.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var o=this.options;return!(this.helper||o.disabled||e(t.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(t),!this.handle||(this._blurActiveElement(t),this._blockFrames(!0===o.iframeFix?"iframe":o.iframeFix),0)))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map((function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var o=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(o).length||e.ui.safeBlur(o)},_mouseStart:function(t){var o=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===e(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,o){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!o){var l=this._uiHash();if(!1===this._trigger("drag",t,l))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=l.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var o=this,l=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(l=e.ui.ddmanager.drop(this,t)),this.dropped&&(l=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!l||"valid"===this.options.revert&&l||!0===this.options.revert||"function"==typeof this.options.revert&&this.options.revert.call(this.element,l)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==o._trigger("stop",t)&&o._clear()})):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var o=this.options,l="function"==typeof o.helper,u=l?e(o.helper.apply(this.element[0],[t])):"clone"===o.helper?this.element.clone().removeAttr("id"):this.element;return u.parents("body").length||u.appendTo("parent"===o.appendTo?this.element[0].parentNode:o.appendTo),l&&u[0]===this.element[0]&&this._setPositionRelative(),u[0]===this.element[0]||/(fixed|absolute)/.test(u.css("position"))||u.css("position","absolute"),u},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),Array.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),o=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==o&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,o,l,u=this.options,f=this.document[0];this.relativeContainer=null,u.containment?"window"!==u.containment?"document"!==u.containment?u.containment.constructor!==Array?("parent"===u.containment&&(u.containment=this.helper[0].parentNode),(l=(o=e(u.containment))[0])&&(t=/(scroll|auto)/.test(o.css("overflow")),this.containment=[(parseInt(o.css("borderLeftWidth"),10)||0)+(parseInt(o.css("paddingLeft"),10)||0),(parseInt(o.css("borderTopWidth"),10)||0)+(parseInt(o.css("paddingTop"),10)||0),(t?Math.max(l.scrollWidth,l.offsetWidth):l.offsetWidth)-(parseInt(o.css("borderRightWidth"),10)||0)-(parseInt(o.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(l.scrollHeight,l.offsetHeight):l.offsetHeight)-(parseInt(o.css("borderBottomWidth"),10)||0)-(parseInt(o.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=o)):this.containment=u.containment:this.containment=[0,0,e(f).width()-this.helperProportions.width-this.margins.left,(e(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var o="absolute"===e?1:-1,l=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*o+this.offset.parent.top*o-("fixed"===this.cssPosition?-this.offset.scroll.top:l?0:this.offset.scroll.top)*o,left:t.left+this.offset.relative.left*o+this.offset.parent.left*o-("fixed"===this.cssPosition?-this.offset.scroll.left:l?0:this.offset.scroll.left)*o}},_generatePosition:function(e,t){var o,l,u,f,p=this.options,m=this._isRootNode(this.scrollParent[0]),g=e.pageX,y=e.pageY;return m&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(l=this.relativeContainer.offset(),o=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]):o=this.containment,e.pageX-this.offset.click.left<o[0]&&(g=o[0]+this.offset.click.left),e.pageY-this.offset.click.top<o[1]&&(y=o[1]+this.offset.click.top),e.pageX-this.offset.click.left>o[2]&&(g=o[2]+this.offset.click.left),e.pageY-this.offset.click.top>o[3]&&(y=o[3]+this.offset.click.top)),p.grid&&(u=p.grid[1]?this.originalPageY+Math.round((y-this.originalPageY)/p.grid[1])*p.grid[1]:this.originalPageY,y=o?u-this.offset.click.top>=o[1]||u-this.offset.click.top>o[3]?u:u-this.offset.click.top>=o[1]?u-p.grid[1]:u+p.grid[1]:u,f=p.grid[0]?this.originalPageX+Math.round((g-this.originalPageX)/p.grid[0])*p.grid[0]:this.originalPageX,g=o?f-this.offset.click.left>=o[0]||f-this.offset.click.left>o[2]?f:f-this.offset.click.left>=o[0]?f-p.grid[0]:f+p.grid[0]:f),"y"===p.axis&&(g=this.originalPageX),"x"===p.axis&&(y=this.originalPageY)),{top:y-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:m?0:this.offset.scroll.top),left:g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:m?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,o,l){return l=l||this._uiHash(),e.ui.plugin.call(this,t,[o,l,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),l.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,o,l)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,o,l){var u=e.extend({},o,{item:l.element});l.sortables=[],e(l.options.connectToSortable).each((function(){var o=e(this).sortable("instance");o&&!o.options.disabled&&(l.sortables.push(o),o.refreshPositions(),o._trigger("activate",t,u))}))},stop:function(t,o,l){var u=e.extend({},o,{item:l.element});l.cancelHelperRemoval=!1,e.each(l.sortables,(function(){var e=this;e.isOver?(e.isOver=0,l.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,u))}))},drag:function(t,o,l){e.each(l.sortables,(function(){var u=!1,f=this;f.positionAbs=l.positionAbs,f.helperProportions=l.helperProportions,f.offset.click=l.offset.click,f._intersectsWith(f.containerCache)&&(u=!0,e.each(l.sortables,(function(){return this.positionAbs=l.positionAbs,this.helperProportions=l.helperProportions,this.offset.click=l.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&e.contains(f.element[0],this.element[0])&&(u=!1),u}))),u?(f.isOver||(f.isOver=1,l._parent=o.helper.parent(),f.currentItem=o.helper.appendTo(f.element).data("ui-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return o.helper[0]},t.target=f.currentItem[0],f._mouseCapture(t,!0),f._mouseStart(t,!0,!0),f.offset.click.top=l.offset.click.top,f.offset.click.left=l.offset.click.left,f.offset.parent.left-=l.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=l.offset.parent.top-f.offset.parent.top,l._trigger("toSortable",t),l.dropped=f.element,e.each(l.sortables,(function(){this.refreshPositions()})),l.currentItem=l.element,f.fromOutside=l),f.currentItem&&(f._mouseDrag(t),o.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,f.options.revert=!1,f._trigger("out",t,f._uiHash(f)),f._mouseStop(t,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),o.helper.appendTo(l._parent),l._refreshOffsets(t),o.position=l._generatePosition(t,!0),l._trigger("fromSortable",t),l.dropped=!1,e.each(l.sortables,(function(){this.refreshPositions()})))}))}}),e.ui.plugin.add("draggable","cursor",{start:function(t,o,l){var u=e("body"),f=l.options;u.css("cursor")&&(f._cursor=u.css("cursor")),u.css("cursor",f.cursor)},stop:function(t,o,l){var u=l.options;u._cursor&&e("body").css("cursor",u._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,o,l){var u=e(o.helper),f=l.options;u.css("opacity")&&(f._opacity=u.css("opacity")),u.css("opacity",f.opacity)},stop:function(t,o,l){var u=l.options;u._opacity&&e(o.helper).css("opacity",u._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,o){o.scrollParentNotHidden||(o.scrollParentNotHidden=o.helper.scrollParent(!1)),o.scrollParentNotHidden[0]!==o.document[0]&&"HTML"!==o.scrollParentNotHidden[0].tagName&&(o.overflowOffset=o.scrollParentNotHidden.offset())},drag:function(t,o,l){var u=l.options,f=!1,p=l.scrollParentNotHidden[0],m=l.document[0];p!==m&&"HTML"!==p.tagName?(u.axis&&"x"===u.axis||(l.overflowOffset.top+p.offsetHeight-t.pageY<u.scrollSensitivity?p.scrollTop=f=p.scrollTop+u.scrollSpeed:t.pageY-l.overflowOffset.top<u.scrollSensitivity&&(p.scrollTop=f=p.scrollTop-u.scrollSpeed)),u.axis&&"y"===u.axis||(l.overflowOffset.left+p.offsetWidth-t.pageX<u.scrollSensitivity?p.scrollLeft=f=p.scrollLeft+u.scrollSpeed:t.pageX-l.overflowOffset.left<u.scrollSensitivity&&(p.scrollLeft=f=p.scrollLeft-u.scrollSpeed))):(u.axis&&"x"===u.axis||(t.pageY-e(m).scrollTop()<u.scrollSensitivity?f=e(m).scrollTop(e(m).scrollTop()-u.scrollSpeed):e(window).height()-(t.pageY-e(m).scrollTop())<u.scrollSensitivity&&(f=e(m).scrollTop(e(m).scrollTop()+u.scrollSpeed))),u.axis&&"y"===u.axis||(t.pageX-e(m).scrollLeft()<u.scrollSensitivity?f=e(m).scrollLeft(e(m).scrollLeft()-u.scrollSpeed):e(window).width()-(t.pageX-e(m).scrollLeft())<u.scrollSensitivity&&(f=e(m).scrollLeft(e(m).scrollLeft()+u.scrollSpeed)))),!1!==f&&e.ui.ddmanager&&!u.dropBehaviour&&e.ui.ddmanager.prepareOffsets(l,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,o,l){var u=l.options;l.snapElements=[],e(u.snap.constructor!==String?u.snap.items||":data(ui-draggable)":u.snap).each((function(){var t=e(this),o=t.offset();this!==l.element[0]&&l.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:o.top,left:o.left})}))},drag:function(t,o,l){var u,f,p,m,g,y,v,b,_,w,k=l.options,x=k.snapTolerance,S=o.offset.left,T=S+l.helperProportions.width,C=o.offset.top,A=C+l.helperProportions.height;for(_=l.snapElements.length-1;_>=0;_--)y=(g=l.snapElements[_].left-l.margins.left)+l.snapElements[_].width,b=(v=l.snapElements[_].top-l.margins.top)+l.snapElements[_].height,T<g-x||S>y+x||A<v-x||C>b+x||!e.contains(l.snapElements[_].item.ownerDocument,l.snapElements[_].item)?(l.snapElements[_].snapping&&l.options.snap.release&&l.options.snap.release.call(l.element,t,e.extend(l._uiHash(),{snapItem:l.snapElements[_].item})),l.snapElements[_].snapping=!1):("inner"!==k.snapMode&&(u=Math.abs(v-A)<=x,f=Math.abs(b-C)<=x,p=Math.abs(g-T)<=x,m=Math.abs(y-S)<=x,u&&(o.position.top=l._convertPositionTo("relative",{top:v-l.helperProportions.height,left:0}).top),f&&(o.position.top=l._convertPositionTo("relative",{top:b,left:0}).top),p&&(o.position.left=l._convertPositionTo("relative",{top:0,left:g-l.helperProportions.width}).left),m&&(o.position.left=l._convertPositionTo("relative",{top:0,left:y}).left)),w=u||f||p||m,"outer"!==k.snapMode&&(u=Math.abs(v-C)<=x,f=Math.abs(b-A)<=x,p=Math.abs(g-S)<=x,m=Math.abs(y-T)<=x,u&&(o.position.top=l._convertPositionTo("relative",{top:v,left:0}).top),f&&(o.position.top=l._convertPositionTo("relative",{top:b-l.helperProportions.height,left:0}).top),p&&(o.position.left=l._convertPositionTo("relative",{top:0,left:g}).left),m&&(o.position.left=l._convertPositionTo("relative",{top:0,left:y-l.helperProportions.width}).left)),!l.snapElements[_].snapping&&(u||f||p||m||w)&&l.options.snap.snap&&l.options.snap.snap.call(l.element,t,e.extend(l._uiHash(),{snapItem:l.snapElements[_].item})),l.snapElements[_].snapping=u||f||p||m||w)}}),e.ui.plugin.add("draggable","stack",{start:function(t,o,l){var u,f=l.options,p=e.makeArray(e(f.stack)).sort((function(t,o){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(o).css("zIndex"),10)||0)}));p.length&&(u=parseInt(e(p[0]).css("zIndex"),10)||0,e(p).each((function(t){e(this).css("zIndex",u+t)})),this.css("zIndex",u+p.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,o,l){var u=e(o.helper),f=l.options;u.css("zIndex")&&(f._zIndex=u.css("zIndex")),u.css("zIndex",f.zIndex)},stop:function(t,o,l){var u=l.options;u._zIndex&&e(o.helper).css("zIndex",u._zIndex)}}),e.ui.draggable,e.widget("ui.resizable",e.ui.mouse,{version:"1.13.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,o){if("hidden"===e(t).css("overflow"))return!1;var l=o&&"left"===o?"scrollLeft":"scrollTop",u=!1;if(t[l]>0)return!0;try{t[l]=1,u=t[l]>0,t[l]=0}catch(e){}return u},_create:function(){var t,o=this.options,l=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),o.autoHide&&e(this.element).on("mouseenter",(function(){o.disabled||(l._removeClass("ui-resizable-autohide"),l._handles.show())})).on("mouseleave",(function(){o.disabled||l.resizing||(l._addClass("ui-resizable-autohide"),l._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy(),this._addedHandles.remove();var t,o=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable")};return this.elementIsWrapper&&(o(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),o(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!t}},_setupHandles:function(){var t,o,l,u,f,p=this.options,m=this;if(this.handles=p.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this._addedHandles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),l=this.handles.split(","),this.handles={},o=0;o<l.length;o++)u="ui-resizable-"+(t=String.prototype.trim.call(l[o])),f=e("<div>"),this._addClass(f,"ui-resizable-handle "+u),f.css({zIndex:p.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.children(this.handles[t]).length||(this.element.append(f),this._addedHandles=this._addedHandles.add(f));this._renderAxis=function(t){var o,l,u,f;for(o in t=t||this.element,this.handles)this.handles[o].constructor===String?this.handles[o]=this.element.children(this.handles[o]).first().show():(this.handles[o].jquery||this.handles[o].nodeType)&&(this.handles[o]=e(this.handles[o]),this._on(this.handles[o],{mousedown:m._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(l=e(this.handles[o],this.element),f=/sw|ne|nw|se|n|s/.test(o)?l.outerHeight():l.outerWidth(),u=["padding",/ne|nw|n/.test(o)?"Top":/se|sw|s/.test(o)?"Bottom":/^e$/.test(o)?"Right":"Left"].join(""),t.css(u,f),this._proportionallyResize()),this._handles=this._handles.add(this.handles[o])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){m.resizing||(this.className&&(f=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),m.axis=f&&f[1]?f[1]:"se")})),p.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(t){var o,l,u=!1;for(o in this.handles)((l=e(this.handles[o])[0])===t.target||e.contains(l,t.target))&&(u=!0);return!this.options.disabled&&u},_mouseStart:function(t){var o,l,u,f=this.options,p=this.element;return this.resizing=!0,this._renderProxy(),o=this._num(this.helper.css("left")),l=this._num(this.helper.css("top")),f.containment&&(o+=e(f.containment).scrollLeft()||0,l+=e(f.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:l},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:p.width(),height:p.height()},this.originalSize=this._helper?{width:p.outerWidth(),height:p.outerHeight()}:{width:p.width(),height:p.height()},this.sizeDiff={width:p.outerWidth()-p.width(),height:p.outerHeight()-p.height()},this.originalPosition={left:o,top:l},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof f.aspectRatio?f.aspectRatio:this.originalSize.width/this.originalSize.height||1,u=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===u?this.axis+"-resize":u),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var o,l,u=this.originalMousePosition,f=this.axis,p=t.pageX-u.left||0,m=t.pageY-u.top||0,g=this._change[f];return this._updatePrevProperties(),!!g&&(o=g.apply(this,[t,p,m]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(o=this._updateRatio(o,t)),o=this._respectSize(o,t),this._updateCache(o),this._propagate("resize",t),l=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(l)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var o,l,u,f,p,m,g,y=this.options,v=this;return this._helper&&(u=(l=(o=this._proportionallyResizeElements).length&&/textarea/i.test(o[0].nodeName))&&this._hasScroll(o[0],"left")?0:v.sizeDiff.height,f=l?0:v.sizeDiff.width,p={width:v.helper.width()-f,height:v.helper.height()-u},m=parseFloat(v.element.css("left"))+(v.position.left-v.originalPosition.left)||null,g=parseFloat(v.element.css("top"))+(v.position.top-v.originalPosition.top)||null,y.animate||this.element.css(e.extend(p,{top:g,left:m})),v.helper.height(v.size.height),v.helper.width(v.size.width),this._helper&&!y.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,o,l,u,f,p=this.options;f={minWidth:this._isNumber(p.minWidth)?p.minWidth:0,maxWidth:this._isNumber(p.maxWidth)?p.maxWidth:1/0,minHeight:this._isNumber(p.minHeight)?p.minHeight:0,maxHeight:this._isNumber(p.maxHeight)?p.maxHeight:1/0},(this._aspectRatio||e)&&(t=f.minHeight*this.aspectRatio,l=f.minWidth/this.aspectRatio,o=f.maxHeight*this.aspectRatio,u=f.maxWidth/this.aspectRatio,t>f.minWidth&&(f.minWidth=t),l>f.minHeight&&(f.minHeight=l),o<f.maxWidth&&(f.maxWidth=o),u<f.maxHeight&&(f.maxHeight=u)),this._vBoundaries=f},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,o=this.size,l=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===l&&(e.left=t.left+(o.width-e.width),e.top=null),"nw"===l&&(e.top=t.top+(o.height-e.height),e.left=t.left+(o.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,o=this.axis,l=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,u=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,f=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,p=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,m=this.originalPosition.left+this.originalSize.width,g=this.originalPosition.top+this.originalSize.height,y=/sw|nw|w/.test(o),v=/nw|ne|n/.test(o);return f&&(e.width=t.minWidth),p&&(e.height=t.minHeight),l&&(e.width=t.maxWidth),u&&(e.height=t.maxHeight),f&&y&&(e.left=m-t.minWidth),l&&y&&(e.left=m-t.maxWidth),p&&v&&(e.top=g-t.minHeight),u&&v&&(e.top=g-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,o=[],l=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],u=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)o[t]=parseFloat(l[t])||0,o[t]+=parseFloat(u[t])||0;return{height:o[0]+o[2],width:o[1]+o[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,o=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:o.height()-this.outerDimensions.height||0,width:o.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,o=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div></div>").css({overflow:"hidden"}),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var o=this.originalSize;return{left:this.originalPosition.left+t,width:o.width-t}},n:function(e,t,o){var l=this.originalSize;return{top:this.originalPosition.top+o,height:l.height-o}},s:function(e,t,o){return{height:this.originalSize.height+o}},se:function(t,o,l){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,o,l]))},sw:function(t,o,l){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,o,l]))},ne:function(t,o,l){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,o,l]))},nw:function(t,o,l){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,o,l]))}},_propagate:function(t,o){e.ui.plugin.call(this,t,[o,this.ui()]),"resize"!==t&&this._trigger(t,o,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var o=e(this).resizable("instance"),l=o.options,u=o._proportionallyResizeElements,f=u.length&&/textarea/i.test(u[0].nodeName),p=f&&o._hasScroll(u[0],"left")?0:o.sizeDiff.height,m=f?0:o.sizeDiff.width,g={width:o.size.width-m,height:o.size.height-p},y=parseFloat(o.element.css("left"))+(o.position.left-o.originalPosition.left)||null,v=parseFloat(o.element.css("top"))+(o.position.top-o.originalPosition.top)||null;o.element.animate(e.extend(g,v&&y?{top:v,left:y}:{}),{duration:l.animateDuration,easing:l.animateEasing,step:function(){var l={width:parseFloat(o.element.css("width")),height:parseFloat(o.element.css("height")),top:parseFloat(o.element.css("top")),left:parseFloat(o.element.css("left"))};u&&u.length&&e(u[0]).css({width:l.width,height:l.height}),o._updateCache(l),o._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,o,l,u,f,p,m,g=e(this).resizable("instance"),y=g.options,v=g.element,b=y.containment,_=b instanceof e?b.get(0):/parent/.test(b)?v.parent().get(0):b;_&&(g.containerElement=e(_),/document/.test(b)||b===document?(g.containerOffset={left:0,top:0},g.containerPosition={left:0,top:0},g.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(_),o=[],e(["Top","Right","Left","Bottom"]).each((function(e,l){o[e]=g._num(t.css("padding"+l))})),g.containerOffset=t.offset(),g.containerPosition=t.position(),g.containerSize={height:t.innerHeight()-o[3],width:t.innerWidth()-o[1]},l=g.containerOffset,u=g.containerSize.height,f=g.containerSize.width,p=g._hasScroll(_,"left")?_.scrollWidth:f,m=g._hasScroll(_)?_.scrollHeight:u,g.parentData={element:_,left:l.left,top:l.top,width:p,height:m}))},resize:function(t){var o,l,u,f,p=e(this).resizable("instance"),m=p.options,g=p.containerOffset,y=p.position,v=p._aspectRatio||t.shiftKey,b={top:0,left:0},_=p.containerElement,w=!0;_[0]!==document&&/static/.test(_.css("position"))&&(b=g),y.left<(p._helper?g.left:0)&&(p.size.width=p.size.width+(p._helper?p.position.left-g.left:p.position.left-b.left),v&&(p.size.height=p.size.width/p.aspectRatio,w=!1),p.position.left=m.helper?g.left:0),y.top<(p._helper?g.top:0)&&(p.size.height=p.size.height+(p._helper?p.position.top-g.top:p.position.top),v&&(p.size.width=p.size.height*p.aspectRatio,w=!1),p.position.top=p._helper?g.top:0),u=p.containerElement.get(0)===p.element.parent().get(0),f=/relative|absolute/.test(p.containerElement.css("position")),u&&f?(p.offset.left=p.parentData.left+p.position.left,p.offset.top=p.parentData.top+p.position.top):(p.offset.left=p.element.offset().left,p.offset.top=p.element.offset().top),o=Math.abs(p.sizeDiff.width+(p._helper?p.offset.left-b.left:p.offset.left-g.left)),l=Math.abs(p.sizeDiff.height+(p._helper?p.offset.top-b.top:p.offset.top-g.top)),o+p.size.width>=p.parentData.width&&(p.size.width=p.parentData.width-o,v&&(p.size.height=p.size.width/p.aspectRatio,w=!1)),l+p.size.height>=p.parentData.height&&(p.size.height=p.parentData.height-l,v&&(p.size.width=p.size.height*p.aspectRatio,w=!1)),w||(p.position.left=p.prevPosition.left,p.position.top=p.prevPosition.top,p.size.width=p.prevSize.width,p.size.height=p.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),o=t.options,l=t.containerOffset,u=t.containerPosition,f=t.containerElement,p=e(t.helper),m=p.offset(),g=p.outerWidth()-t.sizeDiff.width,y=p.outerHeight()-t.sizeDiff.height;t._helper&&!o.animate&&/relative/.test(f.css("position"))&&e(this).css({left:m.left-u.left-l.left,width:g,height:y}),t._helper&&!o.animate&&/static/.test(f.css("position"))&&e(this).css({left:m.left-u.left-l.left,width:g,height:y})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance").options;e(t.alsoResize).each((function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})}))},resize:function(t,o){var l=e(this).resizable("instance"),u=l.options,f=l.originalSize,p=l.originalPosition,m={height:l.size.height-f.height||0,width:l.size.width-f.width||0,top:l.position.top-p.top||0,left:l.position.left-p.left||0};e(u.alsoResize).each((function(){var t=e(this),l=e(this).data("ui-resizable-alsoresize"),u={},f=t.parents(o.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(f,(function(e,t){var o=(l[t]||0)+(m[t]||0);o&&o>=0&&(u[t]=o||null)})),t.css(u)}))},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),o=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:o.height,width:o.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,o=e(this).resizable("instance"),l=o.options,u=o.size,f=o.originalSize,p=o.originalPosition,m=o.axis,g="number"==typeof l.grid?[l.grid,l.grid]:l.grid,y=g[0]||1,v=g[1]||1,b=Math.round((u.width-f.width)/y)*y,_=Math.round((u.height-f.height)/v)*v,w=f.width+b,k=f.height+_,x=l.maxWidth&&l.maxWidth<w,S=l.maxHeight&&l.maxHeight<k,T=l.minWidth&&l.minWidth>w,C=l.minHeight&&l.minHeight>k;l.grid=g,T&&(w+=y),C&&(k+=v),x&&(w-=y),S&&(k-=v),/^(se|s|e)$/.test(m)?(o.size.width=w,o.size.height=k):/^(ne)$/.test(m)?(o.size.width=w,o.size.height=k,o.position.top=p.top-_):/^(sw)$/.test(m)?(o.size.width=w,o.size.height=k,o.position.left=p.left-b):((k-v<=0||w-y<=0)&&(t=o._getPaddingPlusBorderDimensions(this)),k-v>0?(o.size.height=k,o.position.top=p.top-_):(k=v-t.height,o.size.height=k,o.position.top=p.top+f.height-k),w-y>0?(o.size.width=w,o.position.left=p.left-b):(w=y-t.width,o.size.width=w,o.position.left=p.left+f.width-w))}}),e.ui.resizable,e.widget("ui.dialog",{version:"1.13.2",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var o=e(this).css(t).offset().top;o<0&&e(this).css("top",t.top-o)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var o=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||e.ui.safeBlur(e.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,(function(){o._trigger("close",t)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,o){var l=!1,u=this.uiDialog.siblings(".ui-front:visible").map((function(){return+e(this).css("z-index")})).get(),f=Math.max.apply(null,u);return f>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",f+1),l=!0),l&&!o&&this._trigger("focus",t),l},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=e(e.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,(function(){t._focusTabbable(),t._trigger("focus")})),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_restoreTabbableFocus:function(){var t=e.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()},_keepFocus:function(e){e.preventDefault(),this._restoreTabbableFocus(),this._delay(this._restoreTabbableFocus)},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var o=this.uiDialog.find(":tabbable"),l=o.first(),u=o.last();t.target!==u[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==l[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay((function(){u.trigger("focus")})),t.preventDefault()):(this._delay((function(){l.trigger("focus")})),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var t=this,o=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(o)||Array.isArray(o)&&!o.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(e.each(o,(function(o,l){var u,f;l="function"==typeof l?{click:l,text:o}:l,l=e.extend({type:"button"},l),u=l.click,f={icon:l.icon,iconPosition:l.iconPosition,showLabel:l.showLabel,icons:l.icons,text:l.text},delete l.click,delete l.icon,delete l.iconPosition,delete l.showLabel,delete l.icons,"boolean"==typeof l.text&&delete l.text,e("<button></button>",l).button(f).appendTo(t.uiButtonSet).on("click",(function(){u.apply(t.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var t=this,o=this.options;function l(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(o,u){t._addClass(e(this),"ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",o,l(u))},drag:function(e,o){t._trigger("drag",e,l(o))},stop:function(u,f){var p=f.offset.left-t.document.scrollLeft(),m=f.offset.top-t.document.scrollTop();o.position={my:"left top",at:"left"+(p>=0?"+":"")+p+" top"+(m>=0?"+":"")+m,of:t.window},t._removeClass(e(this),"ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",u,l(f))}})},_makeResizable:function(){var t=this,o=this.options,l=o.resizable,u=this.uiDialog.css("position"),f="string"==typeof l?l:"n,e,s,w,se,sw,ne,nw";function p(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:o.maxWidth,maxHeight:o.maxHeight,minWidth:o.minWidth,minHeight:this._minHeight(),handles:f,start:function(o,l){t._addClass(e(this),"ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",o,p(l))},resize:function(e,o){t._trigger("resize",e,p(o))},stop:function(l,u){var f=t.uiDialog.offset(),m=f.left-t.document.scrollLeft(),g=f.top-t.document.scrollTop();o.height=t.uiDialog.height(),o.width=t.uiDialog.width(),o.position={my:"left top",at:"left"+(m>=0?"+":"")+m+" top"+(g>=0?"+":"")+g,of:t.window},t._removeClass(e(this),"ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",l,p(u))}}).css("position",u)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),o=e.inArray(this,t);-1!==o&&t.splice(o,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var o=this,l=!1,u={};e.each(t,(function(e,t){o._setOption(e,t),e in o.sizeRelatedOptions&&(l=!0),e in o.resizableRelatedOptions&&(u[e]=t)})),l&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",u)},_setOption:function(t,o){var l,u,f=this.uiDialog;"disabled"!==t&&(this._super(t,o),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((l=f.is(":data(ui-draggable)"))&&!o&&f.draggable("destroy"),!l&&o&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((u=f.is(":data(ui-resizable)"))&&!o&&f.resizable("destroy"),u&&"string"==typeof o&&f.resizable("option","handles",o),u||!1===o||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,o,l=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),l.minWidth>l.width&&(l.width=l.minWidth),e=this.uiDialog.css({height:"auto",width:l.width}).outerHeight(),t=Math.max(0,l.minHeight-e),o="number"==typeof l.maxHeight?Math.max(0,l.maxHeight-e):"none","auto"===l.height?this.element.css({minHeight:t,maxHeight:o,height:"auto"}):this.element.height(Math.max(0,l.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=e.fn.jquery.substring(0,4),o=!0;this._delay((function(){o=!1})),this.document.data("ui-dialog-overlays")||this.document.on("focusin.ui-dialog",function(e){if(!o){var l=this._trackingInstances()[0];l._allowInteraction(e)||(e.preventDefault(),l._focusTabbable(),"3.4."!==t&&"3.5."!==t||l._delay(l._restoreTabbableFocus))}}.bind(this)),this.overlay=e("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),e.ui.dialog,e.widget("ui.droppable",{version:"1.13.2",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,o=t.accept;this.isover=!1,this.isout=!0,this.accept="function"==typeof o?o:function(e){return e.is(o)},this.proportions=function(){if(!arguments.length)return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});e=arguments[0]},this._addToManager(t.scope),t.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,o){if("accept"===t)this.accept="function"==typeof o?o:function(e){return e.is(o)};else if("scope"===t){var l=e.ui.ddmanager.droppables[this.options.scope];this._splice(l),this._addToManager(o)}this._super(t,o)},_activate:function(t){var o=e.ui.ddmanager.current;this._addActiveClass(),o&&this._trigger("activate",t,this.ui(o))},_deactivate:function(t){var o=e.ui.ddmanager.current;this._removeActiveClass(),o&&this._trigger("deactivate",t,this.ui(o))},_over:function(t){var o=e.ui.ddmanager.current;o&&(o.currentItem||o.element)[0]!==this.element[0]&&this.accept.call(this.element[0],o.currentItem||o.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(o)))},_out:function(t){var o=e.ui.ddmanager.current;o&&(o.currentItem||o.element)[0]!==this.element[0]&&this.accept.call(this.element[0],o.currentItem||o.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(o)))},_drop:function(t,o){var l=o||e.ui.ddmanager.current,u=!1;return!(!l||(l.currentItem||l.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var o=e(this).droppable("instance");if(o.options.greedy&&!o.options.disabled&&o.options.scope===l.options.scope&&o.accept.call(o.element[0],l.currentItem||l.element)&&e.ui.intersect(l,e.extend(o,{offset:o.element.offset()}),o.options.tolerance,t))return u=!0,!1})),!u&&!!this.accept.call(this.element[0],l.currentItem||l.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(l)),this.element))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),e.ui.intersect=function(){function e(e,t,o){return e>=t&&e<t+o}return function(t,o,l,u){if(!o.offset)return!1;var f=(t.positionAbs||t.position.absolute).left+t.margins.left,p=(t.positionAbs||t.position.absolute).top+t.margins.top,m=f+t.helperProportions.width,g=p+t.helperProportions.height,y=o.offset.left,v=o.offset.top,b=y+o.proportions().width,_=v+o.proportions().height;switch(l){case"fit":return y<=f&&m<=b&&v<=p&&g<=_;case"intersect":return y<f+t.helperProportions.width/2&&m-t.helperProportions.width/2<b&&v<p+t.helperProportions.height/2&&g-t.helperProportions.height/2<_;case"pointer":return e(u.pageY,v,o.proportions().height)&&e(u.pageX,y,o.proportions().width);case"touch":return(p>=v&&p<=_||g>=v&&g<=_||p<v&&g>_)&&(f>=y&&f<=b||m>=y&&m<=b||f<y&&m>b);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,o){var l,u,f=e.ui.ddmanager.droppables[t.options.scope]||[],p=o?o.type:null,m=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(l=0;l<f.length;l++)if(!(f[l].options.disabled||t&&!f[l].accept.call(f[l].element[0],t.currentItem||t.element))){for(u=0;u<m.length;u++)if(m[u]===f[l].element[0]){f[l].proportions().height=0;continue e}f[l].visible="none"!==f[l].element.css("display"),f[l].visible&&("mousedown"===p&&f[l]._activate.call(f[l],o),f[l].offset=f[l].element.offset(),f[l].proportions({width:f[l].element[0].offsetWidth,height:f[l].element[0].offsetHeight}))}},drop:function(t,o){var l=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),(function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,o)&&(l=this._drop.call(this,o)||l),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,o)))})),l},dragStart:function(t,o){t.element.parentsUntil("body").on("scroll.droppable",(function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,o)}))},drag:function(t,o){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,o),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var l,u,f,p=e.ui.intersect(t,this,this.options.tolerance,o),m=!p&&this.isover?"isout":p&&!this.isover?"isover":null;m&&(this.options.greedy&&(u=this.options.scope,(f=this.element.parents(":data(ui-droppable)").filter((function(){return e(this).droppable("instance").options.scope===u}))).length&&((l=e(f[0]).droppable("instance")).greedyChild="isover"===m)),l&&"isover"===m&&(l.isover=!1,l.isout=!0,l._out.call(l,o)),this[m]=!0,this["isout"===m?"isover":"isout"]=!1,this["isover"===m?"_over":"_out"].call(this,o),l&&"isout"===m&&(l.isout=!1,l.isover=!0,l._over.call(l,o)))}}))},dragStop:function(t,o){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,o)}},!1!==e.uiBackCompat&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),e.ui.droppable,e.widget("ui.progressbar",{version:"1.13.2",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=e("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(e){if(void 0===e)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=!1===e,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,o=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(o.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.13.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t.elementPos=e(t.element[0]).offset(),t.selectees=e(t.options.filter,t.element[0]),t._addClass(t.selectees,"ui-selectee"),t.selectees.each((function(){var o=e(this),l=o.offset(),u={left:l.left-t.elementPos.left,top:l.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:o,left:u.left,top:u.top,right:u.left+o.outerWidth(),bottom:u.top+o.outerHeight(),startselected:!1,selected:o.hasClass("ui-selected"),selecting:o.hasClass("ui-selecting"),unselecting:o.hasClass("ui-unselecting")})}))},this.refresh(),this._mouseInit(),this.helper=e("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(t){var o=this,l=this.options;this.opos=[t.pageX,t.pageY],this.elementPos=e(this.element[0]).offset(),this.options.disabled||(this.selectees=e(l.filter,this.element[0]),this._trigger("start",t),e(l.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),l.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each((function(){var l=e.data(this,"selectable-item");l.startselected=!0,t.metaKey||t.ctrlKey||(o._removeClass(l.$element,"ui-selected"),l.selected=!1,o._addClass(l.$element,"ui-unselecting"),l.unselecting=!0,o._trigger("unselecting",t,{unselecting:l.element}))})),e(t.target).parents().addBack().each((function(){var l,u=e.data(this,"selectable-item");if(u)return l=!t.metaKey&&!t.ctrlKey||!u.$element.hasClass("ui-selected"),o._removeClass(u.$element,l?"ui-unselecting":"ui-selected")._addClass(u.$element,l?"ui-selecting":"ui-unselecting"),u.unselecting=!l,u.selecting=l,u.selected=l,l?o._trigger("selecting",t,{selecting:u.element}):o._trigger("unselecting",t,{unselecting:u.element}),!1})))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var o,l=this,u=this.options,f=this.opos[0],p=this.opos[1],m=t.pageX,g=t.pageY;return f>m&&(o=m,m=f,f=o),p>g&&(o=g,g=p,p=o),this.helper.css({left:f,top:p,width:m-f,height:g-p}),this.selectees.each((function(){var o=e.data(this,"selectable-item"),y=!1,v={};o&&o.element!==l.element[0]&&(v.left=o.left+l.elementPos.left,v.right=o.right+l.elementPos.left,v.top=o.top+l.elementPos.top,v.bottom=o.bottom+l.elementPos.top,"touch"===u.tolerance?y=!(v.left>m||v.right<f||v.top>g||v.bottom<p):"fit"===u.tolerance&&(y=v.left>f&&v.right<m&&v.top>p&&v.bottom<g),y?(o.selected&&(l._removeClass(o.$element,"ui-selected"),o.selected=!1),o.unselecting&&(l._removeClass(o.$element,"ui-unselecting"),o.unselecting=!1),o.selecting||(l._addClass(o.$element,"ui-selecting"),o.selecting=!0,l._trigger("selecting",t,{selecting:o.element}))):(o.selecting&&((t.metaKey||t.ctrlKey)&&o.startselected?(l._removeClass(o.$element,"ui-selecting"),o.selecting=!1,l._addClass(o.$element,"ui-selected"),o.selected=!0):(l._removeClass(o.$element,"ui-selecting"),o.selecting=!1,o.startselected&&(l._addClass(o.$element,"ui-unselecting"),o.unselecting=!0),l._trigger("unselecting",t,{unselecting:o.element}))),o.selected&&(t.metaKey||t.ctrlKey||o.startselected||(l._removeClass(o.$element,"ui-selected"),o.selected=!1,l._addClass(o.$element,"ui-unselecting"),o.unselecting=!0,l._trigger("unselecting",t,{unselecting:o.element})))))})),!1}},_mouseStop:function(t){var o=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each((function(){var l=e.data(this,"selectable-item");o._removeClass(l.$element,"ui-unselecting"),l.unselecting=!1,l.startselected=!1,o._trigger("unselected",t,{unselected:l.element})})),e(".ui-selecting",this.element[0]).each((function(){var l=e.data(this,"selectable-item");o._removeClass(l.$element,"ui-selecting")._addClass(l.$element,"ui-selected"),l.selecting=!1,l.selected=!0,l.startselected=!0,o._trigger("selected",t,{selected:l.element})})),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.13.2",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=e()},_drawButton:function(){var t,o=this,l=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(e){this.button.trigger("focus"),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=e("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(l).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",(function(){o._rendered||o._refreshMenu()}))},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,o){e.preventDefault(),t._setSelection(),t._select(o.item.data("ui-selectmenu-item"),e)},focus:function(e,o){var l=o.item.data("ui-selectmenu-item");null!=t.focusIndex&&l.index!==t.focusIndex&&(t._trigger("focus",e,{item:l}),t.isOpen||t._select(l,e)),t.focusIndex=l.index,t.button.attr("aria-activedescendant",t.menuItems.eq(l.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var e,t=this.element.find("option");this.menu.empty(),this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,t.length&&(e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e)))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var o=e("<span>");return this._setText(o,t.label),this._addClass(o,"ui-selectmenu-text"),o},_renderMenu:function(t,o){var l=this,u="";e.each(o,(function(o,f){var p;f.optgroup!==u&&(p=e("<li>",{text:f.optgroup}),l._addClass(p,"ui-selectmenu-optgroup","ui-menu-divider"+(f.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),p.appendTo(t),u=f.optgroup),l._renderItemData(t,f)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,o){var l=e("<li>"),u=e("<div>",{title:o.element.attr("title")});return o.disabled&&this._addClass(l,null,"ui-state-disabled"),this._setText(u,o.label),l.append(u).appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var o,l,u=".ui-menu-item";this.isOpen?o=this.menuItems.eq(this.focusIndex).parent("li"):(o=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),u+=":not(.ui-state-disabled)"),(l="first"===e||"last"===e?o["first"===e?"prevAll":"nextAll"](u).eq(-1):o[e+"All"](u).eq(0)).length&&this.menuInstance.focus(t,l)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?((e=window.getSelection()).removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.trigger("focus"))},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+e.escapeSelector(this.ids.button)).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection()).rangeCount&&(this.range=e.getRangeAt(0)):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var o=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),o=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),o=!1}o&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var o=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e)),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==o&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if("icons"===e){var o=this.button.find("span.ui-icon");this._removeClass(o,null,this.options.icons.button)._addClass(o,null,t.button)}this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"width"===e&&this._resizeButton()},_setOptionDisabled:function(e){this._super(e),this.menuInstance.option("disabled",e),this.button.attr("aria-disabled",e),this._toggleClass(this.button,null,"ui-state-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;!1!==e?(null===e&&(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)):this.button.css("width","")},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var e=this._super();return e.disabled=this.element.prop("disabled"),e},_parseOptions:function(t){var o=this,l=[];t.each((function(t,u){u.hidden||l.push(o._parseOption(e(u),t))})),this.items=l},_parseOption:function(e,t){var o=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),optgroup:o.attr("label")||"",disabled:o.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),e.widget("ui.slider",e.ui.mouse,{version:"1.13.2",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,o,l=this.options,u=this.element.find(".ui-slider-handle"),f="<span tabindex='0'></span>",p=[];for(o=l.values&&l.values.length||1,u.length>o&&(u.slice(o).remove(),u=u.slice(0,o)),t=u.length;t<o;t++)p.push(f);this.handles=u.add(e(p.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)}))},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:Array.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var o,l,u,f,p,m,g,y=this,v=this.options;return!v.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),o={x:t.pageX,y:t.pageY},l=this._normValueFromMouse(o),u=this._valueMax()-this._valueMin()+1,this.handles.each((function(t){var o=Math.abs(l-y.values(t));(u>o||u===o&&(t===y._lastChangedValue||y.values(t)===v.min))&&(u=o,f=e(this),p=t)})),!1!==this._start(t,p)&&(this._mouseSliding=!0,this._handleIndex=p,this._addClass(f,null,"ui-state-active"),f.trigger("focus"),m=f.offset(),g=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=g?{left:0,top:0}:{left:t.pageX-m.left-f.width()/2,top:t.pageY-m.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,p,l),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},o=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,o),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,o,l,u,f;return"horizontal"===this.orientation?(t=this.elementSize.width,o=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,o=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(l=o/t)>1&&(l=1),l<0&&(l=0),"vertical"===this.orientation&&(l=1-l),u=this._valueMax()-this._valueMin(),f=this._valueMin()+l*u,this._trimAlignValue(f)},_uiHash:function(e,t,o){var l={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(l.value=void 0!==t?t:this.values(e),l.values=o||this.values()),l},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,o){var l,u=this.value(),f=this.values();this._hasMultipleValues()&&(l=this.values(t?0:1),u=this.values(t),2===this.options.values.length&&!0===this.options.range&&(o=0===t?Math.min(l,o):Math.max(l,o)),f[t]=o),o!==u&&!1!==this._trigger("slide",e,this._uiHash(t,o,f))&&(this._hasMultipleValues()?this.values(t,o):this.value(o))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,t){var o,l,u;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(t),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!Array.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(o=this.options.values,l=arguments[0],u=0;u<o.length;u+=1)o[u]=this._trimAlignValue(l[u]),this._change(null,u);this._refreshValue()},_setOption:function(e,t){var o,l=0;switch("range"===e&&!0===this.options.range&&("min"===t?(this.options.value=this._values(0),this.options.values=null):"max"===t&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),Array.isArray(this.options.values)&&(l=this.options.values.length),this._super(e,t),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(t),this.handles.css("horizontal"===t?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),o=l-1;o>=0;o--)this._change(null,o);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,o,l;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this._hasMultipleValues()){for(o=this.options.values.slice(),l=0;l<o.length;l+=1)o[l]=this._trimAlignValue(o[l]);return o}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,o=(e-this._valueMin())%t,l=e-o;return 2*Math.abs(o)>=t&&(l+=o>0?t:-t),parseFloat(l.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),o=this.options.step;(e=Math.round((e-t)/o)*o+t)>this.options.max&&(e-=o),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),o=t.indexOf(".");return-1===o?0:t.length-o-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,o,l,u,f,p=this.options.range,m=this.options,g=this,y=!this._animateOff&&m.animate,v={};this._hasMultipleValues()?this.handles.each((function(l){o=(g.values(l)-g._valueMin())/(g._valueMax()-g._valueMin())*100,v["horizontal"===g.orientation?"left":"bottom"]=o+"%",e(this).stop(1,1)[y?"animate":"css"](v,m.animate),!0===g.options.range&&("horizontal"===g.orientation?(0===l&&g.range.stop(1,1)[y?"animate":"css"]({left:o+"%"},m.animate),1===l&&g.range[y?"animate":"css"]({width:o-t+"%"},{queue:!1,duration:m.animate})):(0===l&&g.range.stop(1,1)[y?"animate":"css"]({bottom:o+"%"},m.animate),1===l&&g.range[y?"animate":"css"]({height:o-t+"%"},{queue:!1,duration:m.animate}))),t=o})):(l=this.value(),u=this._valueMin(),f=this._valueMax(),o=f!==u?(l-u)/(f-u)*100:0,v["horizontal"===this.orientation?"left":"bottom"]=o+"%",this.handle.stop(1,1)[y?"animate":"css"](v,m.animate),"min"===p&&"horizontal"===this.orientation&&this.range.stop(1,1)[y?"animate":"css"]({width:o+"%"},m.animate),"max"===p&&"horizontal"===this.orientation&&this.range.stop(1,1)[y?"animate":"css"]({width:100-o+"%"},m.animate),"min"===p&&"vertical"===this.orientation&&this.range.stop(1,1)[y?"animate":"css"]({height:o+"%"},m.animate),"max"===p&&"vertical"===this.orientation&&this.range.stop(1,1)[y?"animate":"css"]({height:100-o+"%"},m.animate))},_handleEvents:{keydown:function(t){var o,l,u,f=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(e(t.target),null,"ui-state-active"),!1===this._start(t,f)))return}switch(u=this.options.step,o=l=this._hasMultipleValues()?this.values(f):this.value(),t.keyCode){case e.ui.keyCode.HOME:l=this._valueMin();break;case e.ui.keyCode.END:l=this._valueMax();break;case e.ui.keyCode.PAGE_UP:l=this._trimAlignValue(o+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:l=this._trimAlignValue(o-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===this._valueMax())return;l=this._trimAlignValue(o+u);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===this._valueMin())return;l=this._trimAlignValue(o-u)}this._slide(t,f,l)},keyup:function(t){var o=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,o),this._change(t,o),this._removeClass(e(t.target),null,"ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.13.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,o){return e>=t&&e<t+o},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),e.each(this.items,(function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")}))},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,o){var l=null,u=!1,f=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(t),e(t.target).parents().each((function(){if(e.data(this,f.widgetName+"-item")===f)return l=e(this),!1})),e.data(t.target,f.widgetName+"-item")===f&&(l=e(t.target)),!l||this.options.handle&&!o&&(e(this.options.handle,l).find("*").addBack().each((function(){this===t.target&&(u=!0)})),!u)||(this.currentItem=l,this._removeCurrentsFromItems(),0)))},_mouseStart:function(t,o,l){var u,f,p=this.options;if(this.currentContainer=this,this.refreshPositions(),this.appendTo=e("parent"!==p.appendTo?p.appendTo:this.currentItem.parent()),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),p.cursorAt&&this._adjustOffsetFromHelper(p.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),e.extend(this.offset,{parent:this._getParentOffset()}),p.containment&&this._setContainment(),p.cursor&&"auto"!==p.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",p.cursor),this.storedStylesheet=e("<style>*{ cursor: "+p.cursor+" !important; }</style>").appendTo(f)),p.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",p.zIndex)),p.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",p.opacity)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!l)for(u=this.containers.length-1;u>=0;u--)this.containers[u]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!p.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(t),!0},_scroll:function(e){var t=this.options,o=!1;return this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<t.scrollSensitivity?this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop+t.scrollSpeed:e.pageY-this.overflowOffset.top<t.scrollSensitivity&&(this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop-t.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<t.scrollSensitivity?this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft+t.scrollSpeed:e.pageX-this.overflowOffset.left<t.scrollSensitivity&&(this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft-t.scrollSpeed)):(e.pageY-this.document.scrollTop()<t.scrollSensitivity?o=this.document.scrollTop(this.document.scrollTop()-t.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<t.scrollSensitivity&&(o=this.document.scrollTop(this.document.scrollTop()+t.scrollSpeed)),e.pageX-this.document.scrollLeft()<t.scrollSensitivity?o=this.document.scrollLeft(this.document.scrollLeft()-t.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<t.scrollSensitivity&&(o=this.document.scrollLeft(this.document.scrollLeft()+t.scrollSpeed))),o},_mouseDrag:function(t){var o,l,u,f,p=this.options;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),p.scroll&&!1!==this._scroll(t)&&(this._refreshItemPositions(!0),e.ui.ddmanager&&!p.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},o=this.items.length-1;o>=0;o--)if(u=(l=this.items[o]).item[0],(f=this._intersectsWithPointer(l))&&l.instance===this.currentContainer&&!(u===this.currentItem[0]||this.placeholder[1===f?"next":"prev"]()[0]===u||e.contains(this.placeholder[0],u)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],u))){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(l))break;this._rearrange(t,l),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,o){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var l=this,u=this.placeholder.offset(),f=this.options.axis,p={};f&&"x"!==f||(p.left=u.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(p.top=u.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(p,parseInt(this.options.revert,10)||500,(function(){l._clear(t)}))}else this._clear(t,o);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var o=this._getItemsAsjQuery(t&&t.connected),l=[];return t=t||{},e(o).each((function(){var o=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);o&&l.push((t.key||o[1]+"[]")+"="+(t.key&&t.expression?o[1]:o[2]))})),!l.length&&t.key&&l.push(t.key+"="),l.join("&")},toArray:function(t){var o=this._getItemsAsjQuery(t&&t.connected),l=[];return t=t||{},o.each((function(){l.push(e(t.item||this).attr(t.attribute||"id")||"")})),l},_intersectsWith:function(e){var t=this.positionAbs.left,o=t+this.helperProportions.width,l=this.positionAbs.top,u=l+this.helperProportions.height,f=e.left,p=f+e.width,m=e.top,g=m+e.height,y=this.offset.click.top,v=this.offset.click.left,b="x"===this.options.axis||l+y>m&&l+y<g,_="y"===this.options.axis||t+v>f&&t+v<p,w=b&&_;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?w:f<t+this.helperProportions.width/2&&o-this.helperProportions.width/2<p&&m<l+this.helperProportions.height/2&&u-this.helperProportions.height/2<g},_intersectsWithPointer:function(e){var t,o,l="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),u="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!(!l||!u)&&(t=this.dragDirection.vertical,o=this.dragDirection.horizontal,this.floating?"right"===o||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),o=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),l=this.dragDirection.vertical,u=this.dragDirection.horizontal;return this.floating&&u?"right"===u&&o||"left"===u&&!o:l&&("down"===l&&t||"up"===l&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var o,l,u,f,p=[],m=[],g=this._connectWith();if(g&&t)for(o=g.length-1;o>=0;o--)for(l=(u=e(g[o],this.document[0])).length-1;l>=0;l--)(f=e.data(u[l],this.widgetFullName))&&f!==this&&!f.options.disabled&&m.push(["function"==typeof f.options.items?f.options.items.call(f.element):e(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f]);function y(){p.push(this)}for(m.push(["function"==typeof this.options.items?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),o=m.length-1;o>=0;o--)m[o][0].each(y);return e(p)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,(function(e){for(var o=0;o<t.length;o++)if(t[o]===e.item[0])return!1;return!0}))},_refreshItems:function(t){this.items=[],this.containers=[this];var o,l,u,f,p,m,g,y,v=this.items,b=[["function"==typeof this.options.items?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],_=this._connectWith();if(_&&this.ready)for(o=_.length-1;o>=0;o--)for(l=(u=e(_[o],this.document[0])).length-1;l>=0;l--)(f=e.data(u[l],this.widgetFullName))&&f!==this&&!f.options.disabled&&(b.push(["function"==typeof f.options.items?f.options.items.call(f.element[0],t,{item:this.currentItem}):e(f.options.items,f.element),f]),this.containers.push(f));for(o=b.length-1;o>=0;o--)for(p=b[o][1],l=0,y=(m=b[o][0]).length;l<y;l++)(g=e(m[l])).data(this.widgetName+"-item",p),v.push({item:g,instance:p,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(t){var o,l,u,f;for(o=this.items.length-1;o>=0;o--)l=this.items[o],this.currentContainer&&l.instance!==this.currentContainer&&l.item[0]!==this.currentItem[0]||(u=this.options.toleranceElement?e(this.options.toleranceElement,l.item):l.item,t||(l.width=u.outerWidth(),l.height=u.outerHeight()),f=u.offset(),l.left=f.left,l.top=f.top)},refreshPositions:function(e){var t,o;if(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),this._refreshItemPositions(e),this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(t=this.containers.length-1;t>=0;t--)o=this.containers[t].element.offset(),this.containers[t].containerCache.left=o.left,this.containers[t].containerCache.top=o.top,this.containers[t].containerCache.width=this.containers[t].element.outerWidth(),this.containers[t].containerCache.height=this.containers[t].element.outerHeight();return this},_createPlaceholder:function(t){var o,l,u=(t=t||this).options;u.placeholder&&u.placeholder.constructor!==String||(o=u.placeholder,l=t.currentItem[0].nodeName.toLowerCase(),u.placeholder={element:function(){var u=e("<"+l+">",t.document[0]);return t._addClass(u,"ui-sortable-placeholder",o||t.currentItem[0].className)._removeClass(u,"ui-sortable-helper"),"tbody"===l?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(u)):"tr"===l?t._createTrPlaceholder(t.currentItem,u):"img"===l&&u.attr("src",t.currentItem.attr("src")),o||u.css("visibility","hidden"),u},update:function(e,f){o&&!u.forcePlaceholderSize||(f.height()&&(!u.forcePlaceholderSize||"tbody"!==l&&"tr"!==l)||f.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),f.width()||f.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(u.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),u.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,o){var l=this;t.children().each((function(){e("<td>&#160;</td>",l.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(o)}))},_contactContainers:function(t){var o,l,u,f,p,m,g,y,v,b,_=null,w=null;for(o=this.containers.length-1;o>=0;o--)if(!e.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(_&&e.contains(this.containers[o].element[0],_.element[0]))continue;_=this.containers[o],w=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",t,this._uiHash(this)),this.containers[o].containerCache.over=0);if(_)if(1===this.containers.length)this.containers[w].containerCache.over||(this.containers[w]._trigger("over",t,this._uiHash(this)),this.containers[w].containerCache.over=1);else{for(u=1e4,f=null,p=(v=_.floating||this._isFloating(this.currentItem))?"left":"top",m=v?"width":"height",b=v?"pageX":"pageY",l=this.items.length-1;l>=0;l--)e.contains(this.containers[w].element[0],this.items[l].item[0])&&this.items[l].item[0]!==this.currentItem[0]&&(g=this.items[l].item.offset()[p],y=!1,t[b]-g>this.items[l][m]/2&&(y=!0),Math.abs(t[b]-g)<u&&(u=Math.abs(t[b]-g),f=this.items[l],this.direction=y?"up":"down"));if(!f&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[w])return void(this.currentContainer.containerCache.over||(this.containers[w]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));f?this._rearrange(t,f,null,!0):this._rearrange(t,null,this.containers[w].element,!0),this._trigger("change",t,this._uiHash()),this.containers[w]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[w],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this.containers[w]._trigger("over",t,this._uiHash(this)),this.containers[w].containerCache.over=1}},_createHelper:function(t){var o=this.options,l="function"==typeof o.helper?e(o.helper.apply(this.element[0],[t,this.currentItem])):"clone"===o.helper?this.currentItem.clone():this.currentItem;return l.parents("body").length||this.appendTo[0].appendChild(l[0]),l[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),l[0].style.width&&!o.forceHelperSize||l.width(this.currentItem.width()),l[0].style.height&&!o.forceHelperSize||l.height(this.currentItem.height()),l},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),Array.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,o,l,u=this.options;"parent"===u.containment&&(u.containment=this.helper[0].parentNode),"document"!==u.containment&&"window"!==u.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===u.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===u.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(u.containment)||(t=e(u.containment)[0],o=e(u.containment).offset(),l="hidden"!==e(t).css("overflow"),this.containment=[o.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,o.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,o.left+(l?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,o.top+(l?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,o){o||(o=this.position);var l="absolute"===t?1:-1,u="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(u[0].tagName);return{top:o.top+this.offset.relative.top*l+this.offset.parent.top*l-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:u.scrollTop())*l,left:o.left+this.offset.relative.left*l+this.offset.parent.left*l-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:u.scrollLeft())*l}},_generatePosition:function(t){var o,l,u=this.options,f=t.pageX,p=t.pageY,m="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(m[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(p=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(p=this.containment[3]+this.offset.click.top)),u.grid&&(o=this.originalPageY+Math.round((p-this.originalPageY)/u.grid[1])*u.grid[1],p=this.containment?o-this.offset.click.top>=this.containment[1]&&o-this.offset.click.top<=this.containment[3]?o:o-this.offset.click.top>=this.containment[1]?o-u.grid[1]:o+u.grid[1]:o,l=this.originalPageX+Math.round((f-this.originalPageX)/u.grid[0])*u.grid[0],f=this.containment?l-this.offset.click.left>=this.containment[0]&&l-this.offset.click.left<=this.containment[2]?l:l-this.offset.click.left>=this.containment[0]?l-u.grid[0]:l+u.grid[0]:l)),{top:p-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():g?0:m.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():g?0:m.scrollLeft())}},_rearrange:function(e,t,o,l){o?o[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var u=this.counter;this._delay((function(){u===this.counter&&this.refreshPositions(!l)}))},_clear:function(e,t){this.reverting=!1;var o,l=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(o in this._storedCSS)"auto"!==this._storedCSS[o]&&"static"!==this._storedCSS[o]||(this._storedCSS[o]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function u(e,t,o){return function(l){o._trigger(e,l,t._uiHash(t))}}for(this.fromOutside&&!t&&l.push((function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||l.push((function(e){this._trigger("update",e,this._uiHash())})),this!==this.currentContainer&&(t||(l.push((function(e){this._trigger("remove",e,this._uiHash())})),l.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),l.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),o=this.containers.length-1;o>=0;o--)t||l.push(u("deactivate",this,this.containers[o])),this.containers[o].containerCache.over&&(l.push(u("out",this,this.containers[o])),this.containers[o].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(o=0;o<l.length;o++)l[o].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var o=t||this;return{helper:o.helper,placeholder:o.placeholder||e([]),position:o.position,originalPosition:o.originalPosition,offset:o.positionAbs,item:o.currentItem,sender:t?t.element:null}}}),e.widget("ui.spinner",{version:"1.13.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t=this._super(),o=this.element;return e.each(["min","max","step"],(function(e,l){var u=o.attr(l);null!=u&&u.length&&(t[l]=u)})),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e))},mousewheel:function(t,o){var l=e.ui.safeActiveElement(this.document[0]);if(this.element[0]===l&&o){if(!this.spinning&&!this._start(t))return!1;this._spin((o>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay((function(){this.spinning&&this._stop(t)}),100),t.preventDefault()}},"mousedown .ui-spinner-button":function(t){var o;function l(){this.element[0]===e.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=o,this._delay((function(){this.previous=o})))}o=this.element[0]===e.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),t.preventDefault(),l.call(this),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,l.call(this)})),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var o=this.options,l=e.ui.keyCode;switch(t.keyCode){case l.UP:return this._repeat(null,1,t),!0;case l.DOWN:return this._repeat(null,-1,t),!0;case l.PAGE_UP:return this._repeat(null,o.page,t),!0;case l.PAGE_DOWN:return this._repeat(null,-o.page,t),!0}return!1},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e)||(this.counter||(this.counter=1),this.spinning=!0,0))},_repeat:function(e,t,o){e=e||500,clearTimeout(this.timer),this.timer=this._delay((function(){this._repeat(40,t,o)}),e),this._spin(t*this.options.step,o)},_spin:function(e,t){var o=this.value()||0;this.counter||(this.counter=1),o=this._adjustValue(o+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:o})||(this._value(o),this.counter++)},_increment:function(e){var t=this.options.incremental;return t?"function"==typeof t?t(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),o=t.indexOf(".");return-1===o?0:t.length-o-1},_adjustValue:function(e){var t,o,l=this.options;return o=e-(t=null!==l.min?l.min:0),e=t+(o=Math.round(o/l.step)*l.step),e=parseFloat(e.toFixed(this._precision())),null!==l.max&&e>l.max?l.max:null!==l.min&&e<l.min?l.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){var o,l,u;if("culture"===e||"numberFormat"===e)return o=this._parse(this.element.val()),this.options[e]=t,void this.element.val(this._format(o));"max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(l=this.buttons.first().find(".ui-icon"),this._removeClass(l,null,this.options.icons.up),this._addClass(l,null,t.up),u=this.buttons.last().find(".ui-icon"),this._removeClass(u,null,this.options.icons.down),this._addClass(u,null,t.down)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable")},_setOptions:$((function(e){this._super(e)})),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null!==e&&e===this._adjustValue(e)},_value:function(e,t){var o;""!==e&&null!==(o=this._parse(e))&&(t||(o=this._adjustValue(o)),e=this._format(o)),this.element.val(e),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:$((function(e){this._stepUp(e)})),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:$((function(e){this._stepDown(e)})),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:$((function(e){this._stepUp((e||1)*this.options.page)})),pageDown:$((function(e){this._stepDown((e||1)*this.options.page)})),value:function(e){if(!arguments.length)return this._parse(this.element.val());$(this._value).call(this,e)},widget:function(){return this.uiSpinner}}),!1!==e.uiBackCompat&&e.widget("ui.spinner",e.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),e.ui.spinner,e.widget("ui.tabs",{version:"1.13.2",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(K=/#.*$/,function(e){var t,o;t=e.href.replace(K,""),o=location.href.replace(K,"");try{t=decodeURIComponent(t)}catch(e){}try{o=decodeURIComponent(o)}catch(e){}return e.hash.length>1&&t===o}),_create:function(){var t=this,o=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,o.collapsible),this._processTabs(),o.active=this._initialActive(),Array.isArray(o.disabled)&&(o.disabled=e.uniqueSort(o.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),(function(e){return t.tabs.index(e)})))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(o.active):this.active=e(),this._refresh(),this.active.length&&this.load(o.active)},_initialActive:function(){var t=this.options.active,o=this.options.collapsible,l=location.hash.substring(1);return null===t&&(l&&this.tabs.each((function(o,u){if(e(u).attr("aria-controls")===l)return t=o,!1})),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&-1!==t||(t=!!this.tabs.length&&0)),!1!==t&&-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!o&&0),!o&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var o=e(e.ui.safeActiveElement(this.document[0])).closest("li"),l=this.tabs.index(o),u=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:l++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:u=!1,l--;break;case e.ui.keyCode.END:l=this.anchors.length-1;break;case e.ui.keyCode.HOME:l=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(l);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(l!==this.options.active&&l);default:return}t.preventDefault(),clearTimeout(this.activating),l=this._focusNextTab(l,u),t.ctrlKey||t.metaKey||(o.attr("aria-selected","false"),this.tabs.eq(l).attr("aria-selected","true"),this.activating=this._delay((function(){this.option("active",l)}),this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,o){var l=this.tabs.length-1;function u(){return t>l&&(t=0),t<0&&(t=l),t}for(;-1!==e.inArray(u(),this.options.disabled);)t=o?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).trigger("focus"),e},_setOption:function(e,t){"active"!==e?(this._super(e,t),"collapsible"===e&&(this._toggleClass("ui-tabs-collapsible",null,t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t)):this._activate(t)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,o=this.tablist.children(":has(a[href])");t.disabled=e.map(o.filter(".ui-state-disabled"),(function(e){return o.index(e)})),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,o=this.tabs,l=this.anchors,u=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",(function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()})).on("focus"+this.eventNamespace,".ui-tabs-anchor",(function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()})),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map((function(){return e("a",this)[0]})).attr({tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=e(),this.anchors.each((function(o,l){var u,f,p,m=e(l).uniqueId().attr("id"),g=e(l).closest("li"),y=g.attr("aria-controls");t._isLocal(l)?(p=(u=l.hash).substring(1),f=t.element.find(t._sanitizeSelector(u))):(u="#"+(p=g.attr("aria-controls")||e({}).uniqueId()[0].id),(f=t.element.find(u)).length||(f=t._createPanel(p)).insertAfter(t.panels[o-1]||t.tablist),f.attr("aria-live","polite")),f.length&&(t.panels=t.panels.add(f)),y&&g.data("ui-tabs-aria-controls",y),g.attr({"aria-controls":p,"aria-labelledby":m}),f.attr("aria-labelledby",m)})),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),o&&(this._off(o.not(this.tabs)),this._off(l.not(this.anchors)),this._off(u.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var o,l,u;for(Array.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),u=0;l=this.tabs[u];u++)o=e(l),!0===t||-1!==e.inArray(u,t)?(o.attr("aria-disabled","true"),this._addClass(o,null,"ui-state-disabled")):(o.removeAttr("aria-disabled"),this._removeClass(o,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function(t){var o={};t&&e.each(t.split(" "),(function(e,t){o[t]="_eventHandler"})),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,o),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var o,l=this.element.parent();"fill"===t?(o=l.height(),o-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each((function(){var t=e(this),l=t.css("position");"absolute"!==l&&"fixed"!==l&&(o-=t.outerHeight(!0))})),this.element.children().not(this.panels).each((function(){o-=e(this).outerHeight(!0)})),this.panels.each((function(){e(this).height(Math.max(0,o-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===t&&(o=0,this.panels.each((function(){o=Math.max(o,e(this).height("").height())})).height(o))},_eventHandler:function(t){var o=this.options,l=this.active,u=e(t.currentTarget).closest("li"),f=u[0]===l[0],p=f&&o.collapsible,m=p?e():this._getPanelForTab(u),g=l.length?this._getPanelForTab(l):e(),y={oldTab:l,oldPanel:g,newTab:p?e():u,newPanel:m};t.preventDefault(),u.hasClass("ui-state-disabled")||u.hasClass("ui-tabs-loading")||this.running||f&&!o.collapsible||!1===this._trigger("beforeActivate",t,y)||(o.active=!p&&this.tabs.index(u),this.active=f?e():u,this.xhr&&this.xhr.abort(),g.length||m.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),m.length&&this.load(this.tabs.index(u),t),this._toggle(t,y))},_toggle:function(t,o){var l=this,u=o.newPanel,f=o.oldPanel;function p(){l.running=!1,l._trigger("activate",t,o)}function m(){l._addClass(o.newTab.closest("li"),"ui-tabs-active","ui-state-active"),u.length&&l.options.show?l._show(u,l.options.show,p):(u.show(),p())}this.running=!0,f.length&&this.options.hide?this._hide(f,this.options.hide,(function(){l._removeClass(o.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),m()})):(this._removeClass(o.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),f.hide(),m()),f.attr("aria-hidden","true"),o.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),u.length&&f.length?o.oldTab.attr("tabIndex",-1):u.length&&this.tabs.filter((function(){return 0===e(this).attr("tabIndex")})).attr("tabIndex",-1),u.attr("aria-hidden","false"),o.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var o,l=this._findActive(t);l[0]!==this.active[0]&&(l.length||(l=this.active),o=l.find(".ui-tabs-anchor")[0],this._eventHandler({target:o,currentTarget:o,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+e.escapeSelector(t)+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each((function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")})),this.tabs.each((function(){var t=e(this),o=t.data("ui-tabs-aria-controls");o?t.attr("aria-controls",o).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")})),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var o=this.options.disabled;!1!==o&&(void 0===t?o=!1:(t=this._getIndex(t),o=Array.isArray(o)?e.map(o,(function(e){return e!==t?e:null})):e.map(this.tabs,(function(e,o){return o!==t?o:null}))),this._setOptionDisabled(o))},disable:function(t){var o=this.options.disabled;if(!0!==o){if(void 0===t)o=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,o))return;o=Array.isArray(o)?e.merge([t],o).sort():[t]}this._setOptionDisabled(o)}},load:function(t,o){t=this._getIndex(t);var l=this,u=this.tabs.eq(t),f=u.find(".ui-tabs-anchor"),p=this._getPanelForTab(u),m={tab:u,panel:p},g=function(e,t){"abort"===t&&l.panels.stop(!1,!0),l._removeClass(u,"ui-tabs-loading"),p.removeAttr("aria-busy"),e===l.xhr&&delete l.xhr};this._isLocal(f[0])||(this.xhr=e.ajax(this._ajaxSettings(f,o,m)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(u,"ui-tabs-loading"),p.attr("aria-busy","true"),this.xhr.done((function(e,t,u){setTimeout((function(){p.html(e),l._trigger("load",o,m),g(u,t)}),1)})).fail((function(e,t){setTimeout((function(){g(e,t)}),1)}))))},_ajaxSettings:function(t,o,l){var u=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,f){return u._trigger("beforeLoad",o,e.extend({jqXHR:t,ajaxSettings:f},l))}}},_getPanelForTab:function(t){var o=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+o))}}),!1!==e.uiBackCompat&&e.widget("ui.tabs",e.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),e.ui.tabs,e.widget("ui.tooltip",{version:"1.13.2",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title");return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,t){var o=(e.attr("aria-describedby")||"").split(/\s+/);o.push(t),e.data("ui-tooltip-id",t).attr("aria-describedby",String.prototype.trim.call(o.join(" ")))},_removeDescribedBy:function(t){var o=t.data("ui-tooltip-id"),l=(t.attr("aria-describedby")||"").split(/\s+/),u=e.inArray(o,l);-1!==u&&l.splice(u,1),t.removeData("ui-tooltip-id"),(l=String.prototype.trim.call(l.join(" ")))?t.attr("aria-describedby",l):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=e([])},_setOption:function(t,o){var l=this;this._super(t,o),"content"===t&&e.each(this.tooltips,(function(e,t){l._updateContent(t.element)}))},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,(function(o,l){var u=e.Event("blur");u.target=u.currentTarget=l.element[0],t.close(u,!0)})),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter((function(){var t=e(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})))},_enable:function(){this.disabledTitles.each((function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})),this.disabledTitles=e([])},open:function(t){var o=this,l=e(t?t.target:this.element).closest(this.options.items);l.length&&!l.data("ui-tooltip-id")&&(l.attr("title")&&l.data("ui-tooltip-title",l.attr("title")),l.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&l.parents().each((function(){var t,l=e(this);l.data("ui-tooltip-open")&&((t=e.Event("blur")).target=t.currentTarget=this,o.close(t,!0)),l.attr("title")&&(l.uniqueId(),o.parents[this.id]={element:this,title:l.attr("title")},l.attr("title",""))})),this._registerCloseHandlers(t,l),this._updateContent(l,t))},_updateContent:function(e,t){var o,l=this.options.content,u=this,f=t?t.type:null;if("string"==typeof l||l.nodeType||l.jquery)return this._open(t,e,l);(o=l.call(e[0],(function(o){u._delay((function(){e.data("ui-tooltip-open")&&(t&&(t.type=f),this._open(t,e,o))}))})))&&this._open(t,e,o)},_open:function(t,o,l){var u,f,p,m,g=e.extend({},this.options.position);function y(e){g.of=e,f.is(":hidden")||f.position(g)}l&&((u=this._find(o))?u.tooltip.find(".ui-tooltip-content").html(l):(o.is("[title]")&&(t&&"mouseover"===t.type?o.attr("title",""):o.removeAttr("title")),u=this._tooltip(o),f=u.tooltip,this._addDescribedBy(o,f.attr("id")),f.find(".ui-tooltip-content").html(l),this.liveRegion.children().hide(),(m=e("<div>").html(f.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),m.removeAttr("id").find("[id]").removeAttr("id"),m.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:y}),y(t)):f.position(e.extend({of:o},this.options.position)),f.hide(),this._show(f,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(p=this.delayedShow=setInterval((function(){f.is(":visible")&&(y(g.of),clearInterval(p))}),13)),this._trigger("open",t,{tooltip:f})))},_registerCloseHandlers:function(t,o){var l={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var l=e.Event(t);l.currentTarget=o[0],this.close(l,!0)}}};o[0]!==this.element[0]&&(l.remove=function(){var e=this._find(o);e&&this._removeTooltip(e.tooltip)}),t&&"mouseover"!==t.type||(l.mouseleave="close"),t&&"focusin"!==t.type||(l.focusout="close"),this._on(!0,o,l)},close:function(t){var o,l=this,u=e(t?t.currentTarget:this.element),f=this._find(u);f?(o=f.tooltip,f.closing||(clearInterval(this.delayedShow),u.data("ui-tooltip-title")&&!u.attr("title")&&u.attr("title",u.data("ui-tooltip-title")),this._removeDescribedBy(u),f.hiding=!0,o.stop(!0),this._hide(o,this.options.hide,(function(){l._removeTooltip(e(this))})),u.removeData("ui-tooltip-open"),this._off(u,"mouseleave focusout keyup"),u[0]!==this.element[0]&&this._off(u,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,(function(t,o){e(o.element).attr("title",o.title),delete l.parents[t]})),f.closing=!0,this._trigger("close",t,{tooltip:o}),f.hiding||(f.closing=!1))):u.removeData("ui-tooltip-open")},_tooltip:function(t){var o=e("<div>").attr("role","tooltip"),l=e("<div>").appendTo(o),u=o.uniqueId().attr("id");return this._addClass(l,"ui-tooltip-content"),this._addClass(o,"ui-tooltip","ui-widget ui-widget-content"),o.appendTo(this._appendTo(t)),this.tooltips[u]={element:t,tooltip:o}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){clearInterval(this.delayedShow),e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");return t.length||(t=this.document[0].body),t},_destroy:function(){var t=this;e.each(this.tooltips,(function(o,l){var u=e.Event("blur"),f=l.element;u.target=u.currentTarget=f[0],t.close(u,!0),e("#"+o).remove(),f.data("ui-tooltip-title")&&(f.attr("title")||f.attr("title",f.data("ui-tooltip-title")),f.removeData("ui-tooltip-title"))})),this.liveRegion.remove()}}),!1!==e.uiBackCompat&&e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}}),e.ui.tooltip},void 0===(f="function"==typeof l?l.apply(t,u):l)||(e.exports=f)},"./node_modules/jquery-ui/ui/version.js":function(e,t,o){var l,u,f;u=[o("./node_modules/jquery/dist/jquery.js")],void 0===(f="function"==typeof(l=function(e){return e.ui=e.ui||{},e.ui.version="1.13.2"})?l.apply(t,u):l)||(e.exports=f)},"./node_modules/jquery-ui/ui/widget.js":function(e,t,o){var l,u,f;u=[o("./node_modules/jquery/dist/jquery.js"),o("./node_modules/jquery-ui/ui/version.js")],l=function(e){var t,o=0,l=Array.prototype.hasOwnProperty,u=Array.prototype.slice;return e.cleanData=(t=e.cleanData,function(o){var l,u,f;for(f=0;null!=(u=o[f]);f++)(l=e._data(u,"events"))&&l.remove&&e(u).triggerHandler("remove");t(o)}),e.widget=function(t,o,l){var u,f,p,m={},g=t.split(".")[0],y=g+"-"+(t=t.split(".")[1]);return l||(l=o,o=e.Widget),Array.isArray(l)&&(l=e.extend.apply(null,[{}].concat(l))),e.expr.pseudos[y.toLowerCase()]=function(t){return!!e.data(t,y)},e[g]=e[g]||{},u=e[g][t],f=e[g][t]=function(e,t){if(!this||!this._createWidget)return new f(e,t);arguments.length&&this._createWidget(e,t)},e.extend(f,u,{version:l.version,_proto:e.extend({},l),_childConstructors:[]}),(p=new o).options=e.widget.extend({},p.options),e.each(l,(function(e,t){m[e]="function"==typeof t?function(){function l(){return o.prototype[e].apply(this,arguments)}function u(t){return o.prototype[e].apply(this,t)}return function(){var e,o=this._super,f=this._superApply;return this._super=l,this._superApply=u,e=t.apply(this,arguments),this._super=o,this._superApply=f,e}}():t})),f.prototype=e.widget.extend(p,{widgetEventPrefix:u&&p.widgetEventPrefix||t},m,{constructor:f,namespace:g,widgetName:t,widgetFullName:y}),u?(e.each(u._childConstructors,(function(t,o){var l=o.prototype;e.widget(l.namespace+"."+l.widgetName,f,o._proto)})),delete u._childConstructors):o._childConstructors.push(f),e.widget.bridge(t,f),f},e.widget.extend=function(t){for(var o,f,p=u.call(arguments,1),m=0,g=p.length;m<g;m++)for(o in p[m])f=p[m][o],l.call(p[m],o)&&void 0!==f&&(e.isPlainObject(f)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],f):e.widget.extend({},f):t[o]=f);return t},e.widget.bridge=function(t,o){var l=o.prototype.widgetFullName||t;e.fn[t]=function(f){var p="string"==typeof f,m=u.call(arguments,1),g=this;return p?this.length||"instance"!==f?this.each((function(){var o,u=e.data(this,l);return"instance"===f?(g=u,!1):u?"function"!=typeof u[f]||"_"===f.charAt(0)?e.error("no such method '"+f+"' for "+t+" widget instance"):(o=u[f].apply(u,m))!==u&&void 0!==o?(g=o&&o.jquery?g.pushStack(o.get()):o,!1):void 0:e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+f+"'")})):g=void 0:(m.length&&(f=e.widget.extend.apply(null,[f].concat(m))),this.each((function(){var t=e.data(this,l);t?(t.option(f||{}),t._init&&t._init()):e.data(this,l,new o(f,this))}))),g}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,l){l=e(l||this.defaultElement||this)[0],this.element=e(l),this.uuid=o++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},l!==this&&(e.data(l,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===l&&this.destroy()}}),this.document=e(l.style?l.ownerDocument:l.document||l),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,o){t._removeClass(o,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,o){var l,u,f,p=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(p={},l=t.split("."),t=l.shift(),l.length){for(u=p[t]=e.widget.extend({},this.options[t]),f=0;f<l.length-1;f++)u[l[f]]=u[l[f]]||{},u=u[l[f]];if(t=l.pop(),1===arguments.length)return void 0===u[t]?null:u[t];u[t]=o}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];p[t]=o}return this._setOptions(p),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var o,l,u;for(o in t)u=this.classesElementLookup[o],t[o]!==this.options.classes[o]&&u&&u.length&&(l=e(u.get()),this._removeClass(u,o),l.addClass(this._classes({element:l,keys:o,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var o=[],l=this;function u(){var o=[];t.element.each((function(t,u){e.map(l.classesElementLookup,(function(e){return e})).some((function(e){return e.is(u)}))||o.push(u)})),l._on(e(o),{remove:"_untrackClassesElement"})}function f(f,p){var m,g;for(g=0;g<f.length;g++)m=l.classesElementLookup[f[g]]||e(),t.add?(u(),m=e(e.uniqueSort(m.get().concat(t.element.get())))):m=e(m.not(t.element).get()),l.classesElementLookup[f[g]]=m,o.push(f[g]),p&&t.classes[f[g]]&&o.push(t.classes[f[g]])}return(t=e.extend({element:this.element,classes:this.options.classes||{}},t)).keys&&f(t.keys.match(/\S+/g)||[],!0),t.extra&&f(t.extra.match(/\S+/g)||[]),o.join(" ")},_untrackClassesElement:function(t){var o=this;e.each(o.classesElementLookup,(function(l,u){-1!==e.inArray(t.target,u)&&(o.classesElementLookup[l]=e(u.not(t.target).get()))})),this._off(e(t.target))},_removeClass:function(e,t,o){return this._toggleClass(e,t,o,!1)},_addClass:function(e,t,o){return this._toggleClass(e,t,o,!0)},_toggleClass:function(e,t,o,l){l="boolean"==typeof l?l:o;var u="string"==typeof e||null===e,f={extra:u?t:o,keys:u?e:t,element:u?this.element:e,add:l};return f.element.toggleClass(this._classes(f),l),this},_on:function(t,o,l){var u,f=this;"boolean"!=typeof t&&(l=o,o=t,t=!1),l?(o=u=e(o),this.bindings=this.bindings.add(o)):(l=o,o=this.element,u=this.widget()),e.each(l,(function(l,p){function m(){if(t||!0!==f.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof p?f[p]:p).apply(f,arguments)}"string"!=typeof p&&(m.guid=p.guid=p.guid||m.guid||e.guid++);var g=l.match(/^([\w:-]*)\s*(.*)$/),y=g[1]+f.eventNamespace,v=g[2];v?u.on(y,v,m):o.on(y,m)}))},_off:function(t,o){o=(o||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(o),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function o(){return("string"==typeof e?l[e]:e).apply(l,arguments)}var l=this;return setTimeout(o,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,o,l){var u,f,p=this.options[t];if(l=l||{},(o=e.Event(o)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),o.target=this.element[0],f=o.originalEvent)for(u in f)u in o||(o[u]=f[u]);return this.element.trigger(o,l),!("function"==typeof p&&!1===p.apply(this.element[0],[o].concat(l))||o.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,o){e.Widget.prototype["_"+t]=function(l,u,f){var p;"string"==typeof u&&(u={effect:u});var m=u?!0===u||"number"==typeof u?o:u.effect||o:t;"number"==typeof(u=u||{})?u={duration:u}:!0===u&&(u={}),p=!e.isEmptyObject(u),u.complete=f,u.delay&&l.delay(u.delay),p&&e.effects&&e.effects.effect[m]?l[t](u):m!==t&&l[m]?l[m](u.duration,u.easing,f):l.queue((function(o){e(this)[t](),f&&f.call(l[0]),o()}))}})),e.widget},void 0===(f="function"==typeof l?l.apply(t,u):l)||(e.exports=f)},"./node_modules/jquery/dist/jquery.js":function(e,t){var o,l,u;l="undefined"!=typeof window?window:this,u=function(l,u){var f=[],p=Object.getPrototypeOf,m=f.slice,g=f.flat?function(e){return f.flat.call(e)}:function(e){return f.concat.apply([],e)},y=f.push,v=f.indexOf,b={},_=b.toString,w=b.hasOwnProperty,k=w.toString,x=k.call(Object),S={},T=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},C=function(e){return null!=e&&e===e.window},A=l.document,P={type:!0,src:!0,nonce:!0,noModule:!0};function E(e,t,o){var l,u,f=(o=o||A).createElement("script");if(f.text=e,t)for(l in P)(u=t[l]||t.getAttribute&&t.getAttribute(l))&&f.setAttribute(l,u);o.head.appendChild(f).parentNode.removeChild(f)}function D(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?b[_.call(e)]||"object":typeof e}var O="3.6.3",j=function(e,t){return new j.fn.init(e,t)};function I(e){var t=!!e&&"length"in e&&e.length,o=D(e);return!T(e)&&!C(e)&&("array"===o||0===t||"number"==typeof t&&t>0&&t-1 in e)}j.fn=j.prototype={jquery:O,constructor:j,length:0,toArray:function(){return m.call(this)},get:function(e){return null==e?m.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=j.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return j.each(this,e)},map:function(e){return this.pushStack(j.map(this,(function(t,o){return e.call(t,o,t)})))},slice:function(){return this.pushStack(m.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(j.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(j.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,o=+e+(e<0?t:0);return this.pushStack(o>=0&&o<t?[this[o]]:[])},end:function(){return this.prevObject||this.constructor()},push:y,sort:f.sort,splice:f.splice},j.extend=j.fn.extend=function(){var e,t,o,l,u,f,p=arguments[0]||{},m=1,g=arguments.length,y=!1;for("boolean"==typeof p&&(y=p,p=arguments[m]||{},m++),"object"==typeof p||T(p)||(p={}),m===g&&(p=this,m--);m<g;m++)if(null!=(e=arguments[m]))for(t in e)l=e[t],"__proto__"!==t&&p!==l&&(y&&l&&(j.isPlainObject(l)||(u=Array.isArray(l)))?(o=p[t],f=u&&!Array.isArray(o)?[]:u||j.isPlainObject(o)?o:{},u=!1,p[t]=j.extend(y,f,l)):void 0!==l&&(p[t]=l));return p},j.extend({expando:"jQuery"+(O+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,o;return!(!e||"[object Object]"!==_.call(e)||(t=p(e))&&("function"!=typeof(o=w.call(t,"constructor")&&t.constructor)||k.call(o)!==x))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,o){E(e,{nonce:t&&t.nonce},o)},each:function(e,t){var o,l=0;if(I(e))for(o=e.length;l<o&&!1!==t.call(e[l],l,e[l]);l++);else for(l in e)if(!1===t.call(e[l],l,e[l]))break;return e},makeArray:function(e,t){var o=t||[];return null!=e&&(I(Object(e))?j.merge(o,"string"==typeof e?[e]:e):y.call(o,e)),o},inArray:function(e,t,o){return null==t?-1:v.call(t,e,o)},merge:function(e,t){for(var o=+t.length,l=0,u=e.length;l<o;l++)e[u++]=t[l];return e.length=u,e},grep:function(e,t,o){for(var l=[],u=0,f=e.length,p=!o;u<f;u++)!t(e[u],u)!==p&&l.push(e[u]);return l},map:function(e,t,o){var l,u,f=0,p=[];if(I(e))for(l=e.length;f<l;f++)null!=(u=t(e[f],f,o))&&p.push(u);else for(f in e)null!=(u=t(e[f],f,o))&&p.push(u);return g(p)},guid:1,support:S}),"function"==typeof Symbol&&(j.fn[Symbol.iterator]=f[Symbol.iterator]),j.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){b["[object "+t+"]"]=t.toLowerCase()}));var N=function(e){var t,o,l,u,f,p,m,g,y,v,b,_,w,k,x,S,T,C,A,P="sizzle"+1*new Date,E=e.document,D=0,O=0,j=ge(),I=ge(),N=ge(),M=ge(),L=function(e,t){return e===t&&(b=!0),0},R={}.hasOwnProperty,B=[],H=B.pop,W=B.push,G=B.push,q=B.slice,z=function(e,t){for(var o=0,l=e.length;o<l;o++)if(e[o]===t)return o;return-1},U="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",K="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Y="\\["+F+"*("+K+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+K+"))|)"+F+"*\\]",$=":("+K+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Y+")*)|.*)\\)|)",V=new RegExp(F+"+","g"),X=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),Q=new RegExp("^"+F+"*,"+F+"*"),Z=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),J=new RegExp(F+"|>"),ee=new RegExp($),te=new RegExp("^"+K+"$"),ie={ID:new RegExp("^#("+K+")"),CLASS:new RegExp("^\\.("+K+")"),TAG:new RegExp("^("+K+"|[*])"),ATTR:new RegExp("^"+Y),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+U+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},ne=/HTML$/i,re=/^(?:input|select|textarea|button)$/i,oe=/^h\d$/i,se=/^[^{]+\{\s*\[native \w/,ae=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,le=/[+~]/,ue=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),ce=function(e,t){var o="0x"+e.slice(1)-65536;return t||(o<0?String.fromCharCode(o+65536):String.fromCharCode(o>>10|55296,1023&o|56320))},he=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,de=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},fe=function(){_()},pe=Pe((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{G.apply(B=q.call(E.childNodes),E.childNodes),B[E.childNodes.length].nodeType}catch(e){G={apply:B.length?function(e,t){W.apply(e,q.call(t))}:function(e,t){for(var o=e.length,l=0;e[o++]=t[l++];);e.length=o-1}}}function me(e,t,l,u){var f,m,y,v,b,k,T,C=t&&t.ownerDocument,E=t?t.nodeType:9;if(l=l||[],"string"!=typeof e||!e||1!==E&&9!==E&&11!==E)return l;if(!u&&(_(t),t=t||w,x)){if(11!==E&&(b=ae.exec(e)))if(f=b[1]){if(9===E){if(!(y=t.getElementById(f)))return l;if(y.id===f)return l.push(y),l}else if(C&&(y=C.getElementById(f))&&A(t,y)&&y.id===f)return l.push(y),l}else{if(b[2])return G.apply(l,t.getElementsByTagName(e)),l;if((f=b[3])&&o.getElementsByClassName&&t.getElementsByClassName)return G.apply(l,t.getElementsByClassName(f)),l}if(o.qsa&&!M[e+" "]&&(!S||!S.test(e))&&(1!==E||"object"!==t.nodeName.toLowerCase())){if(T=e,C=t,1===E&&(J.test(e)||Z.test(e))){for((C=le.test(e)&&Te(t.parentNode)||t)===t&&o.scope||((v=t.getAttribute("id"))?v=v.replace(he,de):t.setAttribute("id",v=P)),m=(k=p(e)).length;m--;)k[m]=(v?"#"+v:":scope")+" "+Ae(k[m]);T=k.join(",")}try{if(o.cssSupportsSelector&&!CSS.supports("selector(:is("+T+"))"))throw new Error;return G.apply(l,C.querySelectorAll(T)),l}catch(t){M(e,!0)}finally{v===P&&t.removeAttribute("id")}}}return g(e.replace(X,"$1"),t,l,u)}function ge(){var e=[];return function t(o,u){return e.push(o+" ")>l.cacheLength&&delete t[e.shift()],t[o+" "]=u}}function ye(e){return e[P]=!0,e}function ve(e){var t=w.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function be(e,t){for(var o=e.split("|"),u=o.length;u--;)l.attrHandle[o[u]]=t}function _e(e,t){var o=t&&e,l=o&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(l)return l;if(o)for(;o=o.nextSibling;)if(o===t)return-1;return e?1:-1}function we(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ke(e){return function(t){var o=t.nodeName.toLowerCase();return("input"===o||"button"===o)&&t.type===e}}function xe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&pe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function Se(e){return ye((function(t){return t=+t,ye((function(o,l){for(var u,f=e([],o.length,t),p=f.length;p--;)o[u=f[p]]&&(o[u]=!(l[u]=o[u]))}))}))}function Te(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in o=me.support={},f=me.isXML=function(e){var t=e&&e.namespaceURI,o=e&&(e.ownerDocument||e).documentElement;return!ne.test(t||o&&o.nodeName||"HTML")},_=me.setDocument=function(e){var t,u,p=e?e.ownerDocument||e:E;return p!=w&&9===p.nodeType&&p.documentElement?(k=(w=p).documentElement,x=!f(w),E!=w&&(u=w.defaultView)&&u.top!==u&&(u.addEventListener?u.addEventListener("unload",fe,!1):u.attachEvent&&u.attachEvent("onunload",fe)),o.scope=ve((function(e){return k.appendChild(e).appendChild(w.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),o.cssSupportsSelector=ve((function(){return CSS.supports("selector(*)")&&w.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")})),o.attributes=ve((function(e){return e.className="i",!e.getAttribute("className")})),o.getElementsByTagName=ve((function(e){return e.appendChild(w.createComment("")),!e.getElementsByTagName("*").length})),o.getElementsByClassName=se.test(w.getElementsByClassName),o.getById=ve((function(e){return k.appendChild(e).id=P,!w.getElementsByName||!w.getElementsByName(P).length})),o.getById?(l.filter.ID=function(e){var t=e.replace(ue,ce);return function(e){return e.getAttribute("id")===t}},l.find.ID=function(e,t){if(void 0!==t.getElementById&&x){var o=t.getElementById(e);return o?[o]:[]}}):(l.filter.ID=function(e){var t=e.replace(ue,ce);return function(e){var o=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return o&&o.value===t}},l.find.ID=function(e,t){if(void 0!==t.getElementById&&x){var o,l,u,f=t.getElementById(e);if(f){if((o=f.getAttributeNode("id"))&&o.value===e)return[f];for(u=t.getElementsByName(e),l=0;f=u[l++];)if((o=f.getAttributeNode("id"))&&o.value===e)return[f]}return[]}}),l.find.TAG=o.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):o.qsa?t.querySelectorAll(e):void 0}:function(e,t){var o,l=[],u=0,f=t.getElementsByTagName(e);if("*"===e){for(;o=f[u++];)1===o.nodeType&&l.push(o);return l}return f},l.find.CLASS=o.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&x)return t.getElementsByClassName(e)},T=[],S=[],(o.qsa=se.test(w.querySelectorAll))&&(ve((function(e){var t;k.appendChild(e).innerHTML="<a id='"+P+"'></a><select id='"+P+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&S.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||S.push("\\["+F+"*(?:value|"+U+")"),e.querySelectorAll("[id~="+P+"-]").length||S.push("~="),(t=w.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||S.push("\\["+F+"*name"+F+"*="+F+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||S.push(":checked"),e.querySelectorAll("a#"+P+"+*").length||S.push(".#.+[+~]"),e.querySelectorAll("\\\f"),S.push("[\\r\\n\\f]")})),ve((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=w.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&S.push("name"+F+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&S.push(":enabled",":disabled"),k.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&S.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),S.push(",.*:")}))),(o.matchesSelector=se.test(C=k.matches||k.webkitMatchesSelector||k.mozMatchesSelector||k.oMatchesSelector||k.msMatchesSelector))&&ve((function(e){o.disconnectedMatch=C.call(e,"*"),C.call(e,"[s!='']:x"),T.push("!=",$)})),o.cssSupportsSelector||S.push(":has"),S=S.length&&new RegExp(S.join("|")),T=T.length&&new RegExp(T.join("|")),t=se.test(k.compareDocumentPosition),A=t||se.test(k.contains)?function(e,t){var o=9===e.nodeType&&e.documentElement||e,l=t&&t.parentNode;return e===l||!(!l||1!==l.nodeType||!(o.contains?o.contains(l):e.compareDocumentPosition&&16&e.compareDocumentPosition(l)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},L=t?function(e,t){if(e===t)return b=!0,0;var l=!e.compareDocumentPosition-!t.compareDocumentPosition;return l||(1&(l=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!o.sortDetached&&t.compareDocumentPosition(e)===l?e==w||e.ownerDocument==E&&A(E,e)?-1:t==w||t.ownerDocument==E&&A(E,t)?1:v?z(v,e)-z(v,t):0:4&l?-1:1)}:function(e,t){if(e===t)return b=!0,0;var o,l=0,u=e.parentNode,f=t.parentNode,p=[e],m=[t];if(!u||!f)return e==w?-1:t==w?1:u?-1:f?1:v?z(v,e)-z(v,t):0;if(u===f)return _e(e,t);for(o=e;o=o.parentNode;)p.unshift(o);for(o=t;o=o.parentNode;)m.unshift(o);for(;p[l]===m[l];)l++;return l?_e(p[l],m[l]):p[l]==E?-1:m[l]==E?1:0},w):w},me.matches=function(e,t){return me(e,null,null,t)},me.matchesSelector=function(e,t){if(_(e),o.matchesSelector&&x&&!M[t+" "]&&(!T||!T.test(t))&&(!S||!S.test(t)))try{var l=C.call(e,t);if(l||o.disconnectedMatch||e.document&&11!==e.document.nodeType)return l}catch(e){M(t,!0)}return me(t,w,null,[e]).length>0},me.contains=function(e,t){return(e.ownerDocument||e)!=w&&_(e),A(e,t)},me.attr=function(e,t){(e.ownerDocument||e)!=w&&_(e);var u=l.attrHandle[t.toLowerCase()],f=u&&R.call(l.attrHandle,t.toLowerCase())?u(e,t,!x):void 0;return void 0!==f?f:o.attributes||!x?e.getAttribute(t):(f=e.getAttributeNode(t))&&f.specified?f.value:null},me.escape=function(e){return(e+"").replace(he,de)},me.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},me.uniqueSort=function(e){var t,l=[],u=0,f=0;if(b=!o.detectDuplicates,v=!o.sortStable&&e.slice(0),e.sort(L),b){for(;t=e[f++];)t===e[f]&&(u=l.push(f));for(;u--;)e.splice(l[u],1)}return v=null,e},u=me.getText=function(e){var t,o="",l=0,f=e.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)o+=u(e)}else if(3===f||4===f)return e.nodeValue}else for(;t=e[l++];)o+=u(t);return o},l=me.selectors={cacheLength:50,createPseudo:ye,match:ie,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ue,ce),e[3]=(e[3]||e[4]||e[5]||"").replace(ue,ce),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||me.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&me.error(e[0]),e},PSEUDO:function(e){var t,o=!e[6]&&e[2];return ie.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":o&&ee.test(o)&&(t=p(o,!0))&&(t=o.indexOf(")",o.length-t)-o.length)&&(e[0]=e[0].slice(0,t),e[2]=o.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ue,ce).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&j(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,o){return function(l){var u=me.attr(l,e);return null==u?"!="===t:!t||(u+="","="===t?u===o:"!="===t?u!==o:"^="===t?o&&0===u.indexOf(o):"*="===t?o&&u.indexOf(o)>-1:"$="===t?o&&u.slice(-o.length)===o:"~="===t?(" "+u.replace(V," ")+" ").indexOf(o)>-1:"|="===t&&(u===o||u.slice(0,o.length+1)===o+"-"))}},CHILD:function(e,t,o,l,u){var f="nth"!==e.slice(0,3),p="last"!==e.slice(-4),m="of-type"===t;return 1===l&&0===u?function(e){return!!e.parentNode}:function(t,o,g){var y,v,b,_,w,k,x=f!==p?"nextSibling":"previousSibling",S=t.parentNode,T=m&&t.nodeName.toLowerCase(),C=!g&&!m,A=!1;if(S){if(f){for(;x;){for(_=t;_=_[x];)if(m?_.nodeName.toLowerCase()===T:1===_.nodeType)return!1;k=x="only"===e&&!k&&"nextSibling"}return!0}if(k=[p?S.firstChild:S.lastChild],p&&C){for(A=(w=(y=(v=(b=(_=S)[P]||(_[P]={}))[_.uniqueID]||(b[_.uniqueID]={}))[e]||[])[0]===D&&y[1])&&y[2],_=w&&S.childNodes[w];_=++w&&_&&_[x]||(A=w=0)||k.pop();)if(1===_.nodeType&&++A&&_===t){v[e]=[D,w,A];break}}else if(C&&(A=w=(y=(v=(b=(_=t)[P]||(_[P]={}))[_.uniqueID]||(b[_.uniqueID]={}))[e]||[])[0]===D&&y[1]),!1===A)for(;(_=++w&&_&&_[x]||(A=w=0)||k.pop())&&((m?_.nodeName.toLowerCase()!==T:1!==_.nodeType)||!++A||(C&&((v=(b=_[P]||(_[P]={}))[_.uniqueID]||(b[_.uniqueID]={}))[e]=[D,A]),_!==t)););return(A-=u)===l||A%l==0&&A/l>=0}}},PSEUDO:function(e,t){var o,u=l.pseudos[e]||l.setFilters[e.toLowerCase()]||me.error("unsupported pseudo: "+e);return u[P]?u(t):u.length>1?(o=[e,e,"",t],l.setFilters.hasOwnProperty(e.toLowerCase())?ye((function(e,o){for(var l,f=u(e,t),p=f.length;p--;)e[l=z(e,f[p])]=!(o[l]=f[p])})):function(e){return u(e,0,o)}):u}},pseudos:{not:ye((function(e){var t=[],o=[],l=m(e.replace(X,"$1"));return l[P]?ye((function(e,t,o,u){for(var f,p=l(e,null,u,[]),m=e.length;m--;)(f=p[m])&&(e[m]=!(t[m]=f))})):function(e,u,f){return t[0]=e,l(t,null,f,o),t[0]=null,!o.pop()}})),has:ye((function(e){return function(t){return me(e,t).length>0}})),contains:ye((function(e){return e=e.replace(ue,ce),function(t){return(t.textContent||u(t)).indexOf(e)>-1}})),lang:ye((function(e){return te.test(e||"")||me.error("unsupported lang: "+e),e=e.replace(ue,ce).toLowerCase(),function(t){var o;do{if(o=x?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(o=o.toLowerCase())===e||0===o.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var o=e.location&&e.location.hash;return o&&o.slice(1)===t.id},root:function(e){return e===k},focus:function(e){return e===w.activeElement&&(!w.hasFocus||w.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:xe(!1),disabled:xe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!l.pseudos.empty(e)},header:function(e){return oe.test(e.nodeName)},input:function(e){return re.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:Se((function(){return[0]})),last:Se((function(e,t){return[t-1]})),eq:Se((function(e,t,o){return[o<0?o+t:o]})),even:Se((function(e,t){for(var o=0;o<t;o+=2)e.push(o);return e})),odd:Se((function(e,t){for(var o=1;o<t;o+=2)e.push(o);return e})),lt:Se((function(e,t,o){for(var l=o<0?o+t:o>t?t:o;--l>=0;)e.push(l);return e})),gt:Se((function(e,t,o){for(var l=o<0?o+t:o;++l<t;)e.push(l);return e}))}},l.pseudos.nth=l.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})l.pseudos[t]=we(t);for(t in{submit:!0,reset:!0})l.pseudos[t]=ke(t);function Ce(){}function Ae(e){for(var t=0,o=e.length,l="";t<o;t++)l+=e[t].value;return l}function Pe(e,t,o){var l=t.dir,u=t.next,f=u||l,p=o&&"parentNode"===f,m=O++;return t.first?function(t,o,u){for(;t=t[l];)if(1===t.nodeType||p)return e(t,o,u);return!1}:function(t,o,g){var y,v,b,_=[D,m];if(g){for(;t=t[l];)if((1===t.nodeType||p)&&e(t,o,g))return!0}else for(;t=t[l];)if(1===t.nodeType||p)if(v=(b=t[P]||(t[P]={}))[t.uniqueID]||(b[t.uniqueID]={}),u&&u===t.nodeName.toLowerCase())t=t[l]||t;else{if((y=v[f])&&y[0]===D&&y[1]===m)return _[2]=y[2];if(v[f]=_,_[2]=e(t,o,g))return!0}return!1}}function Ee(e){return e.length>1?function(t,o,l){for(var u=e.length;u--;)if(!e[u](t,o,l))return!1;return!0}:e[0]}function De(e,t,o,l,u){for(var f,p=[],m=0,g=e.length,y=null!=t;m<g;m++)(f=e[m])&&(o&&!o(f,l,u)||(p.push(f),y&&t.push(m)));return p}function Oe(e,t,o,l,u,f){return l&&!l[P]&&(l=Oe(l)),u&&!u[P]&&(u=Oe(u,f)),ye((function(f,p,m,g){var y,v,b,_=[],w=[],k=p.length,x=f||function(e,t,o){for(var l=0,u=t.length;l<u;l++)me(e,t[l],o);return o}(t||"*",m.nodeType?[m]:m,[]),S=!e||!f&&t?x:De(x,_,e,m,g),T=o?u||(f?e:k||l)?[]:p:S;if(o&&o(S,T,m,g),l)for(y=De(T,w),l(y,[],m,g),v=y.length;v--;)(b=y[v])&&(T[w[v]]=!(S[w[v]]=b));if(f){if(u||e){if(u){for(y=[],v=T.length;v--;)(b=T[v])&&y.push(S[v]=b);u(null,T=[],y,g)}for(v=T.length;v--;)(b=T[v])&&(y=u?z(f,b):_[v])>-1&&(f[y]=!(p[y]=b))}}else T=De(T===p?T.splice(k,T.length):T),u?u(null,p,T,g):G.apply(p,T)}))}function je(e){for(var t,o,u,f=e.length,p=l.relative[e[0].type],m=p||l.relative[" "],g=p?1:0,v=Pe((function(e){return e===t}),m,!0),b=Pe((function(e){return z(t,e)>-1}),m,!0),_=[function(e,o,l){var u=!p&&(l||o!==y)||((t=o).nodeType?v(e,o,l):b(e,o,l));return t=null,u}];g<f;g++)if(o=l.relative[e[g].type])_=[Pe(Ee(_),o)];else{if((o=l.filter[e[g].type].apply(null,e[g].matches))[P]){for(u=++g;u<f&&!l.relative[e[u].type];u++);return Oe(g>1&&Ee(_),g>1&&Ae(e.slice(0,g-1).concat({value:" "===e[g-2].type?"*":""})).replace(X,"$1"),o,g<u&&je(e.slice(g,u)),u<f&&je(e=e.slice(u)),u<f&&Ae(e))}_.push(o)}return Ee(_)}return Ce.prototype=l.filters=l.pseudos,l.setFilters=new Ce,p=me.tokenize=function(e,t){var o,u,f,p,m,g,y,v=I[e+" "];if(v)return t?0:v.slice(0);for(m=e,g=[],y=l.preFilter;m;){for(p in o&&!(u=Q.exec(m))||(u&&(m=m.slice(u[0].length)||m),g.push(f=[])),o=!1,(u=Z.exec(m))&&(o=u.shift(),f.push({value:o,type:u[0].replace(X," ")}),m=m.slice(o.length)),l.filter)!(u=ie[p].exec(m))||y[p]&&!(u=y[p](u))||(o=u.shift(),f.push({value:o,type:p,matches:u}),m=m.slice(o.length));if(!o)break}return t?m.length:m?me.error(e):I(e,g).slice(0)},m=me.compile=function(e,t){var o,u=[],f=[],m=N[e+" "];if(!m){for(t||(t=p(e)),o=t.length;o--;)(m=je(t[o]))[P]?u.push(m):f.push(m);m=N(e,function(e,t){var o=t.length>0,u=e.length>0,f=function(f,p,m,g,v){var b,k,S,T=0,C="0",A=f&&[],P=[],E=y,O=f||u&&l.find.TAG("*",v),j=D+=null==E?1:Math.random()||.1,I=O.length;for(v&&(y=p==w||p||v);C!==I&&null!=(b=O[C]);C++){if(u&&b){for(k=0,p||b.ownerDocument==w||(_(b),m=!x);S=e[k++];)if(S(b,p||w,m)){g.push(b);break}v&&(D=j)}o&&((b=!S&&b)&&T--,f&&A.push(b))}if(T+=C,o&&C!==T){for(k=0;S=t[k++];)S(A,P,p,m);if(f){if(T>0)for(;C--;)A[C]||P[C]||(P[C]=H.call(g));P=De(P)}G.apply(g,P),v&&!f&&P.length>0&&T+t.length>1&&me.uniqueSort(g)}return v&&(D=j,y=E),A};return o?ye(f):f}(f,u)),m.selector=e}return m},g=me.select=function(e,t,o,u){var f,g,y,v,b,_="function"==typeof e&&e,w=!u&&p(e=_.selector||e);if(o=o||[],1===w.length){if((g=w[0]=w[0].slice(0)).length>2&&"ID"===(y=g[0]).type&&9===t.nodeType&&x&&l.relative[g[1].type]){if(!(t=(l.find.ID(y.matches[0].replace(ue,ce),t)||[])[0]))return o;_&&(t=t.parentNode),e=e.slice(g.shift().value.length)}for(f=ie.needsContext.test(e)?0:g.length;f--&&(y=g[f],!l.relative[v=y.type]);)if((b=l.find[v])&&(u=b(y.matches[0].replace(ue,ce),le.test(g[0].type)&&Te(t.parentNode)||t))){if(g.splice(f,1),!(e=u.length&&Ae(g)))return G.apply(o,u),o;break}}return(_||m(e,w))(u,t,!x,o,!t||le.test(e)&&Te(t.parentNode)||t),o},o.sortStable=P.split("").sort(L).join("")===P,o.detectDuplicates=!!b,_(),o.sortDetached=ve((function(e){return 1&e.compareDocumentPosition(w.createElement("fieldset"))})),ve((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||be("type|href|height|width",(function(e,t,o){if(!o)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),o.attributes&&ve((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||be("value",(function(e,t,o){if(!o&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ve((function(e){return null==e.getAttribute("disabled")}))||be(U,(function(e,t,o){var l;if(!o)return!0===e[t]?t.toLowerCase():(l=e.getAttributeNode(t))&&l.specified?l.value:null})),me}(l);j.find=N,j.expr=N.selectors,j.expr[":"]=j.expr.pseudos,j.uniqueSort=j.unique=N.uniqueSort,j.text=N.getText,j.isXMLDoc=N.isXML,j.contains=N.contains,j.escapeSelector=N.escape;var M=function(e,t,o){for(var l=[],u=void 0!==o;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(u&&j(e).is(o))break;l.push(e)}return l},L=function(e,t){for(var o=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&o.push(e);return o},R=j.expr.match.needsContext;function B(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var H=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function W(e,t,o){return T(t)?j.grep(e,(function(e,l){return!!t.call(e,l,e)!==o})):t.nodeType?j.grep(e,(function(e){return e===t!==o})):"string"!=typeof t?j.grep(e,(function(e){return v.call(t,e)>-1!==o})):j.filter(t,e,o)}j.filter=function(e,t,o){var l=t[0];return o&&(e=":not("+e+")"),1===t.length&&1===l.nodeType?j.find.matchesSelector(l,e)?[l]:[]:j.find.matches(e,j.grep(t,(function(e){return 1===e.nodeType})))},j.fn.extend({find:function(e){var t,o,l=this.length,u=this;if("string"!=typeof e)return this.pushStack(j(e).filter((function(){for(t=0;t<l;t++)if(j.contains(u[t],this))return!0})));for(o=this.pushStack([]),t=0;t<l;t++)j.find(e,u[t],o);return l>1?j.uniqueSort(o):o},filter:function(e){return this.pushStack(W(this,e||[],!1))},not:function(e){return this.pushStack(W(this,e||[],!0))},is:function(e){return!!W(this,"string"==typeof e&&R.test(e)?j(e):e||[],!1).length}});var G,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(j.fn.init=function(e,t,o){var l,u;if(!e)return this;if(o=o||G,"string"==typeof e){if(!(l="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:q.exec(e))||!l[1]&&t)return!t||t.jquery?(t||o).find(e):this.constructor(t).find(e);if(l[1]){if(t=t instanceof j?t[0]:t,j.merge(this,j.parseHTML(l[1],t&&t.nodeType?t.ownerDocument||t:A,!0)),H.test(l[1])&&j.isPlainObject(t))for(l in t)T(this[l])?this[l](t[l]):this.attr(l,t[l]);return this}return(u=A.getElementById(l[2]))&&(this[0]=u,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):T(e)?void 0!==o.ready?o.ready(e):e(j):j.makeArray(e,this)}).prototype=j.fn,G=j(A);var z=/^(?:parents|prev(?:Until|All))/,U={children:!0,contents:!0,next:!0,prev:!0};function F(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}j.fn.extend({has:function(e){var t=j(e,this),o=t.length;return this.filter((function(){for(var e=0;e<o;e++)if(j.contains(this,t[e]))return!0}))},closest:function(e,t){var o,l=0,u=this.length,f=[],p="string"!=typeof e&&j(e);if(!R.test(e))for(;l<u;l++)for(o=this[l];o&&o!==t;o=o.parentNode)if(o.nodeType<11&&(p?p.index(o)>-1:1===o.nodeType&&j.find.matchesSelector(o,e))){f.push(o);break}return this.pushStack(f.length>1?j.uniqueSort(f):f)},index:function(e){return e?"string"==typeof e?v.call(j(e),this[0]):v.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(j.uniqueSort(j.merge(this.get(),j(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),j.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return M(e,"parentNode")},parentsUntil:function(e,t,o){return M(e,"parentNode",o)},next:function(e){return F(e,"nextSibling")},prev:function(e){return F(e,"previousSibling")},nextAll:function(e){return M(e,"nextSibling")},prevAll:function(e){return M(e,"previousSibling")},nextUntil:function(e,t,o){return M(e,"nextSibling",o)},prevUntil:function(e,t,o){return M(e,"previousSibling",o)},siblings:function(e){return L((e.parentNode||{}).firstChild,e)},children:function(e){return L(e.firstChild)},contents:function(e){return null!=e.contentDocument&&p(e.contentDocument)?e.contentDocument:(B(e,"template")&&(e=e.content||e),j.merge([],e.childNodes))}},(function(e,t){j.fn[e]=function(o,l){var u=j.map(this,t,o);return"Until"!==e.slice(-5)&&(l=o),l&&"string"==typeof l&&(u=j.filter(l,u)),this.length>1&&(U[e]||j.uniqueSort(u),z.test(e)&&u.reverse()),this.pushStack(u)}}));var K=/[^\x20\t\r\n\f]+/g;function Y(e){return e}function $(e){throw e}function V(e,t,o,l){var u;try{e&&T(u=e.promise)?u.call(e).done(t).fail(o):e&&T(u=e.then)?u.call(e,t,o):t.apply(void 0,[e].slice(l))}catch(e){o.apply(void 0,[e])}}j.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return j.each(e.match(K)||[],(function(e,o){t[o]=!0})),t}(e):j.extend({},e);var t,o,l,u,f=[],p=[],m=-1,g=function(){for(u=u||e.once,l=t=!0;p.length;m=-1)for(o=p.shift();++m<f.length;)!1===f[m].apply(o[0],o[1])&&e.stopOnFalse&&(m=f.length,o=!1);e.memory||(o=!1),t=!1,u&&(f=o?[]:"")},y={add:function(){return f&&(o&&!t&&(m=f.length-1,p.push(o)),function t(o){j.each(o,(function(o,l){T(l)?e.unique&&y.has(l)||f.push(l):l&&l.length&&"string"!==D(l)&&t(l)}))}(arguments),o&&!t&&g()),this},remove:function(){return j.each(arguments,(function(e,t){for(var o;(o=j.inArray(t,f,o))>-1;)f.splice(o,1),o<=m&&m--})),this},has:function(e){return e?j.inArray(e,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return u=p=[],f=o="",this},disabled:function(){return!f},lock:function(){return u=p=[],o||t||(f=o=""),this},locked:function(){return!!u},fireWith:function(e,o){return u||(o=[e,(o=o||[]).slice?o.slice():o],p.push(o),t||g()),this},fire:function(){return y.fireWith(this,arguments),this},fired:function(){return!!l}};return y},j.extend({Deferred:function(e){var t=[["notify","progress",j.Callbacks("memory"),j.Callbacks("memory"),2],["resolve","done",j.Callbacks("once memory"),j.Callbacks("once memory"),0,"resolved"],["reject","fail",j.Callbacks("once memory"),j.Callbacks("once memory"),1,"rejected"]],o="pending",u={state:function(){return o},always:function(){return f.done(arguments).fail(arguments),this},catch:function(e){return u.then(null,e)},pipe:function(){var e=arguments;return j.Deferred((function(o){j.each(t,(function(t,l){var u=T(e[l[4]])&&e[l[4]];f[l[1]]((function(){var e=u&&u.apply(this,arguments);e&&T(e.promise)?e.promise().progress(o.notify).done(o.resolve).fail(o.reject):o[l[0]+"With"](this,u?[e]:arguments)}))})),e=null})).promise()},then:function(e,o,u){var f=0;function p(e,t,o,u){return function(){var m=this,g=arguments,y=function(){var l,y;if(!(e<f)){if((l=o.apply(m,g))===t.promise())throw new TypeError("Thenable self-resolution");y=l&&("object"==typeof l||"function"==typeof l)&&l.then,T(y)?u?y.call(l,p(f,t,Y,u),p(f,t,$,u)):(f++,y.call(l,p(f,t,Y,u),p(f,t,$,u),p(f,t,Y,t.notifyWith))):(o!==Y&&(m=void 0,g=[l]),(u||t.resolveWith)(m,g))}},v=u?y:function(){try{y()}catch(l){j.Deferred.exceptionHook&&j.Deferred.exceptionHook(l,v.stackTrace),e+1>=f&&(o!==$&&(m=void 0,g=[l]),t.rejectWith(m,g))}};e?v():(j.Deferred.getStackHook&&(v.stackTrace=j.Deferred.getStackHook()),l.setTimeout(v))}}return j.Deferred((function(l){t[0][3].add(p(0,l,T(u)?u:Y,l.notifyWith)),t[1][3].add(p(0,l,T(e)?e:Y)),t[2][3].add(p(0,l,T(o)?o:$))})).promise()},promise:function(e){return null!=e?j.extend(e,u):u}},f={};return j.each(t,(function(e,l){var p=l[2],m=l[5];u[l[1]]=p.add,m&&p.add((function(){o=m}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),p.add(l[3].fire),f[l[0]]=function(){return f[l[0]+"With"](this===f?void 0:this,arguments),this},f[l[0]+"With"]=p.fireWith})),u.promise(f),e&&e.call(f,f),f},when:function(e){var t=arguments.length,o=t,l=Array(o),u=m.call(arguments),f=j.Deferred(),p=function(e){return function(o){l[e]=this,u[e]=arguments.length>1?m.call(arguments):o,--t||f.resolveWith(l,u)}};if(t<=1&&(V(e,f.done(p(o)).resolve,f.reject,!t),"pending"===f.state()||T(u[o]&&u[o].then)))return f.then();for(;o--;)V(u[o],p(o),f.reject);return f.promise()}});var X=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;j.Deferred.exceptionHook=function(e,t){l.console&&l.console.warn&&e&&X.test(e.name)&&l.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},j.readyException=function(e){l.setTimeout((function(){throw e}))};var Q=j.Deferred();function Z(){A.removeEventListener("DOMContentLoaded",Z),l.removeEventListener("load",Z),j.ready()}j.fn.ready=function(e){return Q.then(e).catch((function(e){j.readyException(e)})),this},j.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--j.readyWait:j.isReady)||(j.isReady=!0,!0!==e&&--j.readyWait>0||Q.resolveWith(A,[j]))}}),j.ready.then=Q.then,"complete"===A.readyState||"loading"!==A.readyState&&!A.documentElement.doScroll?l.setTimeout(j.ready):(A.addEventListener("DOMContentLoaded",Z),l.addEventListener("load",Z));var J=function(e,t,o,l,u,f,p){var m=0,g=e.length,y=null==o;if("object"===D(o))for(m in u=!0,o)J(e,t,m,o[m],!0,f,p);else if(void 0!==l&&(u=!0,T(l)||(p=!0),y&&(p?(t.call(e,l),t=null):(y=t,t=function(e,t,o){return y.call(j(e),o)})),t))for(;m<g;m++)t(e[m],o,p?l:l.call(e[m],m,t(e[m],o)));return u?e:y?t.call(e):g?t(e[0],o):f},ee=/^-ms-/,te=/-([a-z])/g;function ie(e,t){return t.toUpperCase()}function ne(e){return e.replace(ee,"ms-").replace(te,ie)}var re=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function oe(){this.expando=j.expando+oe.uid++}oe.uid=1,oe.prototype={cache:function(e){var t=e[this.expando];return t||(t={},re(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,o){var l,u=this.cache(e);if("string"==typeof t)u[ne(t)]=o;else for(l in t)u[ne(l)]=t[l];return u},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ne(t)]},access:function(e,t,o){return void 0===t||t&&"string"==typeof t&&void 0===o?this.get(e,t):(this.set(e,t,o),void 0!==o?o:t)},remove:function(e,t){var o,l=e[this.expando];if(void 0!==l){if(void 0!==t){o=(t=Array.isArray(t)?t.map(ne):(t=ne(t))in l?[t]:t.match(K)||[]).length;for(;o--;)delete l[t[o]]}(void 0===t||j.isEmptyObject(l))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!j.isEmptyObject(t)}};var se=new oe,ae=new oe,le=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ue=/[A-Z]/g;function ce(e,t,o){var l;if(void 0===o&&1===e.nodeType)if(l="data-"+t.replace(ue,"-$&").toLowerCase(),"string"==typeof(o=e.getAttribute(l))){try{o=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:le.test(e)?JSON.parse(e):e)}(o)}catch(e){}ae.set(e,t,o)}else o=void 0;return o}j.extend({hasData:function(e){return ae.hasData(e)||se.hasData(e)},data:function(e,t,o){return ae.access(e,t,o)},removeData:function(e,t){ae.remove(e,t)},_data:function(e,t,o){return se.access(e,t,o)},_removeData:function(e,t){se.remove(e,t)}}),j.fn.extend({data:function(e,t){var o,l,u,f=this[0],p=f&&f.attributes;if(void 0===e){if(this.length&&(u=ae.get(f),1===f.nodeType&&!se.get(f,"hasDataAttrs"))){for(o=p.length;o--;)p[o]&&0===(l=p[o].name).indexOf("data-")&&(l=ne(l.slice(5)),ce(f,l,u[l]));se.set(f,"hasDataAttrs",!0)}return u}return"object"==typeof e?this.each((function(){ae.set(this,e)})):J(this,(function(t){var o;if(f&&void 0===t)return void 0!==(o=ae.get(f,e))||void 0!==(o=ce(f,e))?o:void 0;this.each((function(){ae.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ae.remove(this,e)}))}}),j.extend({queue:function(e,t,o){var l;if(e)return t=(t||"fx")+"queue",l=se.get(e,t),o&&(!l||Array.isArray(o)?l=se.access(e,t,j.makeArray(o)):l.push(o)),l||[]},dequeue:function(e,t){t=t||"fx";var o=j.queue(e,t),l=o.length,u=o.shift(),f=j._queueHooks(e,t);"inprogress"===u&&(u=o.shift(),l--),u&&("fx"===t&&o.unshift("inprogress"),delete f.stop,u.call(e,(function(){j.dequeue(e,t)}),f)),!l&&f&&f.empty.fire()},_queueHooks:function(e,t){var o=t+"queueHooks";return se.get(e,o)||se.access(e,o,{empty:j.Callbacks("once memory").add((function(){se.remove(e,[t+"queue",o])}))})}}),j.fn.extend({queue:function(e,t){var o=2;return"string"!=typeof e&&(t=e,e="fx",o--),arguments.length<o?j.queue(this[0],e):void 0===t?this:this.each((function(){var o=j.queue(this,e,t);j._queueHooks(this,e),"fx"===e&&"inprogress"!==o[0]&&j.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){j.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var o,l=1,u=j.Deferred(),f=this,p=this.length,m=function(){--l||u.resolveWith(f,[f])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";p--;)(o=se.get(f[p],e+"queueHooks"))&&o.empty&&(l++,o.empty.add(m));return m(),u.promise(t)}});var he=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,de=new RegExp("^(?:([+-])=|)("+he+")([a-z%]*)$","i"),fe=["Top","Right","Bottom","Left"],pe=A.documentElement,me=function(e){return j.contains(e.ownerDocument,e)},ge={composed:!0};pe.getRootNode&&(me=function(e){return j.contains(e.ownerDocument,e)||e.getRootNode(ge)===e.ownerDocument});var ye=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&me(e)&&"none"===j.css(e,"display")};function ve(e,t,o,l){var u,f,p=20,m=l?function(){return l.cur()}:function(){return j.css(e,t,"")},g=m(),y=o&&o[3]||(j.cssNumber[t]?"":"px"),v=e.nodeType&&(j.cssNumber[t]||"px"!==y&&+g)&&de.exec(j.css(e,t));if(v&&v[3]!==y){for(g/=2,y=y||v[3],v=+g||1;p--;)j.style(e,t,v+y),(1-f)*(1-(f=m()/g||.5))<=0&&(p=0),v/=f;v*=2,j.style(e,t,v+y),o=o||[]}return o&&(v=+v||+g||0,u=o[1]?v+(o[1]+1)*o[2]:+o[2],l&&(l.unit=y,l.start=v,l.end=u)),u}var be={};function _e(e){var t,o=e.ownerDocument,l=e.nodeName,u=be[l];return u||(t=o.body.appendChild(o.createElement(l)),u=j.css(t,"display"),t.parentNode.removeChild(t),"none"===u&&(u="block"),be[l]=u,u)}function we(e,t){for(var o,l,u=[],f=0,p=e.length;f<p;f++)(l=e[f]).style&&(o=l.style.display,t?("none"===o&&(u[f]=se.get(l,"display")||null,u[f]||(l.style.display="")),""===l.style.display&&ye(l)&&(u[f]=_e(l))):"none"!==o&&(u[f]="none",se.set(l,"display",o)));for(f=0;f<p;f++)null!=u[f]&&(e[f].style.display=u[f]);return e}j.fn.extend({show:function(){return we(this,!0)},hide:function(){return we(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ye(this)?j(this).show():j(this).hide()}))}});var ke,xe,Se=/^(?:checkbox|radio)$/i,Te=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i;ke=A.createDocumentFragment().appendChild(A.createElement("div")),(xe=A.createElement("input")).setAttribute("type","radio"),xe.setAttribute("checked","checked"),xe.setAttribute("name","t"),ke.appendChild(xe),S.checkClone=ke.cloneNode(!0).cloneNode(!0).lastChild.checked,ke.innerHTML="<textarea>x</textarea>",S.noCloneChecked=!!ke.cloneNode(!0).lastChild.defaultValue,ke.innerHTML="<option></option>",S.option=!!ke.lastChild;var Ae={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Pe(e,t){var o;return o=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&B(e,t)?j.merge([e],o):o}function Ee(e,t){for(var o=0,l=e.length;o<l;o++)se.set(e[o],"globalEval",!t||se.get(t[o],"globalEval"))}Ae.tbody=Ae.tfoot=Ae.colgroup=Ae.caption=Ae.thead,Ae.th=Ae.td,S.option||(Ae.optgroup=Ae.option=[1,"<select multiple='multiple'>","</select>"]);var De=/<|&#?\w+;/;function Oe(e,t,o,l,u){for(var f,p,m,g,y,v,b=t.createDocumentFragment(),_=[],w=0,k=e.length;w<k;w++)if((f=e[w])||0===f)if("object"===D(f))j.merge(_,f.nodeType?[f]:f);else if(De.test(f)){for(p=p||b.appendChild(t.createElement("div")),m=(Te.exec(f)||["",""])[1].toLowerCase(),g=Ae[m]||Ae._default,p.innerHTML=g[1]+j.htmlPrefilter(f)+g[2],v=g[0];v--;)p=p.lastChild;j.merge(_,p.childNodes),(p=b.firstChild).textContent=""}else _.push(t.createTextNode(f));for(b.textContent="",w=0;f=_[w++];)if(l&&j.inArray(f,l)>-1)u&&u.push(f);else if(y=me(f),p=Pe(b.appendChild(f),"script"),y&&Ee(p),o)for(v=0;f=p[v++];)Ce.test(f.type||"")&&o.push(f);return b}var je=/^([^.]*)(?:\.(.+)|)/;function Ie(){return!0}function Ne(){return!1}function Me(e,t){return e===function(){try{return A.activeElement}catch(e){}}()==("focus"===t)}function Le(e,t,o,l,u,f){var p,m;if("object"==typeof t){for(m in"string"!=typeof o&&(l=l||o,o=void 0),t)Le(e,m,o,l,t[m],f);return e}if(null==l&&null==u?(u=o,l=o=void 0):null==u&&("string"==typeof o?(u=l,l=void 0):(u=l,l=o,o=void 0)),!1===u)u=Ne;else if(!u)return e;return 1===f&&(p=u,u=function(e){return j().off(e),p.apply(this,arguments)},u.guid=p.guid||(p.guid=j.guid++)),e.each((function(){j.event.add(this,t,u,l,o)}))}function Re(e,t,o){o?(se.set(e,t,!1),j.event.add(e,t,{namespace:!1,handler:function(e){var l,u,f=se.get(this,t);if(1&e.isTrigger&&this[t]){if(f.length)(j.event.special[t]||{}).delegateType&&e.stopPropagation();else if(f=m.call(arguments),se.set(this,t,f),l=o(this,t),this[t](),f!==(u=se.get(this,t))||l?se.set(this,t,!1):u={},f!==u)return e.stopImmediatePropagation(),e.preventDefault(),u&&u.value}else f.length&&(se.set(this,t,{value:j.event.trigger(j.extend(f[0],j.Event.prototype),f.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===se.get(e,t)&&j.event.add(e,t,Ie)}j.event={global:{},add:function(e,t,o,l,u){var f,p,m,g,y,v,b,_,w,k,x,S=se.get(e);if(re(e))for(o.handler&&(o=(f=o).handler,u=f.selector),u&&j.find.matchesSelector(pe,u),o.guid||(o.guid=j.guid++),(g=S.events)||(g=S.events=Object.create(null)),(p=S.handle)||(p=S.handle=function(t){return void 0!==j&&j.event.triggered!==t.type?j.event.dispatch.apply(e,arguments):void 0}),y=(t=(t||"").match(K)||[""]).length;y--;)w=x=(m=je.exec(t[y])||[])[1],k=(m[2]||"").split(".").sort(),w&&(b=j.event.special[w]||{},w=(u?b.delegateType:b.bindType)||w,b=j.event.special[w]||{},v=j.extend({type:w,origType:x,data:l,handler:o,guid:o.guid,selector:u,needsContext:u&&j.expr.match.needsContext.test(u),namespace:k.join(".")},f),(_=g[w])||((_=g[w]=[]).delegateCount=0,b.setup&&!1!==b.setup.call(e,l,k,p)||e.addEventListener&&e.addEventListener(w,p)),b.add&&(b.add.call(e,v),v.handler.guid||(v.handler.guid=o.guid)),u?_.splice(_.delegateCount++,0,v):_.push(v),j.event.global[w]=!0)},remove:function(e,t,o,l,u){var f,p,m,g,y,v,b,_,w,k,x,S=se.hasData(e)&&se.get(e);if(S&&(g=S.events)){for(y=(t=(t||"").match(K)||[""]).length;y--;)if(w=x=(m=je.exec(t[y])||[])[1],k=(m[2]||"").split(".").sort(),w){for(b=j.event.special[w]||{},_=g[w=(l?b.delegateType:b.bindType)||w]||[],m=m[2]&&new RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)"),p=f=_.length;f--;)v=_[f],!u&&x!==v.origType||o&&o.guid!==v.guid||m&&!m.test(v.namespace)||l&&l!==v.selector&&("**"!==l||!v.selector)||(_.splice(f,1),v.selector&&_.delegateCount--,b.remove&&b.remove.call(e,v));p&&!_.length&&(b.teardown&&!1!==b.teardown.call(e,k,S.handle)||j.removeEvent(e,w,S.handle),delete g[w])}else for(w in g)j.event.remove(e,w+t[y],o,l,!0);j.isEmptyObject(g)&&se.remove(e,"handle events")}},dispatch:function(e){var t,o,l,u,f,p,m=new Array(arguments.length),g=j.event.fix(e),y=(se.get(this,"events")||Object.create(null))[g.type]||[],v=j.event.special[g.type]||{};for(m[0]=g,t=1;t<arguments.length;t++)m[t]=arguments[t];if(g.delegateTarget=this,!v.preDispatch||!1!==v.preDispatch.call(this,g)){for(p=j.event.handlers.call(this,g,y),t=0;(u=p[t++])&&!g.isPropagationStopped();)for(g.currentTarget=u.elem,o=0;(f=u.handlers[o++])&&!g.isImmediatePropagationStopped();)g.rnamespace&&!1!==f.namespace&&!g.rnamespace.test(f.namespace)||(g.handleObj=f,g.data=f.data,void 0!==(l=((j.event.special[f.origType]||{}).handle||f.handler).apply(u.elem,m))&&!1===(g.result=l)&&(g.preventDefault(),g.stopPropagation()));return v.postDispatch&&v.postDispatch.call(this,g),g.result}},handlers:function(e,t){var o,l,u,f,p,m=[],g=t.delegateCount,y=e.target;if(g&&y.nodeType&&!("click"===e.type&&e.button>=1))for(;y!==this;y=y.parentNode||this)if(1===y.nodeType&&("click"!==e.type||!0!==y.disabled)){for(f=[],p={},o=0;o<g;o++)void 0===p[u=(l=t[o]).selector+" "]&&(p[u]=l.needsContext?j(u,this).index(y)>-1:j.find(u,this,null,[y]).length),p[u]&&f.push(l);f.length&&m.push({elem:y,handlers:f})}return y=this,g<t.length&&m.push({elem:y,handlers:t.slice(g)}),m},addProp:function(e,t){Object.defineProperty(j.Event.prototype,e,{enumerable:!0,configurable:!0,get:T(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[j.expando]?e:new j.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Se.test(t.type)&&t.click&&B(t,"input")&&Re(t,"click",Ie),!1},trigger:function(e){var t=this||e;return Se.test(t.type)&&t.click&&B(t,"input")&&Re(t,"click"),!0},_default:function(e){var t=e.target;return Se.test(t.type)&&t.click&&B(t,"input")&&se.get(t,"click")||B(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},j.removeEvent=function(e,t,o){e.removeEventListener&&e.removeEventListener(t,o)},j.Event=function(e,t){if(!(this instanceof j.Event))return new j.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ie:Ne,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&j.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[j.expando]=!0},j.Event.prototype={constructor:j.Event,isDefaultPrevented:Ne,isPropagationStopped:Ne,isImmediatePropagationStopped:Ne,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ie,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ie,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ie,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},j.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},j.event.addProp),j.each({focus:"focusin",blur:"focusout"},(function(e,t){j.event.special[e]={setup:function(){return Re(this,e,Me),!1},trigger:function(){return Re(this,e),!0},_default:function(t){return se.get(t.target,e)},delegateType:t}})),j.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){j.event.special[e]={delegateType:t,bindType:t,handle:function(e){var o,l=this,u=e.relatedTarget,f=e.handleObj;return u&&(u===l||j.contains(l,u))||(e.type=f.origType,o=f.handler.apply(this,arguments),e.type=t),o}}})),j.fn.extend({on:function(e,t,o,l){return Le(this,e,t,o,l)},one:function(e,t,o,l){return Le(this,e,t,o,l,1)},off:function(e,t,o){var l,u;if(e&&e.preventDefault&&e.handleObj)return l=e.handleObj,j(e.delegateTarget).off(l.namespace?l.origType+"."+l.namespace:l.origType,l.selector,l.handler),this;if("object"==typeof e){for(u in e)this.off(u,t,e[u]);return this}return!1!==t&&"function"!=typeof t||(o=t,t=void 0),!1===o&&(o=Ne),this.each((function(){j.event.remove(this,e,o,t)}))}});var Be=/<script|<style|<link/i,He=/checked\s*(?:[^=]|=\s*.checked.)/i,We=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ge(e,t){return B(e,"table")&&B(11!==t.nodeType?t:t.firstChild,"tr")&&j(e).children("tbody")[0]||e}function qe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ze(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ue(e,t){var o,l,u,f,p,m;if(1===t.nodeType){if(se.hasData(e)&&(m=se.get(e).events))for(u in se.remove(t,"handle events"),m)for(o=0,l=m[u].length;o<l;o++)j.event.add(t,u,m[u][o]);ae.hasData(e)&&(f=ae.access(e),p=j.extend({},f),ae.set(t,p))}}function Fe(e,t){var o=t.nodeName.toLowerCase();"input"===o&&Se.test(e.type)?t.checked=e.checked:"input"!==o&&"textarea"!==o||(t.defaultValue=e.defaultValue)}function Ke(e,t,o,l){t=g(t);var u,f,p,m,y,v,b=0,_=e.length,w=_-1,k=t[0],x=T(k);if(x||_>1&&"string"==typeof k&&!S.checkClone&&He.test(k))return e.each((function(u){var f=e.eq(u);x&&(t[0]=k.call(this,u,f.html())),Ke(f,t,o,l)}));if(_&&(f=(u=Oe(t,e[0].ownerDocument,!1,e,l)).firstChild,1===u.childNodes.length&&(u=f),f||l)){for(m=(p=j.map(Pe(u,"script"),qe)).length;b<_;b++)y=u,b!==w&&(y=j.clone(y,!0,!0),m&&j.merge(p,Pe(y,"script"))),o.call(e[b],y,b);if(m)for(v=p[p.length-1].ownerDocument,j.map(p,ze),b=0;b<m;b++)y=p[b],Ce.test(y.type||"")&&!se.access(y,"globalEval")&&j.contains(v,y)&&(y.src&&"module"!==(y.type||"").toLowerCase()?j._evalUrl&&!y.noModule&&j._evalUrl(y.src,{nonce:y.nonce||y.getAttribute("nonce")},v):E(y.textContent.replace(We,""),y,v))}return e}function Ye(e,t,o){for(var l,u=t?j.filter(t,e):e,f=0;null!=(l=u[f]);f++)o||1!==l.nodeType||j.cleanData(Pe(l)),l.parentNode&&(o&&me(l)&&Ee(Pe(l,"script")),l.parentNode.removeChild(l));return e}j.extend({htmlPrefilter:function(e){return e},clone:function(e,t,o){var l,u,f,p,m=e.cloneNode(!0),g=me(e);if(!(S.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||j.isXMLDoc(e)))for(p=Pe(m),l=0,u=(f=Pe(e)).length;l<u;l++)Fe(f[l],p[l]);if(t)if(o)for(f=f||Pe(e),p=p||Pe(m),l=0,u=f.length;l<u;l++)Ue(f[l],p[l]);else Ue(e,m);return(p=Pe(m,"script")).length>0&&Ee(p,!g&&Pe(e,"script")),m},cleanData:function(e){for(var t,o,l,u=j.event.special,f=0;void 0!==(o=e[f]);f++)if(re(o)){if(t=o[se.expando]){if(t.events)for(l in t.events)u[l]?j.event.remove(o,l):j.removeEvent(o,l,t.handle);o[se.expando]=void 0}o[ae.expando]&&(o[ae.expando]=void 0)}}}),j.fn.extend({detach:function(e){return Ye(this,e,!0)},remove:function(e){return Ye(this,e)},text:function(e){return J(this,(function(e){return void 0===e?j.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ke(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ge(this,e).appendChild(e)}))},prepend:function(){return Ke(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ge(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ke(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ke(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(j.cleanData(Pe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return j.clone(this,e,t)}))},html:function(e){return J(this,(function(e){var t=this[0]||{},o=0,l=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Be.test(e)&&!Ae[(Te.exec(e)||["",""])[1].toLowerCase()]){e=j.htmlPrefilter(e);try{for(;o<l;o++)1===(t=this[o]||{}).nodeType&&(j.cleanData(Pe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ke(this,arguments,(function(t){var o=this.parentNode;j.inArray(this,e)<0&&(j.cleanData(Pe(this)),o&&o.replaceChild(t,this))}),e)}}),j.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){j.fn[e]=function(e){for(var o,l=[],u=j(e),f=u.length-1,p=0;p<=f;p++)o=p===f?this:this.clone(!0),j(u[p])[t](o),y.apply(l,o.get());return this.pushStack(l)}}));var $e=new RegExp("^("+he+")(?!px)[a-z%]+$","i"),Ve=/^--/,Xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=l),t.getComputedStyle(e)},Qe=function(e,t,o){var l,u,f={};for(u in t)f[u]=e.style[u],e.style[u]=t[u];for(u in l=o.call(e),t)e.style[u]=f[u];return l},Ze=new RegExp(fe.join("|"),"i"),Je="[\\x20\\t\\r\\n\\f]",et=new RegExp("^"+Je+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Je+"+$","g");function tt(e,t,o){var l,u,f,p,m=Ve.test(t),g=e.style;return(o=o||Xe(e))&&(p=o.getPropertyValue(t)||o[t],m&&p&&(p=p.replace(et,"$1")||void 0),""!==p||me(e)||(p=j.style(e,t)),!S.pixelBoxStyles()&&$e.test(p)&&Ze.test(t)&&(l=g.width,u=g.minWidth,f=g.maxWidth,g.minWidth=g.maxWidth=g.width=p,p=o.width,g.width=l,g.minWidth=u,g.maxWidth=f)),void 0!==p?p+"":p}function it(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(v){y.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",v.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",pe.appendChild(y).appendChild(v);var e=l.getComputedStyle(v);o="1%"!==e.top,g=12===t(e.marginLeft),v.style.right="60%",p=36===t(e.right),u=36===t(e.width),v.style.position="absolute",f=12===t(v.offsetWidth/3),pe.removeChild(y),v=null}}function t(e){return Math.round(parseFloat(e))}var o,u,f,p,m,g,y=A.createElement("div"),v=A.createElement("div");v.style&&(v.style.backgroundClip="content-box",v.cloneNode(!0).style.backgroundClip="",S.clearCloneStyle="content-box"===v.style.backgroundClip,j.extend(S,{boxSizingReliable:function(){return e(),u},pixelBoxStyles:function(){return e(),p},pixelPosition:function(){return e(),o},reliableMarginLeft:function(){return e(),g},scrollboxSize:function(){return e(),f},reliableTrDimensions:function(){var e,t,o,u;return null==m&&(e=A.createElement("table"),t=A.createElement("tr"),o=A.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",o.style.height="9px",o.style.display="block",pe.appendChild(e).appendChild(t).appendChild(o),u=l.getComputedStyle(t),m=parseInt(u.height,10)+parseInt(u.borderTopWidth,10)+parseInt(u.borderBottomWidth,10)===t.offsetHeight,pe.removeChild(e)),m}}))}();var nt=["Webkit","Moz","ms"],rt=A.createElement("div").style,ot={};function st(e){var t=j.cssProps[e]||ot[e];return t||(e in rt?e:ot[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),o=nt.length;o--;)if((e=nt[o]+t)in rt)return e}(e)||e)}var at=/^(none|table(?!-c[ea]).+)/,lt={position:"absolute",visibility:"hidden",display:"block"},ut={letterSpacing:"0",fontWeight:"400"};function ct(e,t,o){var l=de.exec(t);return l?Math.max(0,l[2]-(o||0))+(l[3]||"px"):t}function ht(e,t,o,l,u,f){var p="width"===t?1:0,m=0,g=0;if(o===(l?"border":"content"))return 0;for(;p<4;p+=2)"margin"===o&&(g+=j.css(e,o+fe[p],!0,u)),l?("content"===o&&(g-=j.css(e,"padding"+fe[p],!0,u)),"margin"!==o&&(g-=j.css(e,"border"+fe[p]+"Width",!0,u))):(g+=j.css(e,"padding"+fe[p],!0,u),"padding"!==o?g+=j.css(e,"border"+fe[p]+"Width",!0,u):m+=j.css(e,"border"+fe[p]+"Width",!0,u));return!l&&f>=0&&(g+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-f-g-m-.5))||0),g}function dt(e,t,o){var l=Xe(e),u=(!S.boxSizingReliable()||o)&&"border-box"===j.css(e,"boxSizing",!1,l),f=u,p=tt(e,t,l),m="offset"+t[0].toUpperCase()+t.slice(1);if($e.test(p)){if(!o)return p;p="auto"}return(!S.boxSizingReliable()&&u||!S.reliableTrDimensions()&&B(e,"tr")||"auto"===p||!parseFloat(p)&&"inline"===j.css(e,"display",!1,l))&&e.getClientRects().length&&(u="border-box"===j.css(e,"boxSizing",!1,l),(f=m in e)&&(p=e[m])),(p=parseFloat(p)||0)+ht(e,t,o||(u?"border":"content"),f,l,p)+"px"}function ft(e,t,o,l,u){return new ft.prototype.init(e,t,o,l,u)}j.extend({cssHooks:{opacity:{get:function(e,t){if(t){var o=tt(e,"opacity");return""===o?"1":o}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,o,l){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var u,f,p,m=ne(t),g=Ve.test(t),y=e.style;if(g||(t=st(m)),p=j.cssHooks[t]||j.cssHooks[m],void 0===o)return p&&"get"in p&&void 0!==(u=p.get(e,!1,l))?u:y[t];"string"==(f=typeof o)&&(u=de.exec(o))&&u[1]&&(o=ve(e,t,u),f="number"),null!=o&&o==o&&("number"!==f||g||(o+=u&&u[3]||(j.cssNumber[m]?"":"px")),S.clearCloneStyle||""!==o||0!==t.indexOf("background")||(y[t]="inherit"),p&&"set"in p&&void 0===(o=p.set(e,o,l))||(g?y.setProperty(t,o):y[t]=o))}},css:function(e,t,o,l){var u,f,p,m=ne(t);return Ve.test(t)||(t=st(m)),(p=j.cssHooks[t]||j.cssHooks[m])&&"get"in p&&(u=p.get(e,!0,o)),void 0===u&&(u=tt(e,t,l)),"normal"===u&&t in ut&&(u=ut[t]),""===o||o?(f=parseFloat(u),!0===o||isFinite(f)?f||0:u):u}}),j.each(["height","width"],(function(e,t){j.cssHooks[t]={get:function(e,o,l){if(o)return!at.test(j.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?dt(e,t,l):Qe(e,lt,(function(){return dt(e,t,l)}))},set:function(e,o,l){var u,f=Xe(e),p=!S.scrollboxSize()&&"absolute"===f.position,m=(p||l)&&"border-box"===j.css(e,"boxSizing",!1,f),g=l?ht(e,t,l,m,f):0;return m&&p&&(g-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(f[t])-ht(e,t,"border",!1,f)-.5)),g&&(u=de.exec(o))&&"px"!==(u[3]||"px")&&(e.style[t]=o,o=j.css(e,t)),ct(0,o,g)}}})),j.cssHooks.marginLeft=it(S.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(tt(e,"marginLeft"))||e.getBoundingClientRect().left-Qe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),j.each({margin:"",padding:"",border:"Width"},(function(e,t){j.cssHooks[e+t]={expand:function(o){for(var l=0,u={},f="string"==typeof o?o.split(" "):[o];l<4;l++)u[e+fe[l]+t]=f[l]||f[l-2]||f[0];return u}},"margin"!==e&&(j.cssHooks[e+t].set=ct)})),j.fn.extend({css:function(e,t){return J(this,(function(e,t,o){var l,u,f={},p=0;if(Array.isArray(t)){for(l=Xe(e),u=t.length;p<u;p++)f[t[p]]=j.css(e,t[p],!1,l);return f}return void 0!==o?j.style(e,t,o):j.css(e,t)}),e,t,arguments.length>1)}}),j.Tween=ft,ft.prototype={constructor:ft,init:function(e,t,o,l,u,f){this.elem=e,this.prop=o,this.easing=u||j.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=l,this.unit=f||(j.cssNumber[o]?"":"px")},cur:function(){var e=ft.propHooks[this.prop];return e&&e.get?e.get(this):ft.propHooks._default.get(this)},run:function(e){var t,o=ft.propHooks[this.prop];return this.options.duration?this.pos=t=j.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),o&&o.set?o.set(this):ft.propHooks._default.set(this),this}},ft.prototype.init.prototype=ft.prototype,ft.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=j.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){j.fx.step[e.prop]?j.fx.step[e.prop](e):1!==e.elem.nodeType||!j.cssHooks[e.prop]&&null==e.elem.style[st(e.prop)]?e.elem[e.prop]=e.now:j.style(e.elem,e.prop,e.now+e.unit)}}},ft.propHooks.scrollTop=ft.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},j.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},j.fx=ft.prototype.init,j.fx.step={};var pt,mt,gt=/^(?:toggle|show|hide)$/,yt=/queueHooks$/;function vt(){mt&&(!1===A.hidden&&l.requestAnimationFrame?l.requestAnimationFrame(vt):l.setTimeout(vt,j.fx.interval),j.fx.tick())}function bt(){return l.setTimeout((function(){pt=void 0})),pt=Date.now()}function _t(e,t){var o,l=0,u={height:e};for(t=t?1:0;l<4;l+=2-t)u["margin"+(o=fe[l])]=u["padding"+o]=e;return t&&(u.opacity=u.width=e),u}function wt(e,t,o){for(var l,u=(kt.tweeners[t]||[]).concat(kt.tweeners["*"]),f=0,p=u.length;f<p;f++)if(l=u[f].call(o,t,e))return l}function kt(e,t,o){var l,u,f=0,p=kt.prefilters.length,m=j.Deferred().always((function(){delete g.elem})),g=function(){if(u)return!1;for(var t=pt||bt(),o=Math.max(0,y.startTime+y.duration-t),l=1-(o/y.duration||0),f=0,p=y.tweens.length;f<p;f++)y.tweens[f].run(l);return m.notifyWith(e,[y,l,o]),l<1&&p?o:(p||m.notifyWith(e,[y,1,0]),m.resolveWith(e,[y]),!1)},y=m.promise({elem:e,props:j.extend({},t),opts:j.extend(!0,{specialEasing:{},easing:j.easing._default},o),originalProperties:t,originalOptions:o,startTime:pt||bt(),duration:o.duration,tweens:[],createTween:function(t,o){var l=j.Tween(e,y.opts,t,o,y.opts.specialEasing[t]||y.opts.easing);return y.tweens.push(l),l},stop:function(t){var o=0,l=t?y.tweens.length:0;if(u)return this;for(u=!0;o<l;o++)y.tweens[o].run(1);return t?(m.notifyWith(e,[y,1,0]),m.resolveWith(e,[y,t])):m.rejectWith(e,[y,t]),this}}),v=y.props;for(function(e,t){var o,l,u,f,p;for(o in e)if(u=t[l=ne(o)],f=e[o],Array.isArray(f)&&(u=f[1],f=e[o]=f[0]),o!==l&&(e[l]=f,delete e[o]),(p=j.cssHooks[l])&&"expand"in p)for(o in f=p.expand(f),delete e[l],f)o in e||(e[o]=f[o],t[o]=u);else t[l]=u}(v,y.opts.specialEasing);f<p;f++)if(l=kt.prefilters[f].call(y,e,v,y.opts))return T(l.stop)&&(j._queueHooks(y.elem,y.opts.queue).stop=l.stop.bind(l)),l;return j.map(v,wt,y),T(y.opts.start)&&y.opts.start.call(e,y),y.progress(y.opts.progress).done(y.opts.done,y.opts.complete).fail(y.opts.fail).always(y.opts.always),j.fx.timer(j.extend(g,{elem:e,anim:y,queue:y.opts.queue})),y}j.Animation=j.extend(kt,{tweeners:{"*":[function(e,t){var o=this.createTween(e,t);return ve(o.elem,e,de.exec(t),o),o}]},tweener:function(e,t){T(e)?(t=e,e=["*"]):e=e.match(K);for(var o,l=0,u=e.length;l<u;l++)o=e[l],kt.tweeners[o]=kt.tweeners[o]||[],kt.tweeners[o].unshift(t)},prefilters:[function(e,t,o){var l,u,f,p,m,g,y,v,b="width"in t||"height"in t,_=this,w={},k=e.style,x=e.nodeType&&ye(e),S=se.get(e,"fxshow");for(l in o.queue||(null==(p=j._queueHooks(e,"fx")).unqueued&&(p.unqueued=0,m=p.empty.fire,p.empty.fire=function(){p.unqueued||m()}),p.unqueued++,_.always((function(){_.always((function(){p.unqueued--,j.queue(e,"fx").length||p.empty.fire()}))}))),t)if(u=t[l],gt.test(u)){if(delete t[l],f=f||"toggle"===u,u===(x?"hide":"show")){if("show"!==u||!S||void 0===S[l])continue;x=!0}w[l]=S&&S[l]||j.style(e,l)}if((g=!j.isEmptyObject(t))||!j.isEmptyObject(w))for(l in b&&1===e.nodeType&&(o.overflow=[k.overflow,k.overflowX,k.overflowY],null==(y=S&&S.display)&&(y=se.get(e,"display")),"none"===(v=j.css(e,"display"))&&(y?v=y:(we([e],!0),y=e.style.display||y,v=j.css(e,"display"),we([e]))),("inline"===v||"inline-block"===v&&null!=y)&&"none"===j.css(e,"float")&&(g||(_.done((function(){k.display=y})),null==y&&(v=k.display,y="none"===v?"":v)),k.display="inline-block")),o.overflow&&(k.overflow="hidden",_.always((function(){k.overflow=o.overflow[0],k.overflowX=o.overflow[1],k.overflowY=o.overflow[2]}))),g=!1,w)g||(S?"hidden"in S&&(x=S.hidden):S=se.access(e,"fxshow",{display:y}),f&&(S.hidden=!x),x&&we([e],!0),_.done((function(){for(l in x||we([e]),se.remove(e,"fxshow"),w)j.style(e,l,w[l])}))),g=wt(x?S[l]:0,l,_),l in S||(S[l]=g.start,x&&(g.end=g.start,g.start=0))}],prefilter:function(e,t){t?kt.prefilters.unshift(e):kt.prefilters.push(e)}}),j.speed=function(e,t,o){var l=e&&"object"==typeof e?j.extend({},e):{complete:o||!o&&t||T(e)&&e,duration:e,easing:o&&t||t&&!T(t)&&t};return j.fx.off?l.duration=0:"number"!=typeof l.duration&&(l.duration in j.fx.speeds?l.duration=j.fx.speeds[l.duration]:l.duration=j.fx.speeds._default),null!=l.queue&&!0!==l.queue||(l.queue="fx"),l.old=l.complete,l.complete=function(){T(l.old)&&l.old.call(this),l.queue&&j.dequeue(this,l.queue)},l},j.fn.extend({fadeTo:function(e,t,o,l){return this.filter(ye).css("opacity",0).show().end().animate({opacity:t},e,o,l)},animate:function(e,t,o,l){var u=j.isEmptyObject(e),f=j.speed(t,o,l),p=function(){var t=kt(this,j.extend({},e),f);(u||se.get(this,"finish"))&&t.stop(!0)};return p.finish=p,u||!1===f.queue?this.each(p):this.queue(f.queue,p)},stop:function(e,t,o){var l=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof e&&(o=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,u=null!=e&&e+"queueHooks",f=j.timers,p=se.get(this);if(u)p[u]&&p[u].stop&&l(p[u]);else for(u in p)p[u]&&p[u].stop&&yt.test(u)&&l(p[u]);for(u=f.length;u--;)f[u].elem!==this||null!=e&&f[u].queue!==e||(f[u].anim.stop(o),t=!1,f.splice(u,1));!t&&o||j.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,o=se.get(this),l=o[e+"queue"],u=o[e+"queueHooks"],f=j.timers,p=l?l.length:0;for(o.finish=!0,j.queue(this,e,[]),u&&u.stop&&u.stop.call(this,!0),t=f.length;t--;)f[t].elem===this&&f[t].queue===e&&(f[t].anim.stop(!0),f.splice(t,1));for(t=0;t<p;t++)l[t]&&l[t].finish&&l[t].finish.call(this);delete o.finish}))}}),j.each(["toggle","show","hide"],(function(e,t){var o=j.fn[t];j.fn[t]=function(e,l,u){return null==e||"boolean"==typeof e?o.apply(this,arguments):this.animate(_t(t,!0),e,l,u)}})),j.each({slideDown:_t("show"),slideUp:_t("hide"),slideToggle:_t("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){j.fn[e]=function(e,o,l){return this.animate(t,e,o,l)}})),j.timers=[],j.fx.tick=function(){var e,t=0,o=j.timers;for(pt=Date.now();t<o.length;t++)(e=o[t])()||o[t]!==e||o.splice(t--,1);o.length||j.fx.stop(),pt=void 0},j.fx.timer=function(e){j.timers.push(e),j.fx.start()},j.fx.interval=13,j.fx.start=function(){mt||(mt=!0,vt())},j.fx.stop=function(){mt=null},j.fx.speeds={slow:600,fast:200,_default:400},j.fn.delay=function(e,t){return e=j.fx&&j.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,o){var u=l.setTimeout(t,e);o.stop=function(){l.clearTimeout(u)}}))},function(){var e=A.createElement("input"),t=A.createElement("select").appendChild(A.createElement("option"));e.type="checkbox",S.checkOn=""!==e.value,S.optSelected=t.selected,(e=A.createElement("input")).value="t",e.type="radio",S.radioValue="t"===e.value}();var xt,St=j.expr.attrHandle;j.fn.extend({attr:function(e,t){return J(this,j.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){j.removeAttr(this,e)}))}}),j.extend({attr:function(e,t,o){var l,u,f=e.nodeType;if(3!==f&&8!==f&&2!==f)return void 0===e.getAttribute?j.prop(e,t,o):(1===f&&j.isXMLDoc(e)||(u=j.attrHooks[t.toLowerCase()]||(j.expr.match.bool.test(t)?xt:void 0)),void 0!==o?null===o?void j.removeAttr(e,t):u&&"set"in u&&void 0!==(l=u.set(e,o,t))?l:(e.setAttribute(t,o+""),o):u&&"get"in u&&null!==(l=u.get(e,t))?l:null==(l=j.find.attr(e,t))?void 0:l)},attrHooks:{type:{set:function(e,t){if(!S.radioValue&&"radio"===t&&B(e,"input")){var o=e.value;return e.setAttribute("type",t),o&&(e.value=o),t}}}},removeAttr:function(e,t){var o,l=0,u=t&&t.match(K);if(u&&1===e.nodeType)for(;o=u[l++];)e.removeAttribute(o)}}),xt={set:function(e,t,o){return!1===t?j.removeAttr(e,o):e.setAttribute(o,o),o}},j.each(j.expr.match.bool.source.match(/\w+/g),(function(e,t){var o=St[t]||j.find.attr;St[t]=function(e,t,l){var u,f,p=t.toLowerCase();return l||(f=St[p],St[p]=u,u=null!=o(e,t,l)?p:null,St[p]=f),u}}));var Tt=/^(?:input|select|textarea|button)$/i,Ct=/^(?:a|area)$/i;function At(e){return(e.match(K)||[]).join(" ")}function Pt(e){return e.getAttribute&&e.getAttribute("class")||""}function Et(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(K)||[]}j.fn.extend({prop:function(e,t){return J(this,j.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[j.propFix[e]||e]}))}}),j.extend({prop:function(e,t,o){var l,u,f=e.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&j.isXMLDoc(e)||(t=j.propFix[t]||t,u=j.propHooks[t]),void 0!==o?u&&"set"in u&&void 0!==(l=u.set(e,o,t))?l:e[t]=o:u&&"get"in u&&null!==(l=u.get(e,t))?l:e[t]},propHooks:{tabIndex:{get:function(e){var t=j.find.attr(e,"tabindex");return t?parseInt(t,10):Tt.test(e.nodeName)||Ct.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),S.optSelected||(j.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),j.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){j.propFix[this.toLowerCase()]=this})),j.fn.extend({addClass:function(e){var t,o,l,u,f,p;return T(e)?this.each((function(t){j(this).addClass(e.call(this,t,Pt(this)))})):(t=Et(e)).length?this.each((function(){if(l=Pt(this),o=1===this.nodeType&&" "+At(l)+" "){for(f=0;f<t.length;f++)u=t[f],o.indexOf(" "+u+" ")<0&&(o+=u+" ");p=At(o),l!==p&&this.setAttribute("class",p)}})):this},removeClass:function(e){var t,o,l,u,f,p;return T(e)?this.each((function(t){j(this).removeClass(e.call(this,t,Pt(this)))})):arguments.length?(t=Et(e)).length?this.each((function(){if(l=Pt(this),o=1===this.nodeType&&" "+At(l)+" "){for(f=0;f<t.length;f++)for(u=t[f];o.indexOf(" "+u+" ")>-1;)o=o.replace(" "+u+" "," ");p=At(o),l!==p&&this.setAttribute("class",p)}})):this:this.attr("class","")},toggleClass:function(e,t){var o,l,u,f,p=typeof e,m="string"===p||Array.isArray(e);return T(e)?this.each((function(o){j(this).toggleClass(e.call(this,o,Pt(this),t),t)})):"boolean"==typeof t&&m?t?this.addClass(e):this.removeClass(e):(o=Et(e),this.each((function(){if(m)for(f=j(this),u=0;u<o.length;u++)l=o[u],f.hasClass(l)?f.removeClass(l):f.addClass(l);else void 0!==e&&"boolean"!==p||((l=Pt(this))&&se.set(this,"__className__",l),this.setAttribute&&this.setAttribute("class",l||!1===e?"":se.get(this,"__className__")||""))})))},hasClass:function(e){var t,o,l=0;for(t=" "+e+" ";o=this[l++];)if(1===o.nodeType&&(" "+At(Pt(o))+" ").indexOf(t)>-1)return!0;return!1}});var Dt=/\r/g;j.fn.extend({val:function(e){var t,o,l,u=this[0];return arguments.length?(l=T(e),this.each((function(o){var u;1===this.nodeType&&(null==(u=l?e.call(this,o,j(this).val()):e)?u="":"number"==typeof u?u+="":Array.isArray(u)&&(u=j.map(u,(function(e){return null==e?"":e+""}))),(t=j.valHooks[this.type]||j.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,u,"value")||(this.value=u))}))):u?(t=j.valHooks[u.type]||j.valHooks[u.nodeName.toLowerCase()])&&"get"in t&&void 0!==(o=t.get(u,"value"))?o:"string"==typeof(o=u.value)?o.replace(Dt,""):null==o?"":o:void 0}}),j.extend({valHooks:{option:{get:function(e){var t=j.find.attr(e,"value");return null!=t?t:At(j.text(e))}},select:{get:function(e){var t,o,l,u=e.options,f=e.selectedIndex,p="select-one"===e.type,m=p?null:[],g=p?f+1:u.length;for(l=f<0?g:p?f:0;l<g;l++)if(((o=u[l]).selected||l===f)&&!o.disabled&&(!o.parentNode.disabled||!B(o.parentNode,"optgroup"))){if(t=j(o).val(),p)return t;m.push(t)}return m},set:function(e,t){for(var o,l,u=e.options,f=j.makeArray(t),p=u.length;p--;)((l=u[p]).selected=j.inArray(j.valHooks.option.get(l),f)>-1)&&(o=!0);return o||(e.selectedIndex=-1),f}}}}),j.each(["radio","checkbox"],(function(){j.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=j.inArray(j(e).val(),t)>-1}},S.checkOn||(j.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),S.focusin="onfocusin"in l;var Ot=/^(?:focusinfocus|focusoutblur)$/,jt=function(e){e.stopPropagation()};j.extend(j.event,{trigger:function(e,t,o,u){var f,p,m,g,y,v,b,_,k=[o||A],x=w.call(e,"type")?e.type:e,S=w.call(e,"namespace")?e.namespace.split("."):[];if(p=_=m=o=o||A,3!==o.nodeType&&8!==o.nodeType&&!Ot.test(x+j.event.triggered)&&(x.indexOf(".")>-1&&(S=x.split("."),x=S.shift(),S.sort()),y=x.indexOf(":")<0&&"on"+x,(e=e[j.expando]?e:new j.Event(x,"object"==typeof e&&e)).isTrigger=u?2:3,e.namespace=S.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+S.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=o),t=null==t?[e]:j.makeArray(t,[e]),b=j.event.special[x]||{},u||!b.trigger||!1!==b.trigger.apply(o,t))){if(!u&&!b.noBubble&&!C(o)){for(g=b.delegateType||x,Ot.test(g+x)||(p=p.parentNode);p;p=p.parentNode)k.push(p),m=p;m===(o.ownerDocument||A)&&k.push(m.defaultView||m.parentWindow||l)}for(f=0;(p=k[f++])&&!e.isPropagationStopped();)_=p,e.type=f>1?g:b.bindType||x,(v=(se.get(p,"events")||Object.create(null))[e.type]&&se.get(p,"handle"))&&v.apply(p,t),(v=y&&p[y])&&v.apply&&re(p)&&(e.result=v.apply(p,t),!1===e.result&&e.preventDefault());return e.type=x,u||e.isDefaultPrevented()||b._default&&!1!==b._default.apply(k.pop(),t)||!re(o)||y&&T(o[x])&&!C(o)&&((m=o[y])&&(o[y]=null),j.event.triggered=x,e.isPropagationStopped()&&_.addEventListener(x,jt),o[x](),e.isPropagationStopped()&&_.removeEventListener(x,jt),j.event.triggered=void 0,m&&(o[y]=m)),e.result}},simulate:function(e,t,o){var l=j.extend(new j.Event,o,{type:e,isSimulated:!0});j.event.trigger(l,null,t)}}),j.fn.extend({trigger:function(e,t){return this.each((function(){j.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var o=this[0];if(o)return j.event.trigger(e,t,o,!0)}}),S.focusin||j.each({focus:"focusin",blur:"focusout"},(function(e,t){var o=function(e){j.event.simulate(t,e.target,j.event.fix(e))};j.event.special[t]={setup:function(){var l=this.ownerDocument||this.document||this,u=se.access(l,t);u||l.addEventListener(e,o,!0),se.access(l,t,(u||0)+1)},teardown:function(){var l=this.ownerDocument||this.document||this,u=se.access(l,t)-1;u?se.access(l,t,u):(l.removeEventListener(e,o,!0),se.remove(l,t))}}}));var It=l.location,Nt={guid:Date.now()},Mt=/\?/;j.parseXML=function(e){var t,o;if(!e||"string"!=typeof e)return null;try{t=(new l.DOMParser).parseFromString(e,"text/xml")}catch(e){}return o=t&&t.getElementsByTagName("parsererror")[0],t&&!o||j.error("Invalid XML: "+(o?j.map(o.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Lt=/\[\]$/,Rt=/\r?\n/g,Bt=/^(?:submit|button|image|reset|file)$/i,Ht=/^(?:input|select|textarea|keygen)/i;function Wt(e,t,o,l){var u;if(Array.isArray(t))j.each(t,(function(t,u){o||Lt.test(e)?l(e,u):Wt(e+"["+("object"==typeof u&&null!=u?t:"")+"]",u,o,l)}));else if(o||"object"!==D(t))l(e,t);else for(u in t)Wt(e+"["+u+"]",t[u],o,l)}j.param=function(e,t){var o,l=[],u=function(e,t){var o=T(t)?t():t;l[l.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==o?"":o)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!j.isPlainObject(e))j.each(e,(function(){u(this.name,this.value)}));else for(o in e)Wt(o,e[o],t,u);return l.join("&")},j.fn.extend({serialize:function(){return j.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=j.prop(this,"elements");return e?j.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!j(this).is(":disabled")&&Ht.test(this.nodeName)&&!Bt.test(e)&&(this.checked||!Se.test(e))})).map((function(e,t){var o=j(this).val();return null==o?null:Array.isArray(o)?j.map(o,(function(e){return{name:t.name,value:e.replace(Rt,"\r\n")}})):{name:t.name,value:o.replace(Rt,"\r\n")}})).get()}});var Gt=/%20/g,qt=/#.*$/,zt=/([?&])_=[^&]*/,Ut=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ft=/^(?:GET|HEAD)$/,Kt=/^\/\//,Yt={},$t={},Vt="*/".concat("*"),Xt=A.createElement("a");function Qt(e){return function(t,o){"string"!=typeof t&&(o=t,t="*");var l,u=0,f=t.toLowerCase().match(K)||[];if(T(o))for(;l=f[u++];)"+"===l[0]?(l=l.slice(1)||"*",(e[l]=e[l]||[]).unshift(o)):(e[l]=e[l]||[]).push(o)}}function Zt(e,t,o,l){var u={},f=e===$t;function p(m){var g;return u[m]=!0,j.each(e[m]||[],(function(e,m){var y=m(t,o,l);return"string"!=typeof y||f||u[y]?f?!(g=y):void 0:(t.dataTypes.unshift(y),p(y),!1)})),g}return p(t.dataTypes[0])||!u["*"]&&p("*")}function Jt(e,t){var o,l,u=j.ajaxSettings.flatOptions||{};for(o in t)void 0!==t[o]&&((u[o]?e:l||(l={}))[o]=t[o]);return l&&j.extend(!0,e,l),e}Xt.href=It.href,j.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:It.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(It.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":j.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Jt(Jt(e,j.ajaxSettings),t):Jt(j.ajaxSettings,e)},ajaxPrefilter:Qt(Yt),ajaxTransport:Qt($t),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var o,u,f,p,m,g,y,v,b,_,w=j.ajaxSetup({},t),k=w.context||w,x=w.context&&(k.nodeType||k.jquery)?j(k):j.event,S=j.Deferred(),T=j.Callbacks("once memory"),C=w.statusCode||{},P={},E={},D="canceled",O={readyState:0,getResponseHeader:function(e){var t;if(y){if(!p)for(p={};t=Ut.exec(f);)p[t[1].toLowerCase()+" "]=(p[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=p[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return y?f:null},setRequestHeader:function(e,t){return null==y&&(e=E[e.toLowerCase()]=E[e.toLowerCase()]||e,P[e]=t),this},overrideMimeType:function(e){return null==y&&(w.mimeType=e),this},statusCode:function(e){var t;if(e)if(y)O.always(e[O.status]);else for(t in e)C[t]=[C[t],e[t]];return this},abort:function(e){var t=e||D;return o&&o.abort(t),I(0,t),this}};if(S.promise(O),w.url=((e||w.url||It.href)+"").replace(Kt,It.protocol+"//"),w.type=t.method||t.type||w.method||w.type,w.dataTypes=(w.dataType||"*").toLowerCase().match(K)||[""],null==w.crossDomain){g=A.createElement("a");try{g.href=w.url,g.href=g.href,w.crossDomain=Xt.protocol+"//"+Xt.host!=g.protocol+"//"+g.host}catch(e){w.crossDomain=!0}}if(w.data&&w.processData&&"string"!=typeof w.data&&(w.data=j.param(w.data,w.traditional)),Zt(Yt,w,t,O),y)return O;for(b in(v=j.event&&w.global)&&0==j.active++&&j.event.trigger("ajaxStart"),w.type=w.type.toUpperCase(),w.hasContent=!Ft.test(w.type),u=w.url.replace(qt,""),w.hasContent?w.data&&w.processData&&0===(w.contentType||"").indexOf("application/x-www-form-urlencoded")&&(w.data=w.data.replace(Gt,"+")):(_=w.url.slice(u.length),w.data&&(w.processData||"string"==typeof w.data)&&(u+=(Mt.test(u)?"&":"?")+w.data,delete w.data),!1===w.cache&&(u=u.replace(zt,"$1"),_=(Mt.test(u)?"&":"?")+"_="+Nt.guid+++_),w.url=u+_),w.ifModified&&(j.lastModified[u]&&O.setRequestHeader("If-Modified-Since",j.lastModified[u]),j.etag[u]&&O.setRequestHeader("If-None-Match",j.etag[u])),(w.data&&w.hasContent&&!1!==w.contentType||t.contentType)&&O.setRequestHeader("Content-Type",w.contentType),O.setRequestHeader("Accept",w.dataTypes[0]&&w.accepts[w.dataTypes[0]]?w.accepts[w.dataTypes[0]]+("*"!==w.dataTypes[0]?", "+Vt+"; q=0.01":""):w.accepts["*"]),w.headers)O.setRequestHeader(b,w.headers[b]);if(w.beforeSend&&(!1===w.beforeSend.call(k,O,w)||y))return O.abort();if(D="abort",T.add(w.complete),O.done(w.success),O.fail(w.error),o=Zt($t,w,t,O)){if(O.readyState=1,v&&x.trigger("ajaxSend",[O,w]),y)return O;w.async&&w.timeout>0&&(m=l.setTimeout((function(){O.abort("timeout")}),w.timeout));try{y=!1,o.send(P,I)}catch(e){if(y)throw e;I(-1,e)}}else I(-1,"No Transport");function I(e,t,p,g){var b,_,A,P,E,D=t;y||(y=!0,m&&l.clearTimeout(m),o=void 0,f=g||"",O.readyState=e>0?4:0,b=e>=200&&e<300||304===e,p&&(P=function(e,t,o){for(var l,u,f,p,m=e.contents,g=e.dataTypes;"*"===g[0];)g.shift(),void 0===l&&(l=e.mimeType||t.getResponseHeader("Content-Type"));if(l)for(u in m)if(m[u]&&m[u].test(l)){g.unshift(u);break}if(g[0]in o)f=g[0];else{for(u in o){if(!g[0]||e.converters[u+" "+g[0]]){f=u;break}p||(p=u)}f=f||p}if(f)return f!==g[0]&&g.unshift(f),o[f]}(w,O,p)),!b&&j.inArray("script",w.dataTypes)>-1&&j.inArray("json",w.dataTypes)<0&&(w.converters["text script"]=function(){}),P=function(e,t,o,l){var u,f,p,m,g,y={},v=e.dataTypes.slice();if(v[1])for(p in e.converters)y[p.toLowerCase()]=e.converters[p];for(f=v.shift();f;)if(e.responseFields[f]&&(o[e.responseFields[f]]=t),!g&&l&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),g=f,f=v.shift())if("*"===f)f=g;else if("*"!==g&&g!==f){if(!(p=y[g+" "+f]||y["* "+f]))for(u in y)if((m=u.split(" "))[1]===f&&(p=y[g+" "+m[0]]||y["* "+m[0]])){!0===p?p=y[u]:!0!==y[u]&&(f=m[0],v.unshift(m[1]));break}if(!0!==p)if(p&&e.throws)t=p(t);else try{t=p(t)}catch(e){return{state:"parsererror",error:p?e:"No conversion from "+g+" to "+f}}}return{state:"success",data:t}}(w,P,O,b),b?(w.ifModified&&((E=O.getResponseHeader("Last-Modified"))&&(j.lastModified[u]=E),(E=O.getResponseHeader("etag"))&&(j.etag[u]=E)),204===e||"HEAD"===w.type?D="nocontent":304===e?D="notmodified":(D=P.state,_=P.data,b=!(A=P.error))):(A=D,!e&&D||(D="error",e<0&&(e=0))),O.status=e,O.statusText=(t||D)+"",b?S.resolveWith(k,[_,D,O]):S.rejectWith(k,[O,D,A]),O.statusCode(C),C=void 0,v&&x.trigger(b?"ajaxSuccess":"ajaxError",[O,w,b?_:A]),T.fireWith(k,[O,D]),v&&(x.trigger("ajaxComplete",[O,w]),--j.active||j.event.trigger("ajaxStop")))}return O},getJSON:function(e,t,o){return j.get(e,t,o,"json")},getScript:function(e,t){return j.get(e,void 0,t,"script")}}),j.each(["get","post"],(function(e,t){j[t]=function(e,o,l,u){return T(o)&&(u=u||l,l=o,o=void 0),j.ajax(j.extend({url:e,type:t,dataType:u,data:o,success:l},j.isPlainObject(e)&&e))}})),j.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),j._evalUrl=function(e,t,o){return j.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){j.globalEval(e,t,o)}})},j.fn.extend({wrapAll:function(e){var t;return this[0]&&(T(e)&&(e=e.call(this[0])),t=j(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return T(e)?this.each((function(t){j(this).wrapInner(e.call(this,t))})):this.each((function(){var t=j(this),o=t.contents();o.length?o.wrapAll(e):t.append(e)}))},wrap:function(e){var t=T(e);return this.each((function(o){j(this).wrapAll(t?e.call(this,o):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){j(this).replaceWith(this.childNodes)})),this}}),j.expr.pseudos.hidden=function(e){return!j.expr.pseudos.visible(e)},j.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},j.ajaxSettings.xhr=function(){try{return new l.XMLHttpRequest}catch(e){}};var ei={0:200,1223:204},ti=j.ajaxSettings.xhr();S.cors=!!ti&&"withCredentials"in ti,S.ajax=ti=!!ti,j.ajaxTransport((function(e){var t,o;if(S.cors||ti&&!e.crossDomain)return{send:function(u,f){var p,m=e.xhr();if(m.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(p in e.xhrFields)m[p]=e.xhrFields[p];for(p in e.mimeType&&m.overrideMimeType&&m.overrideMimeType(e.mimeType),e.crossDomain||u["X-Requested-With"]||(u["X-Requested-With"]="XMLHttpRequest"),u)m.setRequestHeader(p,u[p]);t=function(e){return function(){t&&(t=o=m.onload=m.onerror=m.onabort=m.ontimeout=m.onreadystatechange=null,"abort"===e?m.abort():"error"===e?"number"!=typeof m.status?f(0,"error"):f(m.status,m.statusText):f(ei[m.status]||m.status,m.statusText,"text"!==(m.responseType||"text")||"string"!=typeof m.responseText?{binary:m.response}:{text:m.responseText},m.getAllResponseHeaders()))}},m.onload=t(),o=m.onerror=m.ontimeout=t("error"),void 0!==m.onabort?m.onabort=o:m.onreadystatechange=function(){4===m.readyState&&l.setTimeout((function(){t&&o()}))},t=t("abort");try{m.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),j.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),j.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return j.globalEval(e),e}}}),j.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),j.ajaxTransport("script",(function(e){var t,o;if(e.crossDomain||e.scriptAttrs)return{send:function(l,u){t=j("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",o=function(e){t.remove(),o=null,e&&u("error"===e.type?404:200,e.type)}),A.head.appendChild(t[0])},abort:function(){o&&o()}}}));var ii,ni=[],ri=/(=)\?(?=&|$)|\?\?/;j.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ni.pop()||j.expando+"_"+Nt.guid++;return this[e]=!0,e}}),j.ajaxPrefilter("json jsonp",(function(e,t,o){var u,f,p,m=!1!==e.jsonp&&(ri.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ri.test(e.data)&&"data");if(m||"jsonp"===e.dataTypes[0])return u=e.jsonpCallback=T(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,m?e[m]=e[m].replace(ri,"$1"+u):!1!==e.jsonp&&(e.url+=(Mt.test(e.url)?"&":"?")+e.jsonp+"="+u),e.converters["script json"]=function(){return p||j.error(u+" was not called"),p[0]},e.dataTypes[0]="json",f=l[u],l[u]=function(){p=arguments},o.always((function(){void 0===f?j(l).removeProp(u):l[u]=f,e[u]&&(e.jsonpCallback=t.jsonpCallback,ni.push(u)),p&&T(f)&&f(p[0]),p=f=void 0})),"script"})),S.createHTMLDocument=((ii=A.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===ii.childNodes.length),j.parseHTML=function(e,t,o){return"string"!=typeof e?[]:("boolean"==typeof t&&(o=t,t=!1),t||(S.createHTMLDocument?((l=(t=A.implementation.createHTMLDocument("")).createElement("base")).href=A.location.href,t.head.appendChild(l)):t=A),f=!o&&[],(u=H.exec(e))?[t.createElement(u[1])]:(u=Oe([e],t,f),f&&f.length&&j(f).remove(),j.merge([],u.childNodes)));var l,u,f},j.fn.load=function(e,t,o){var l,u,f,p=this,m=e.indexOf(" ");return m>-1&&(l=At(e.slice(m)),e=e.slice(0,m)),T(t)?(o=t,t=void 0):t&&"object"==typeof t&&(u="POST"),p.length>0&&j.ajax({url:e,type:u||"GET",dataType:"html",data:t}).done((function(e){f=arguments,p.html(l?j("<div>").append(j.parseHTML(e)).find(l):e)})).always(o&&function(e,t){p.each((function(){o.apply(this,f||[e.responseText,t,e])}))}),this},j.expr.pseudos.animated=function(e){return j.grep(j.timers,(function(t){return e===t.elem})).length},j.offset={setOffset:function(e,t,o){var l,u,f,p,m,g,y=j.css(e,"position"),v=j(e),b={};"static"===y&&(e.style.position="relative"),m=v.offset(),f=j.css(e,"top"),g=j.css(e,"left"),("absolute"===y||"fixed"===y)&&(f+g).indexOf("auto")>-1?(p=(l=v.position()).top,u=l.left):(p=parseFloat(f)||0,u=parseFloat(g)||0),T(t)&&(t=t.call(e,o,j.extend({},m))),null!=t.top&&(b.top=t.top-m.top+p),null!=t.left&&(b.left=t.left-m.left+u),"using"in t?t.using.call(e,b):v.css(b)}},j.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){j.offset.setOffset(this,e,t)}));var t,o,l=this[0];return l?l.getClientRects().length?(t=l.getBoundingClientRect(),o=l.ownerDocument.defaultView,{top:t.top+o.pageYOffset,left:t.left+o.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,o,l=this[0],u={top:0,left:0};if("fixed"===j.css(l,"position"))t=l.getBoundingClientRect();else{for(t=this.offset(),o=l.ownerDocument,e=l.offsetParent||o.documentElement;e&&(e===o.body||e===o.documentElement)&&"static"===j.css(e,"position");)e=e.parentNode;e&&e!==l&&1===e.nodeType&&((u=j(e).offset()).top+=j.css(e,"borderTopWidth",!0),u.left+=j.css(e,"borderLeftWidth",!0))}return{top:t.top-u.top-j.css(l,"marginTop",!0),left:t.left-u.left-j.css(l,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===j.css(e,"position");)e=e.offsetParent;return e||pe}))}}),j.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var o="pageYOffset"===t;j.fn[e]=function(l){return J(this,(function(e,l,u){var f;if(C(e)?f=e:9===e.nodeType&&(f=e.defaultView),void 0===u)return f?f[t]:e[l];f?f.scrollTo(o?f.pageXOffset:u,o?u:f.pageYOffset):e[l]=u}),e,l,arguments.length)}})),j.each(["top","left"],(function(e,t){j.cssHooks[t]=it(S.pixelPosition,(function(e,o){if(o)return o=tt(e,t),$e.test(o)?j(e).position()[t]+"px":o}))})),j.each({Height:"height",Width:"width"},(function(e,t){j.each({padding:"inner"+e,content:t,"":"outer"+e},(function(o,l){j.fn[l]=function(u,f){var p=arguments.length&&(o||"boolean"!=typeof u),m=o||(!0===u||!0===f?"margin":"border");return J(this,(function(t,o,u){var f;return C(t)?0===l.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(f=t.documentElement,Math.max(t.body["scroll"+e],f["scroll"+e],t.body["offset"+e],f["offset"+e],f["client"+e])):void 0===u?j.css(t,o,m):j.style(t,o,u,m)}),t,p?u:void 0,p)}}))})),j.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){j.fn[t]=function(e){return this.on(t,e)}})),j.fn.extend({bind:function(e,t,o){return this.on(e,null,t,o)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,o,l){return this.on(t,e,o,l)},undelegate:function(e,t,o){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",o)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),j.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){j.fn[t]=function(e,o){return arguments.length>0?this.on(t,null,e,o):this.trigger(t)}}));var oi=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;j.proxy=function(e,t){var o,l,u;if("string"==typeof t&&(o=e[t],t=e,e=o),T(e))return l=m.call(arguments,2),u=function(){return e.apply(t||this,l.concat(m.call(arguments)))},u.guid=e.guid=e.guid||j.guid++,u},j.holdReady=function(e){e?j.readyWait++:j.ready(!0)},j.isArray=Array.isArray,j.parseJSON=JSON.parse,j.nodeName=B,j.isFunction=T,j.isWindow=C,j.camelCase=ne,j.type=D,j.now=Date.now,j.isNumeric=function(e){var t=j.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},j.trim=function(e){return null==e?"":(e+"").replace(oi,"$1")},void 0===(o=function(){return j}.apply(t,[]))||(e.exports=o);var si=l.jQuery,ai=l.$;return j.noConflict=function(e){return l.$===j&&(l.$=ai),e&&l.jQuery===j&&(l.jQuery=si),j},void 0===u&&(l.jQuery=l.$=j),j},"object"==typeof e.exports?e.exports=l.document?u(l,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return u(e)}:u(l)},"./node_modules/@cdot/cbor/dist/mjs/index.js":function(e,t,o){o.r(t),o.d(t,{DataInStream:function(){return w},DataOutStream:function(){return k},Decoder:function(){return x},Encoder:function(){return S},IDREFHandler:function(){return T},KeyDictionaryHandler:function(){return C},MemoryInStream:function(){return A},MemoryOutStream:function(){return P},TagHandler:function(){return E},TypeMapHandler:function(){return D}});var l={d:(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},u={};l.d(u,{rK:()=>i,Fv:()=>a,h:()=>n,hm:()=>c,P8:()=>_,Ol:()=>v,Zz:()=>s,nr:()=>d,fq:()=>r,Vy:()=>m});class r{constructor(e){this.options=e||{}}encode(e,t){return e}decode(e,t){}startEncoding(e){}finishEncoding(e){}finishDecoding(e,t){}createArray(e){return[]}createObject(e,t){return t?Object.create(t):{}}encodeKey(e,t){if(!/^_/.test(e))return e}decodeKey(e,t){return e}}class i{readFloat16(){throw Error("DataInStream.readFloat16")}readFloat32(){throw Error("DataInStream.readFloat32")}readFloat64(){throw Error("DataInStream.readFloat64")}readUint8(){throw Error("DataInStream.readUint8")}readUint16(){throw Error("DataInStream.readUint16")}readUint32(){throw Error("DataInStream.readUint32")}readUint64(){}readUint8Array(e){throw Error("DataInStream.readUint8Array")}peekUint8(){throw Error("DataInStream.peekUint8")}get mark(){throw Error("DataInStream.get mark")}set mark(e){throw Error("DataInStream.set mark")}}class s extends i{view=void 0;readPos=0;constructor(e){if(super(),e instanceof DataView)this.view=e;else if(e instanceof ArrayBuffer)this.view=new DataView(e,0,e.length);else{if(!e.buffer||"number"!=typeof e.byteLength||"number"!=typeof e.byteOffset)throw Error("MemoryInStream: data unusable");this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}}peekUint8(){return this.view.getUint8(this.readPos)}readUint8(){const e=this.view.getUint8(this.readPos);return this.readPos+=1,e}readUint16(){const e=this.view.getUint16(this.readPos);return this.readPos+=2,e}readUint32(){const e=this.view.getUint32(this.readPos);return this.readPos+=4,e}readUint64(){return 4294967296*this.readUint32()+this.readUint32()}readFloat16(){const e=new ArrayBuffer(4),t=new DataView(e),o=this.readUint16(),l=32768&o;let u=31744&o;const f=1023&o;if(31744===u)u=261120;else if(0!==u)u+=114688;else if(0!==f)return(l?-1:1)*f*5.960464477539063e-8;return t.setUint32(0,l<<16|u<<13|f<<13),t.getFloat32(0)}readFloat32(){const e=this.view.getFloat32(this.readPos);return this.readPos+=4,e}readFloat64(){const e=this.view.getFloat64(this.readPos);return this.readPos+=8,e}readUint8Array(e){const t=new Uint8Array(this.view.buffer,this.view.byteOffset+this.readPos,e);return this.readPos+=e,t}}class n{constructor(e,t){this.stream=e,this.tagHandler=t||new r}readBreak(){return 255===this.stream.peekUint8()&&(this.stream.readUint8(),!0)}readArgument(e,t){if(e<24)return e;switch(e){case 24:return this.stream.readUint8();case 25:return this.stream.readUint16();case 26:return this.stream.readUint32();case 27:return this.stream.readUint64();case 31:switch(t){case 0:case 1:case 6:break;default:return-1}}throw Error(`Malformed ${t} ${e}`)}readIndefiniteBytes(e){const t=()=>{const t=this.stream.readUint8(),o=t>>5,l=31&t;if(31===l)return-1;if(o!==e)throw Error(`Major type mismatch on chunk ${o}!=${e}`);const u=this.readArgument(l,e);if(u<0)throw Error(`Invalid chunk length ${u}`);return u},o=[];let l,u=0;for(;(l=t())>=0;)this.debug&&this.debug(`\tCHUNK ${l} bytes`),u+=l,o.push(this.stream.readUint8Array(l));const f=new Uint8Array(u);let p=0;for(let e=0;e<o.length;e++)f.set(o[e],p),p+=o[e].length;return f}readItemArray(e){let t=this.tagHandler.createArray(this);for(let o=0;o<e;o++)t.push(this.decodeItem());return t}readIndefiniteItemArray(){const e=this.tagHandler.createArray(this);for(;!this.readBreak();)e.push(this.decodeItem());return e}readKV(e){const t=this.tagHandler.createObject(this);for(let o=0;o<e;o++){let e=this.decodeItem();e=this.tagHandler.decodeKey(e,this),t[e]=this.decodeItem()}return t}readIndefiniteKV(){const e=this.tagHandler.createObject(this);for(;!this.readBreak();)e[this.decodeItem()]=this.decodeItem();return e}decodeItem(){const e=this.stream.readUint8(),t=e>>5,o=31&e;let l,u,f,p;switch(t){case 0:return this.debug&&this.debug(`${this.stream.readPos}: UINT ${o}`),this.readArgument(o,0);case 1:return this.debug&&this.debug(`${this.stream.readPos}: -INT ${o}`),-1-this.readArgument(o,1);case 2:if(this.debug&&this.debug(`${this.stream.readPos}: BYTES ${o}`),31===o)return this.readIndefiniteBytes(t);if(l=this.readArgument(o,2),l<0)throw Error(`Invalid byte string length ${l}`);return this.stream.readUint8Array(l);case 3:if(31===o)this.debug&&this.debug(`${this.stream.readPos}: TEXT? ${o}`),f=(new TextDecoder).decode(this.readIndefiniteBytes(t));else{if(this.debug&&this.debug(`${this.stream.readPos}: TEXT `),l=this.readArgument(o,3),l<0)throw Error(`Invalid text length ${l}`);f=(new TextDecoder).decode(this.stream.readUint8Array(l))}return this.debug&&this.debug(`\t"${f}"`),f;case 4:if(31===o)return this.debug&&this.debug(`${this.stream.readPos}: ARRAY?`),this.readIndefiniteItemArray();if(l=this.readArgument(o,4),l<0)throw Error("Invalid array length ${len}");return this.debug&&this.debug(`${this.stream.readPos}: ARRAY ${l}`),this.readItemArray(l);case 5:if(31===o)return this.debug&&this.debug(`${this.stream.readPos}: MAP?`),this.readIndefiniteKV();if(l=this.readArgument(o,5),l<0)throw Error("Invalid map length ${len}");return this.debug&&this.debug(`${this.stream.readPos}: MAP length ${l}`),this.readKV(l);case 6:if(u=this.readArgument(o,6),this.debug&&this.debug(`${this.stream.readPos}: TAG ${u}`),p=this.tagHandler.decode(u,this),void 0!==p)return p;switch(u){case 0:case 1:return new Date(this.decodeItem())}return this.decodeItem();case 7:switch(this.debug&&this.debug(`${this.stream.readPos}: OTHER ${o}`),o){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 24:return this.stream.readUint8();case 25:return this.stream.readFloat16();case 26:return this.stream.readFloat32();case 27:return this.stream.readFloat64()}return o}throw Error(`Unrecognised major type ${t}`)}decodes(){const e=this.decodeItem();return this.tagHandler.finishDecoding(this,e),e}static decode(e,t,o){const l=new s(e),u=new n(l,t);return u.debug=o,u.decodes()}}class a{writeUint8(e){throw Error("DataStream.writeUint8")}writeUint16(e){throw Error("DataStream.writeUint16")}writeUint32(e){throw Error("DataStream.writeUint32")}writeUint64(e){throw Error("DataStream.writeUint64")}writeFloat32(e){throw Error("DataStream.writeFloat32")}writeFloat64(e){throw Error("DataStream.writeFloat64")}writeUint8Array(e){for(let t=0;t<e.length;++t)this.writeUint8(this.writePos++,e[t])}}const f=2**32;class d extends a{view=new DataView(new ArrayBuffer(256));writePos=0;appendSpaceFor(e){const t=this.writePos+e,o=this.view.buffer.byteLength;let l=o;for(;l<t;)l*=2;if(l!==o){const e=new ArrayBuffer(l);new Uint8Array(e).set(new Uint8Array(this.view.buffer)),this.view=new DataView(e)}}writeUint8(e){this.appendSpaceFor(1),this.view.setUint8(this.writePos,e),this.writePos++}writeUint16(e){this.appendSpaceFor(2),this.view.setUint16(this.writePos,e),this.writePos+=2}writeUint32(e){this.appendSpaceFor(4),this.view.setUint32(this.writePos,e),this.writePos+=4}writeUint64(e){const t=e%f,o=(e-t)/f;this.writeUint32(o),this.writeUint32(t)}writeFloat32(e){this.appendSpaceFor(4),this.view.setFloat32(this.writePos,e),this.writePos+=4}writeFloat64(e){this.appendSpaceFor(8),this.view.setFloat64(this.writePos,e),this.writePos+=8}writeUint8Array(e){this.appendSpaceFor(e.length);for(let t=0;t<e.length;++t)this.view.setUint8(this.writePos++,e[t])}get Uint8Array(){return new Uint8Array(this.view.buffer,0,this.writePos)}}const p=2**53;class c{constructor(e,t){this.stream=e,this.tagger=t||new r}writeTypeAndArgument(e,t){t<24?this.stream.writeUint8(e<<5|t):t<256?(this.stream.writeUint8(e<<5|24),this.stream.writeUint8(t)):t<65536?(this.stream.writeUint8(e<<5|25),this.stream.writeUint16(t)):t<4294967296?(this.stream.writeUint8(e<<5|26),this.stream.writeUint32(t)):(this.stream.writeUint8(e<<5|27),this.stream.writeUint64(t))}writeTag(e){this.writeTypeAndArgument(6,e)}encodeItem(e){if(!1===e)return void this.stream.writeUint8(244);if(!0===e)return void this.stream.writeUint8(245);if(null===e)return void this.stream.writeUint8(246);if(void 0===e)return void this.stream.writeUint8(247);switch(typeof e){case"number":if(Math.floor(e)===e){if(0<=e&&e<=p)return void this.writeTypeAndArgument(0,e);if(-p<=e&&e<0)return void this.writeTypeAndArgument(1,-(e+1))}return this.stream.writeUint8(251),void this.stream.writeFloat64(e);case"string":{const t=(new TextEncoder).encode(e);this.writeTypeAndArgument(3,t.length),this.stream.writeUint8Array(t)}return;case"function":throw Error("Can't CBOR function")}if(e instanceof Date)return this.writeTag(1),void this.encodeItem(e.getTime());if(void 0===(e=this.tagger.encode(e,this)))return;if(Array.isArray(e)){this.writeTypeAndArgument(4,e.length);for(let t=0;t<e.length;++t)this.encodeItem(e[t]);return}if(e instanceof Uint8Array)return this.writeTypeAndArgument(2,e.length),void this.stream.writeUint8Array(e);const t=Object.keys(e).filter((e=>void 0!==this.tagger.encodeKey(e,this))),o=t.length;this.writeTypeAndArgument(5,o);for(const o of t)this.encodeItem(this.tagger.encodeKey(o,this)),this.encodeItem(e[o])}encodes(e){this.tagger.startEncoding(this),this.encodeItem(e),this.tagger.finishEncoding(this)}static encode(e,t,o){const l=new d,u=new c(l,t);return u.debug=o,u.encodes(e),l.Uint8Array}}const m=e=>class extends e{constructor(e){super(e),this.typeMap=this.options.typeMap||{},this.pendingProto=void 0}encode(e,t){let o=e.constructor;const l=[];let u=!1;for(;o&&"Object"!==o.name;){if(l.push(o.name),this.typeMap[o.name]){t.writeTag(25443),t.encodeItem(o.name),u=!0,t.debug&&t.debug(`\tTYPE_TAG ${l.join("-")}`);break}o=Object.getPrototypeOf(o)}return u||!t.debug||Array.isArray(e)||t.debug(`\tCAN'T TYPE-TAG ${l}`),super.encode(e,t)}decode(e,t){if(25443!==e)return super.decode(e,t);{const e=t.decodeItem();t.debug&&t.debug("Tag: CN",e);const o=this.typeMap[e];if(!o)throw Error(`${e} missing from type map`);this.pendingProto=o.prototype}}createObject(e){let t;return this.pendingProto?(t=Object.create(this.pendingProto),this.pendingProto=void 0):t=super.createObject(e),t}},g=new RegExp("^ആଈ(.+)$"),y="ρѓσςεรຂεϑ",v=e=>class extends e{constructor(e){super(e),this.k2i={},this.i2k=[],this.options.keys&&this.options.keys.forEach((e=>{this.k2i[e]=this.i2k.length,this.i2k.push(e)})),this.i2k_added=[]}finishEncoding(e){super.finishEncoding(e),e.encodeItem(this.i2k_added)}finishDecoding(e,t){super.finishDecoding(e,t),this.i2k_added=e.decodeItem(),this.options.debug&&this.options.debug(`Read ${this.i2k_added.length} added keys`),function(e,t){const o=[];!function e(l){if("object"==typeof l&&null!==l){if(Array.isArray(l)){for(const t of l)e(t);return}if(l[y])return;o.push(l),l[y]=!0;const u=Object.keys(l);for(const o of u){e(l[o]);const u=g.exec(o);u&&(l[t[u[1]]]=l[o],delete l[o])}}}(e);for(const e of o)delete e[y]}(t,[...this.i2k,...this.i2k_added])}encodeKey(e,t){if(void 0===super.encodeKey(e,this))return void(this.options.debug&&this.options.debug(`\tKDh ignore ${e}`));if(!this.i2k)return e;let o=this.k2i[e];return void 0===o&&(this.k2i[e]=o=this.i2k.length+this.i2k_added.length,this.options.added&&this.options.added(e,o),this.i2k_added.push(e)),o}decodeKey(e,t){return e<this.i2k.length?this.i2k[e]:`ആଈ${e}`}},b="_Í",_=e=>class extends e{constructor(e){super(e),this.objectsFrozen=[],this.objectsThawed={},this.currentID=void 0}finishDecoding(e,t){super.finishDecoding(e,t),this.objectsThawed={}}finishEncoding(e){super.finishEncoding(e);for(const e of this.objectsFrozen)delete e[b];this.objectsFrozen=[]}encode(e,t){if("object"==typeof e){if(void 0!==e[b])return t.writeTag(25442),void t.encodeItem(e[b]);const o=this.objectsFrozen.length;t.writeTag(25444),t.encodeItem(o),e[b]=o,this.objectsFrozen.push(e)}return super.encode(e,t)}decode(e,t){let o,l;switch(e){case 25444:return this.currentID=o=t.decodeItem(),t.debug&&t.debug("\tIDREF: ID=",o),t.decodeItem();case 25442:if(l=t.decodeItem(),t.debug&&t.debug("\tIDREF: REF to",l),!this.objectsThawed[l])throw Error(`Reference to unthawed ${l}`);return this.objectsThawed[l]}return super.decode(e,t)}createArray(e){const t=super.createArray(e);return void 0!==this.currentID&&(this.objectsThawed[this.currentID]=t,e.debug&&e.debug("\tIDREF: created []",this.currentID),this.currentID=void 0),t}createObject(e,t){const o=super.createObject(e,t);return void 0!==this.currentID&&(this.objectsThawed[this.currentID]=o,e.debug&&e.debug("\tIDREF: created {}",this.currentID),this.currentID=void 0),o}};var w=u.rK,k=u.Fv,x=u.h,S=u.hm,T=u.P8,C=u.Ol,A=u.Zz,P=u.nr,E=u.fq,D=u.Vy},"./node_modules/@cdot/dictionary/dist/mjs/index.js":function(e,t,o){o.r(t),o.d(t,{Dictionary:function(){return p},Explorer:function(){return m},LetterNode:function(){return g},Trie:function(){return y},TrieNode:function(){return v}});var l={d:(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},u={};l.d(u,{Xy:()=>r,bC:()=>n,sn:()=>i,BE:()=>d,Yk:()=>h});class i{static END_OF_WORD_BIT_MASK=1;static END_OF_LIST_BIT_MASK=2;static CHILD_INDEX_SHIFT=2;static CHILD_INDEX_BIT_MASK=1073741823;next;child;isEndOfWord=!1;preNodes;preLetters;postNodes;postLetters;constructor(e){this.letter=e}eachWord(e,t){let o=this;for(;o;)o.isEndOfWord&&t(e+o.letter,o),o.child&&o.child.eachWord(e+o.letter,t),o=o.next}eachLongWord(e,t){let o=this;for(;o;)o.child?o.child.eachLongWord(e+o.letter,t):o.isEndOfWord&&t(e+o.letter,o),o=o.next}eachNode(e){let t=this;for(;t;){if(!e(t))return!1;if(t.child&&!t.child.eachNode(e))return!1;t=t.next}return!0}add(e){let t=this,o=!1;for(;t;)if(t.letter===e.charAt(0)){if(1===e.length)return t.isEndOfWord||(o=!0,t.isEndOfWord=!0),o;if(e=e.substring(1),!t.child||t.child.letter>e.charAt(0)){const l=t.child;t.child=new i(e.charAt(0)),o=!0,t.child.next=l}t=t.child}else if(!t.next||t.next.letter>e.charAt(0)){const l=t.next;t.next=new i(e.charAt(0)),o=!0,t.next.next=l}else t=t.next;return assert.fail(`Unreachable '${e}`)}buildLists(e){let t=this;for(;t;)t.preNodes=[],t.preLetters=[],t.postNodes=[],t.postLetters=[],e&&(t.preNodes.push(e),t.preLetters.push(e.letter),e.postNodes.push(t),e.postLetters.push(t.letter)),t.child&&t.child.buildLists(t),t=t.next}match(e,t){let o=this;for(;o;){if(o.letter===e[t]){if(t===e.length-1)return o;if(o.child)return o.child.match(e,t+1)}o=o.next}return null}hangmen(e,t,o,l){let u=this;const f=e[t];for(;u;)" "!==f&&u.letter!==f||(u.isEndOfWord&&t===e.length-1&&l.push(o+u.letter),t<e.length-1&&u.child&&u.child.hangmen(e,t+1,o+u.letter,l)),u=u.next}findWordsThatUse(e,t,o,l){let u=this;for(;u;){let f=e.indexOf(u.letter);if(f<0&&(f=e.indexOf(" ")),f>=0){const p=e[f];if(u.isEndOfWord&&(l[t+u.letter]=o+p),e.length>1){e.splice(f,1);let m=u.child;for(;m;)m.findWordsThatUse(e,t+u.letter,o+p,l),m=m.next;e.splice(f,0,p)}}u=u.next}}decode(e,t){return 0!=(t&i.END_OF_WORD_BIT_MASK)&&(this.isEndOfWord=!0),0==(t&i.END_OF_LIST_BIT_MASK)&&(this.next=e+1),(t>>i.CHILD_INDEX_SHIFT&i.CHILD_INDEX_BIT_MASK)>0&&(this.child=t>>i.CHILD_INDEX_SHIFT&i.CHILD_INDEX_BIT_MASK),this}}class r{static cache=[];constructor(e){this.root=void 0,this.sequenceRoots=void 0,this.name=e}loadDAWG(e){const t=new DataView(e);let o=0;const l=t.getUint32(4*o++),u=[];for(let e=0;e<l;e++){const l=t.getUint32(4*o++),f=new i(String.fromCodePoint(l));f.decode(e,t.getUint32(4*o++)),u.push(f)}for(let e=0;e<u.length;e++){const t=u[e];"number"==typeof t.next&&(t.next=u[t.next]),"number"==typeof t.child&&(t.child=u[t.child])}return this.root=u[0],this}addLinks(){return this.root.buildLists(),this}eachWord(e){return this.root.eachWord("",e)}match(e){return this.root.match(e,0)}hasWord(e){const t=this.root.match(e,0);return t&&t.isEndOfWord}findAnagrams(e){if((e=e.toUpperCase()).length<2)throw Error(`Dictionary: '${e}' is Too short to find anagrams`);const t=e.split(""),o={};return this.root.findWordsThatUse(t,"","",o),o}findHangmen(e){e=e.toUpperCase();const t=[];return this.root.hangmen(e,0,"",t),t}createSequenceRoots(){this.sequenceRoots={},this.root.eachNode((e=>(this.sequenceRoots[e.letter]?this.sequenceRoots[e.letter].push(e):this.sequenceRoots[e.letter]=[e],!0)))}getSequenceRoots(e){return this.sequenceRoots||this.createSequenceRoots(),this.sequenceRoots[e]||[]}_addWord(e){if(0===e.length)return!1;if(this.root){if(this.hasWord(e))return!1}else this.root=new i(e.charAt(0));return this.root.add(e),!0}addWord(e){return!!this._addWord(e)&&(delete this.sequenceRoots,this.root.buildLists(),!0)}findSequence(e){this.sequenceRoots||this.createSequenceRoots();const t=this.sequenceRoots[e.charAt(0)];if(!t||t.length<=0)throw Error(`Dictionary: '${e}' has no roots`);for(let o of t)if(o.match(e,0))return o;return null}hasSequence(e){return null!=this.findSequence(e)}}class n{static sequences(e,t,o){if(!(e instanceof r))throw Error("Not a Dictionary");o("Valid sequences:");for(let l of t)e.hasSequence(l)&&o(l)}static anagrams(e,t,o){if(!t||0===t.length)throw Error("Need letters to find anagrams of");for(const l of t){let t=Object.keys(e.findAnagrams(l.replace(/\./g," ")));t=t.filter((e=>e.length===l.length)),o(`${t.length} words found in "${l}":`),t.forEach((e=>o(e)))}}static hangmen(e,t,o){if(!t||0===t.length)throw Error("Need letters to find hangman matches for");for(const l of t)e.findHangmen(l.replace(/\./g," ")).forEach((e=>o(e)))}static arrangements(e,t,o){if(!t||0===t.length)throw Error("Need letters to find arrangements of");for(const l of t){let t=Object.keys(e.findAnagrams(l));o(`${t.length} words found in "${l}":`),t.forEach((e=>o(e)))}}static list(e,t,o){if(!t||0===t.length)return void e.eachWord(((e,t)=>o(e)));const l={};t.map((t=>{const o=t.toUpperCase(),l=e.match(o);if(l)return{word:o,node:l}})).filter((e=>e)).sort(((e,t)=>e.word.length>t.word.length?-1:e.word.length===t.word.length?0:1)).map((e=>{if(e.node.child){let t=[];l[e.word]=!0,e.node.child.eachWord(e.word,(e=>t.push(e))),t=t.filter((e=>!l[e])),t.forEach((e=>l[e]=!0)),o(t.map((t=>`${e.word} -- ${t}`)).join("\n"))}}))}}let f=0;class h{letter=void 0;id=-1;next=null;child=null;isEndOfWord=!1;isFirstChild=!1;isPruned=!1;maxChildDepth=0;numberOfChildren=0;index=-1;constructor(e,t,o,l,u){this.letter=e,this.next=t,this.isEndOfWord=o,this.maxChildDepth=l,this.isFirstChild=u,this.id=f++}toString(e){let t=`{${this.id} ${this.letter}`;return this.isEndOfWord&&(t+="."),this.child&&(t+="+",e&&(t+=this.child.toString(e))),t+="}",this.next&&(t+="-",e&&(t+=this.next.toString(e))),t}prune(){this.isPruned=!0;let e=0;return this.next&&(e+=this.next.prune()),this.child&&(e+=this.child.prune()),e+1}eachWord(e,t){e.push(this),this.isEndOfWord&&t(e),this.child&&this.child.eachWord(e,t),e.pop(),this.next&&this.next.eachWord(e,t)}eachNode(e){e(this),this.next&&this.next.eachNode(e),this.child&&this.child.eachNode(e)}findChild(e){let t=this.child;for(;t;){if(t.letter===e)return t;if(t.letter>e)break;t=t.next}return null}insertChild(e,t,o){if(this.numberOfChildren++,!this.child)return void(this.child=new h(e,null,t,o,!0));if(this.child.letter>e)return this.child.isFirstChild=!1,void(this.child=new h(e,this.child,t,o,!0));let l=this.child;for(;l.next&&!(l.next.letter>e);)l=l.next;l.next=new h(e,l.next,t,o,!1)}sameSubtrie(e){return!(e!==this&&(null===e||e.letter!==this.letter||e.maxChildDepth!==this.maxChildDepth||e.numberOfChildren!==this.numberOfChildren||e.isEndOfWord!==this.isEndOfWord||!this.child&&e.child||this.child&&!e.child||!this.next&&e.next||this.next&&!e.next||this.child&&!this.child.sameSubtrie(e.child)||this.next&&!this.next.sameSubtrie(e.next)))}findSameSubtrie(e){let t;for(t=0;t<e[this.maxChildDepth].length&&!this.sameSubtrie(e[this.maxChildDepth][t]);t++);if(e[this.maxChildDepth][t].isPruned)throw Error("Same subtrie equivalent is pruned!");return e[this.maxChildDepth][t]}replaceRedundantNodes(e){if(!this.next&&!this.child)return 0;let t=0;if(this.child)if(this.child.isPruned){if(this.child=this.child.findSameSubtrie(e),null===this.child)throw Error("Something horrible");t++}else t+=this.child.replaceRedundantNodes(e);return this.next&&(t+=this.next.replaceRedundantNodes(e)),t}encode(){const e=[this.letter.codePointAt(0)];let t=0;return this.child&&(t|=this.child.index<<i.CHILD_INDEX_SHIFT),this.isEndOfWord&&(t|=i.END_OF_WORD_BIT_MASK),this.next||(t|=i.END_OF_LIST_BIT_MASK),e.push(t),e}}class d{numberOfWords=0;numberOfNodes=0;maxWordLen=0;minWordLen=1e6;first=new h(-1,null,!1,0,0,null,!1);_debug=()=>{};constructor(e,t){"function"==typeof t&&(this._debug=t),this._debug("\nConstruct Trie and fill from lexicon");for(let t of e)this.addWord(t);this._debug(`Trie of ${this.numberOfNodes} nodes built from ${this.numberOfWords} words`)}addWord(e){let t=this.first,o=0;this.maxWordLen=Math.max(this.maxWordLen,e.length),this.minWordLen=Math.min(this.minWordLen,e.length);for(let l=0;l<e.length;l++){const u=t.child?t.findChild(e[l]):null;if(!u){t.insertChild(e[l],l===e.length-1,e.length-l-1),o++,t=t.findChild(e[l]);for(let u=l+1;u<e.length;u++)t.insertChild(e[u],u===e.length-1,e.length-u-1),o++,t=t.child;break}u.maxChildDepth<e.length-l-1&&(u.maxChildDepth=e.length-l-1),t=u,l===e.length-1&&(this._debug(`WARNING input not in alphabetical order ${e}`),t.isEndOfWord=!0)}this.numberOfNodes+=o,this.numberOfWords++}eachWord(e){this.first.eachWord([],e)}createReductionStructure(){this._debug("\nCreate reduction structure");const e=[];for(let t=this.minWordLen;t<this.maxWordLen;t++)e[t]=0;const t=[],o=[];let l=this.first.child;for(;l;)o.push(l),l=l.next;let u=0;for(;o.length>0;)for(l=o.shift(),t[l.maxChildDepth]||(t[l.maxChildDepth]=[]),t[l.maxChildDepth].push(l),e[l.maxChildDepth]++,u++,l=l.child;l;)o.push(l),l=l.next;for(let t=this.minWordLen;t<this.maxWordLen;t++)e[t]>0&&this._debug(`${e[t]} words of length ${t}`);return this._debug(`${u} nodes added to the reduction structure`),t}findPrunedNodes(e){this._debug("\nMark redundant nodes as pruned");let t=0;for(let o=e.length-1;o>=0;o--){let l=0;const u=e[o];for(let e=0;e<u.length-1;e++)if(!u[e].isPruned)for(let t=e+1;t<u.length;t++)!u[t].isPruned&&u[t].isFirstChild&&u[e].sameSubtrie(u[t])&&(l+=u[t].prune());this._debug(`Pruned |${l}| nodes at depth |${o}|`),t+=l}return this._debug(`Identified a total of ${t} nodes for pruning`),t}assignIndices(){this._debug("\nAssign node indices"),this.first.child.eachNode((e=>e.index=-1));let e=this.first.child;const t=[],o=[];for(;e;)t.push(e),e=e.next;let l=0;for(;t.length>0;)if(e=t.shift(),e.index<0)for(e.index=l++,o.push(e),e=e.child;e;)t.push(e),e=e.next;return this._debug(`Assigned ${l} node indexes`),o}generateDAWG(){const e=this.createReductionStructure(),t=this.findPrunedNodes(e);let o=this.first.child.replaceRedundantNodes(e);this._debug(`Decoupled ${o} nodes to eliminate ${t} nodes`),this.numberOfNodes-=t}encode(){this._debug("\nGenerate the unsigned integer array");const e=this.assignIndices();if(e.length>1073741823)throw Error("Too many nodes remain for integer encoding");this._debug(`\t${e.length} nodes`);const t=2*e.length+1,o=new ArrayBuffer(4*t),l=new DataView(o);let u=0;l.setUint32(u,e.length),u+=4;for(let t=0;t<e.length;t++){const o=e[t].encode();l.setUint32(u,o[0]),u+=4,l.setUint32(u,o[1]),u+=4}return this._debug(`\t${t} element Uint32Array generated`),o}}var p=u.Xy,m=u.bC,g=u.sn,y=u.BE,v=u.Yk},"./src/backend/BackendGame.js":function(e,t,o){o.r(t),o.d(t,{BackendGame:function(){return C}});var l=o("./src/game/Game.js"),u=o("./src/game/Undo.js"),f=o("./src/game/Replay.js"),p=o("./src/game/Commands.js");function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,k(l.key),l)}}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=w(e);if(t){var u=w(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return _(this,o)}}function _(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function k(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==m(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}var x,S,T,C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(p,e);var t,o,u,f=b(p);function p(){return g(this,p),f.apply(this,arguments)}return t=p,(o=[{key:"checkAge",value:function(){return(Date.now()-this.lastActivity())/6e4/60/24<=14?Promise.resolve(this):(this._debug&&this._debug("Game",this.key,"timed out"),this.state=l.Game.TIMED_OUT,this.save())}}])&&y(t.prototype,o),u&&y(t,u),Object.defineProperty(t,"prototype",{writable:!1}),p}((0,u.Undo)((0,f.Replay)((0,p.Commands)(l.Game))));x=C,S="CLASSES",T={Game:C,Board:l.Game.CLASSES.Board,Square:l.Game.CLASSES.Square,Tile:l.Game.CLASSES.Tile,Player:l.Game.CLASSES.Player,Rack:l.Game.CLASSES.Rack,LetterBag:l.Game.CLASSES.LetterBag,Move:l.Game.CLASSES.Move,Turn:l.Game.CLASSES.Turn},(S=k(S))in x?Object.defineProperty(x,S,{value:T,enumerable:!0,configurable:!0,writable:!0}):x[S]=T},"./src/browser/BrowserBoard.js":function(e,t,o){o.r(t),o.d(t,{BrowserBoard:function(){return k}});var l=o("./src/game/Board.js"),u=o("./src/game/Move.js"),f=o("./src/browser/SurfaceMixin.js"),p=o("./node_modules/jquery/dist/jquery.js");function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,(u=l.key,f=void 0,f=function(e,t){if("object"!==m(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==m(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(u,"string"),"symbol"===m(f)?f:String(f)),l)}var u,f}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=w(e);if(t){var u=w(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return _(this,o)}}function _(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(m,e);var t,o,l,f=b(m);function m(){return g(this,m),f.apply(this,arguments)}return t=m,(o=[{key:"scoreNewWords",value:function(e){var t,o,l=this,u=0,f=function(f,p){for(var m=0,g="",y=1,v=!1;o<l.cols&&t<l.rows&&l.at(o,t).tile;){var b=l.at(o,t),_=b.tile.score;v=v||!b.hasLockedTile(),b.hasLockedTile()||(_*=b.letterScoreMultiplier||1,y*=b.wordScoreMultiplier||1),m+=_,g+=b.tile.letter,o+=f,t+=p}v&&(u+=m*=y,e.push({word:g,score:m}))};for(t=0;t<this.rows;t++)for(o=0;o<this.cols-1;o++)this.at(o,t).tile&&this.at(o+1,t).tile&&f(1,0);for(o=0;o<this.cols;o++)for(t=0;t<this.rows-1;t++)this.at(o,t).tile&&this.at(o,t+1).tile&&f(0,1);return u}},{key:"analysePlay",value:function(){if(!this.at(this.midcol,this.midrow).tile)return p.i18n("warn-uncentred");var e,t;this.forEachTiledSquare((function(o,l,u){return!o.tile.isLocked&&(e=l,t=u,!0)})),assert(void 0!==e,"Nothing placed");for(var o=new Array(this.cols),l=0;l<this.cols;l++)o[l]=new Array(this.rows);o[e][t]=!0;for(var f=this.touchingOld(e,t),m=!1,g=e+1;g<this.cols&&!this.at(g,t).isEmpty();g++)this.at(g,t).hasLockedTile()||(o[g][t]=!0,m=!0,f=f||this.touchingOld(g,t));if(!m)for(var y=t+1;y<this.rows&&this.at(e,y).tile;y++)this.at(e,y).hasLockedTile()||(o[e][y]=!0,f=f||this.touchingOld(e,y));if(!f&&!o[this.midcol][this.midrow])return p.i18n("warn-disco");var v=0,b=!1;if(this.forEachTiledSquare((function(e,t,l){v++,b=b||!(e.hasLockedTile()||o[t][l])})),b)return p.i18n("warn-disco");if(v<2)return p.i18n("warn-2-tiles");var _=[];this.forEachTiledSquare((function(e){e.tile.isLocked||_.push(e.tile)}));var w=[],k=this.scoreNewWords(w);return new u.Move({placements:_,score:k,words:w})}}])&&y(t.prototype,o),l&&y(t,l),Object.defineProperty(t,"prototype",{writable:!1}),m}((0,f.SurfaceMixin)(l.Board))},"./src/browser/BrowserDatabase.js":function(e,t,o){function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var o=0;o<t.length;o++){var u=t[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,(f=u.key,p=void 0,p=function(e,t){if("object"!==l(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var u=o.call(e,t||"default");if("object"!==l(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(f,"string"),"symbol"===l(p)?p:String(p)),u)}var f,p}o.r(t),o.d(t,{BrowserDatabase:function(){return f}});var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,o,l;return t=e,(o=[{key:"keys",value:function(){for(var e=[],t=0;t<localStorage.length;t++){var o,l=localStorage.key(t);(o=/^xanado_(.*)$/.exec(l))&&e.push(o[1])}return Promise.resolve(e)}},{key:"set",value:function(e,t){return localStorage.setItem("xanado_".concat(e),function(e){var t=2,o="",l=e.length;function u(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}for(var f=0,p=0;p<l;p++)t=p%3,f|=e[p]<<(16>>>t&24),2!==t&&l-p!=1||(o+=String.fromCharCode(u(f>>>18&63),u(f>>>12&63),u(f>>>6&63),u(63&f)),f=0);return o.substr(0,o.length-2+t)+(2===t?"":1===t?"=":"==")}(t)),Promise.resolve()}},{key:"get",value:function(e){var t=localStorage.getItem("xanado_".concat(e));if(null===t)return Promise.reject('"'.concat(e,'" was not found'));try{return Promise.resolve(function(e){for(var t,o,l,u=e.replace(/[^A-Za-z0-9+/]/g,""),f=u.length,p=3*f+1>>2,m=new Uint8Array(p),g=0,y=0,v=0;v<f;v++)if(l=3&v,g|=((t=u.charCodeAt(v))>64&&t<91?t-65:t>96&&t<123?t-71:t>47&&t<58?t+4:43===t?62:47===t?63:0)<<6*(3-l),3===l||f-v==1){for(o=0;o<3&&y<p;o++,y++)m[y]=g>>>(16>>>o&24)&255;g=0}return m}(t))}catch(e){return Promise.reject(e)}}},{key:"rm",value:function(e){return localStorage.removeItem("xanado_".concat(e)),Promise.resolve()}}])&&u(t.prototype,o),l&&u(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/browser/BrowserGame.js":function(e,t,o){o.r(t),o.d(t,{BrowserGame:function(){return I}});var l=o("./src/game/Undo.js"),u=o("./src/game/Commands.js"),f=o("./src/game/Game.js"),p=o("./src/browser/BrowserSquare.js"),m=o("./src/browser/BrowserTile.js"),g=o("./src/browser/BrowserBoard.js"),y=o("./src/browser/BrowserPlayer.js"),v=o("./src/browser/BrowserRack.js"),b=o("./node_modules/jquery/dist/jquery.js");function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function w(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var l=0,u=function(){};return{s:u,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,p=!0,m=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return p=e.done,e},e:function(e){m=!0,f=e},f:function(){try{p||null==o.return||o.return()}finally{if(m)throw f}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,l=new Array(t);o<t;o++)l[o]=e[o];return l}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,E(l.key),l)}}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=P(e);if(t){var u=P(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return A(this,o)}}function A(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function E(e){var t=function(e,t){if("object"!==_(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==_(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_(t)?t:String(t)}var D,O,j,I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(p,e);var t,o,l,u=C(p);function p(){return x(this,p),u.apply(this,arguments)}return t=p,l=[{key:"andList",value:function(e){return 0==e.length?"":1==e.length?e[0]:b.i18n("players-tail",e.slice(0,e.length-1).join(", "),e[e.length-1])}}],(o=[{key:"tableRow",value:function(e){var t=this;return e.replace(/%([ceklps])/g,(function(e,o){switch(o){case"c":return new Date(t.creationTimestamp).toDateString();case"e":return t.edition;case"k":return t.key;case"l":var l=t.lastTurn(),u=new Date(l?l.timestamp:t.creationTimestamp);return"".concat(u.toLocaleDateString()," ").concat(u.toLocaleTimeString());case"p":return p.andList(t.getPlayers().map((function(e){return e.name})));case"s":return t.hasEnded()?b.i18n("h-won",t.getWinner().name):t.state===f.Game.State.WAITING?b.i18n("state-waiting"):b.i18n("state-playing");default:assert.fail("Bad ".concat(o))}return o}))}},{key:"$playerTable",value:function(e){var t=b(document.createElement("table")).addClass("player-table");return this.players.forEach((function(o){return t.append(o.$tableRow(e))})),t}},{key:"updatePlayerList",value:function(e){var t,o=w(this.players);try{for(o.s();!(t=o.n()).done;)t.value.online(!1)}catch(e){o.e(e)}finally{o.f()}var l,u=[],f=w(e);try{for(f.s();!(l=f.n()).done;){var m=l.value,g=this.getPlayerWithKey(m.key);g||(g=y.BrowserPlayer.fromSerialisable(m,p.CLASSES),this.addPlayer(g,!0),g._debug=this._debug),g.online(m._isConnected||m.isRobot),u.push(g),m.isNextToGo&&(this.whosTurnKey=g.key)}}catch(e){f.e(e)}finally{f.f()}this.players=u}},{key:"$formatScore",value:function(e,t){var o=0,l=b('<span class="turn-score"></span>');if(!e.words)return l;var u,f=w(e.words);try{for(f.s();!(u=f.n()).done;){var p=u.value;l.append(b('<span class="word"></span>').append(p.word)),t||l.append(b('<span class="word-score"></span>').append("(".concat(p.score,")"))),o+=p.score}}catch(e){f.e(e)}finally{f.f()}return(!t&&e.words.length>1||e.score>o)&&l.append(b('<span class="turn-total"></span>').append(b.i18n("play-score",e.score))),l}},{key:"describeTurn",value:function(e,t,o){if(e.type===f.Game.Turns.GAME_ENDED)return this.describeGameOver(e,t);var l=b(document.createElement("div")).addClass("turn-description"),u=b(document.createElement("div")).addClass("turn-player"),p=this.getPlayerWithKey(e.playerKey);assert(p,"No player");var m,g,y=p===t,v="string"==typeof e.challengerKey?this.getPlayerWithKey(e.challengerKey):void 0;e.type===f.Game.Turns.CHALLENGE_LOST?(m=b.i18n("log-challenge"),g=v===t?b.i18n("Your"):b.i18n("log-player-s",v.name)):(m=b.i18n("log-turn"),g=y?b.i18n("Your"):b.i18n("log-player-s",p.name)),u.append('<span class="player-name">'.concat(g,"</span> ").concat(m)),l.append(u);var _,w,k,x,S=b(document.createElement("div")).addClass("turn-detail");switch(l.append(S),y?(_=b.i18n("your"),w=b.i18n("You")):(_=b.i18n("log-player-s",p.name),w=p.name),v===t?(k=b.i18n("Your"),x=b.i18n("You")):v&&(k=b.i18n("log-player-s",v.name),x=v.name),e.type){case f.Game.Turns.PLAYED:if(S.append(this.$formatScore(e,!1)),o&&0===e.replacements.length&&p.rack.isEmpty()&&!this.hasEnded()){var T=b(document.createElement("div")).addClass("turn-narrative");y?T.append(b.i18n("log-no-tiles")):T.append(b.i18n("log-no-more-tiles",w)),l.append(T)}break;case f.Game.Turns.SWAPPED:S.append(b.i18n("log-swapped",e.replacements.length));break;case f.Game.Turns.TIMED_OUT:S.append(b.i18n("log-timed-out"));break;case f.Game.Turns.PASSED:S.append(b.i18n("log-passed"));break;case f.Game.Turns.TOOK_BACK:S.append(b.i18n("log-took-back"));break;case f.Game.Turns.CHALLENGE_WON:S.append(b.i18n("log-challenge-won",x,_)+" "+b.i18n("log-lost-to-chall",w,e.score));break;case f.Game.Turns.CHALLENGE_LOST:switch(S.append(b.i18n("log-chall-fail",k,_)),this.challengePenalty){case f.Game.Penalty.PER_WORD:case f.Game.Penalty.PER_TURN:S.append(" "+b.i18n("log-lost-to-chall",x,-e.score));break;case f.Game.Penalty.MISS:S.append(" "+b.i18n("log-miss-turn",x))}break;default:assert.fail("Unknown move type ".concat(e.type))}return l}},{key:"describeGameOver",value:function(e,t){var o=this.winningScore(),l=[],u=b(document.createElement("div")).addClass("turn-description"),m=b(document.createElement("div")).addClass("game-state");switch(e.endState){case f.Game.State.TWO_PASSES:m.text(b.i18n("log-two-passes"));break;case f.Game.State.TIMED_OUT:m.text(b.i18n("log-timed-out"));break;case f.Game.State.FAILED_CHALLENGE:m.text(b.i18n("log-challenge-failed"));break;case f.Game.State.GAME_OVER:default:m.text(b.i18n("log-game-over"))}u.append(m);var g=b(document.createElement("div")).addClass("game-end-adjustments");this.getPlayers().forEach((function(u){var f,p=u===t?b.i18n("You"):u.name,m=e.score.filter((function(e){return e.key===u.key}))[0];u.score===o&&l.push(p),m.tiles>0?f=b.i18n("log-got-from-racks",p,m.tiles):m.tiles<0&&(f=b.i18n("log-lost-from-rack",p,-m.tiles,m.tilesRemaining)),f&&g.append(b(document.createElement("div")).addClass("rack-adjust").text(f));var y=m.time;if("number"==typeof y&&0!==y){var v=b(document.createElement("div")).addClass("time-adjust");v.text(b.i18n("log-lost-to-clock",p,-y)),g.append(v)}u.$refreshScore()}));var y,v=b(document.createElement("div")).addClass("game-winner"),_=0;return this.getWinner()===t&&1===l.length?y=b.i18n("You"):(y=p.andList(l),_=l.length),v.append(b.i18n("log-winner",y,_)),u.append(v),u.append(g),u}}])&&S(t.prototype,o),l&&S(t,l),Object.defineProperty(t,"prototype",{writable:!1}),p}((0,l.Undo)((0,u.Commands)(f.Game)));D=I,O="CLASSES",j={Square:p.BrowserSquare,Tile:m.BrowserTile,Board:g.BrowserBoard,Game:I,Player:y.BrowserPlayer,Rack:v.BrowserRack,LetterBag:f.Game.CLASSES.LetterBag,Move:f.Game.CLASSES.Move,Turn:f.Game.CLASSES.Turn},(O=E(O))in D?Object.defineProperty(D,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):D[O]=j},"./src/browser/BrowserPlatform.js":function(e,t,o){o.r(t),o.d(t,{BrowserPlatform:function(){return p}});o("./node_modules/jquery/dist/jquery.js"),o("./node_modules/jquery-ui/dist/jquery-ui.js"),o("./node_modules/@rwap/jquery-ui-touch-punch/jquery.ui.touch-punch.js");var l=o("./node_modules/jquery/dist/jquery.js");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,(f=l.key,p=void 0,p=function(e,t){if("object"!==u(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==u(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(f,"string"),"symbol"===u(p)?p:String(p)),l)}var f,p}window.assert=function(e,t){if(!e)throw alert("Assertion failure: "+t),Error(t)},assert.fail=function(e){return assert(!1,e)},l.ajaxTransport("+binary",(function(e,t,o){return{send:function(t,o){var l=new XMLHttpRequest,u=e.url,f=e.type,p=e.async||!0,m=e.responseType||"blob",g=e.data||null,y=e.username||null,v=e.password||null;for(var b in l.addEventListener("load",(function(){var t={};t[e.dataType]=l.response,o(l.status,l.statusText,t,l.getAllResponseHeaders())})),l.open(f,u,p,y,v),t)l.setRequestHeader(b,t[b]);l.responseType=m,l.send(g)},abort:function(){o.abort()}}}));var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,u,p;return t=e,p=[{key:"trigger",value:function(e,t){return l(document).trigger(e,t)}},{key:"i18n",value:function(){return l.i18n.apply(l.i18n,arguments)}},{key:"getFilePath",value:function(e){return"../".concat(e)}},{key:"readFile",value:function(e){return l.get(e)}},{key:"readBinaryFile",value:function(e){return l.ajax({type:"GET",url:e,dataType:"binary",processData:"false"}).then((function(e){return new Response(e).arrayBuffer()})).then((function(e){return new Uint8Array(e)}))}},{key:"findBestPlay",value:function(){var e=arguments;return o.e("findBestPlay").then(o.bind(o,"./src/game/findBestPlay.js")).then((function(t){return t.findBestPlay.apply(null,e)}))}},{key:"parsePath",value:function(e){var t=/^(.*\/)?([^/]*)(\.\w+)?$/.exec(e);return{root:"",dir:(t[1]||"").replace(/\/$/,""),name:t[2]||"",ext:t[3]||""}}},{key:"formatPath",value:function(e){var t=[];return e.dir&&e.dir.length>0?t.push(e.dir):e.root&&e.root.length>0&&t.push(e.root),e.base&&e.base.length>0?t.push(e.base):e.name&&e.name.length>0&&t.push(e.name+e.ext),t.join("/")}}],(u=null)&&f(t.prototype,u),p&&f(t,p),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/browser/BrowserPlayer.js":function(e,t,o){o.r(t),o.d(t,{BrowserPlayer:function(){return _}});o("./node_modules/jquery/dist/jquery.js");var l=o("./src/game/Player.js"),u=o("./node_modules/jquery/dist/jquery.js");function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,(u=l.key,p=void 0,p=function(e,t){if("object"!==f(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==f(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(u,"string"),"symbol"===f(p)?p:String(p)),l)}var u,p}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=b(e);if(t){var u=b(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return v(this,o)}}function v(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(v,e);var t,o,l,f=y(v);function v(){return p(this,v),f.apply(this,arguments)}return t=v,(o=[{key:"$tableRow",value:function(e){var t=u('<tr id="player'.concat(this.key,'"></tr>')).addClass("player-row");this===e&&t.addClass("whosTurn"),t.append('<td class="turn-pointer">&#10148;</td>');var o=u('<div class="ui-icon"></div>');o.addClass(this.isRobot?"icon-robot":"icon-person"),t.append(u(document.createElement("td")).append(o));var l=this===e?u.i18n("You"):this.name,f=u('<td class="player-name">'.concat(l,"</td>"));this.missNextTurn&&f.addClass("miss-turn"),t.append(f),t.append('<td class="remaining-tiles"></td>');var p=u("<td class='connect-state'>".concat("●","</td>"));return p.addClass(this._isConnected||this.isRobot?"online":"offline"),t.append(p),t.append("<td class='score'>".concat(this.score,"</td>")),t.append("<td class='player-clock'></td>"),t}},{key:"$refreshScore",value:function(){u("#player".concat(this.key," .score")).text(this.score)}},{key:"online",value:function(e){var t=this.isRobot||e;this.isRobot||(this._isConnected=t);var o=t?"offline":"online",l=t?"online":"offline";u("#player".concat(this.key," .connect-state")).removeClass(o).addClass(l)}}])&&m(t.prototype,o),l&&m(t,l),Object.defineProperty(t,"prototype",{writable:!1}),v}(l.Player)},"./src/browser/BrowserRack.js":function(e,t,o){o.r(t),o.d(t,{BrowserRack:function(){return b}});var l=o("./src/game/Rack.js");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,(f=l.key,p=void 0,p=function(e,t){if("object"!==u(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==u(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(f,"string"),"symbol"===u(p)?p:String(p)),l)}var f,p}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=v(e);if(t){var u=v(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return y(this,o)}}function y(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(y,e);var t,o,l,u=g(y);function y(){return p(this,y),u.apply(this,arguments)}return t=y,o&&f(t.prototype,o),l&&f(t,l),Object.defineProperty(t,"prototype",{writable:!1}),t}((0,o("./src/browser/SurfaceMixin.js").SurfaceMixin)(l.Rack))},"./src/browser/BrowserSquare.js":function(e,t,o){o.r(t),o.d(t,{BrowserSquare:function(){return x}});var l=o("./src/game/Square.js"),u=o("./src/browser/UIEvents.js"),f=o("./node_modules/jquery/dist/jquery.js");function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,(u=l.key,f=void 0,f=function(e,t){if("object"!==p(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==p(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(u,"string"),"symbol"===p(f)?f:String(f)),l)}var u,f}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var l=v(e,t);if(l){var u=Object.getOwnPropertyDescriptor(l,t);return u.get?u.get.call(arguments.length<3?e:o):u.value}},y.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=k(e);if(t){var u=k(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return w(this,o)}}function w(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(v,e);var t,o,l,p=_(v);function v(){return m(this,v),p.apply(this,arguments)}return t=v,(o=[{key:"squid",get:function(){if(this.id)return this.id;var e="".concat(this.surface.id,"_").concat(this.col);return void 0!==this.row&&(e+="x".concat(this.row)),e}},{key:"$populate",value:function(e){var t=this;if(e.addClass("square-".concat(this.type)).attr("id",this.squid).on("click",(function(){return Platform.trigger(u.UIEvents.SELECT_SQUARE,[t])})),void 0!==this.underlay){var o=f(document.createElement("div")).addClass("underlay");e.append(o),o.text(this.underlay)}else if("_"!==this.type){e.addClass("score-multiplier");var l=f(document.createElement("div")).addClass("underlay");e.append(l),l.attr("data-long",Platform.i18n("long-".concat(this.type))).attr("data-short",Platform.i18n("short-".concat(this.type)))}return this.tile?this.$placeTile(e):this.$unplaceTile(e),e}},{key:"$placeTile",value:function(e){e||(e=f("#".concat(this.squid))),assert(this.tile,"No tile"),e.hasClass("ui-droppable")&&e.droppable("destroy");var t=this.tile.$ui(this);e.append(t)}},{key:"placeTile",value:function(e,t){y(k(v.prototype),"placeTile",this).call(this,e,t)&&this.$placeTile()}},{key:"$unplaceTile",value:function(e){var t=this;assert(!this.tile,"Can't $unplace a placed tile"),e||(e=f("#".concat(this.squid))),0!==e.length&&(e.find(".Tile").detach(),assert(!e.hasClass("ui-droppable"),"Already droppable"),e.droppable({hoverClass:"drop-active",drop:function(e,o){var l=f(o.draggable).data("Square");Platform.trigger(u.UIEvents.DROP_TILE,[l,t])}}))}},{key:"unplaceTile",value:function(){var e=y(k(v.prototype),"unplaceTile",this).call(this);return e&&this.$unplaceTile(),e}},{key:"setUnderlay",value:function(e){this.underlay=e}},{key:"select",value:function(e){var t=f("#typingCursor").hide();this.tile?this.tile.showSelected(e):e&&f("#".concat(this.squid)).prepend(t.show())}}])&&g(t.prototype,o),l&&g(t,l),Object.defineProperty(t,"prototype",{writable:!1}),v}(l.Square)},"./src/browser/BrowserTile.js":function(e,t,o){o.r(t),o.d(t,{BrowserTile:function(){return S}});var l=o("./src/game/Tile.js"),u=o("./src/browser/UIEvents.js"),f=o("./node_modules/jquery/dist/jquery.js");function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,x(l.key),l)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=w(e);if(t){var u=w(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return b(this,o)}}function b(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function k(e,t,o){return(t=x(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function x(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==p(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(b,e);var t,o,l,p=v(b);function b(){var e;m(this,b);for(var t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return k(_(e=p.call.apply(p,[this].concat(o))),"_$tile",void 0),e}return t=b,(o=[{key:"$ui",value:function(e){var t=this;if(this._$tile)this._$tile.find(".letter").text(this.letter),this._$tile.find(".score").text(this.score);else{var o=f(document.createElement("div")).addClass("glyph").append('<span class="letter">'.concat(this.letter,"</span>")).append('<span class="score">'.concat(this.score,"</span>"));this._$tile=f(document.createElement("div")).addClass("Tile").append(o)}return this.letter.length>1&&this._$tile.find(".glyph").addClass("length-".concat(this.letter.length)),this._$tile.data("Square",e),this._$tile.data("Tile",this),this.isLocked?(this._$tile.hasClass("ui-draggable")&&this._$tile.draggable("destroy"),this._$tile.removeClass("unlocked-tile").addClass("locked-tile")):(this._$tile.hasClass("ui-draggable")||this._$tile.draggable({revert:"invalid",opacity:1,helper:"clone",appendTo:"body",start:function(e,o){Platform.trigger(u.UIEvents.CLEAR_SELECT),t._$tile.css({opacity:.5}),f(o.helper).addClass("being-dragged")},drag:function(e,t){return f(t.helper).addClass("being-dragged")},stop:function(){return t._$tile.css({opacity:1})}}),this._$tile.removeClass("locked-tile").addClass("unlocked-tile")),this._$tile}},{key:"showSelected",value:function(e){e?this._$tile.addClass("selected"):this._$tile.removeClass("selected")}}])&&g(t.prototype,o),l&&g(t,l),Object.defineProperty(t,"prototype",{writable:!1}),b}(l.Tile)},"./src/browser/GameUIMixin.js":function(e,t,o){o.r(t),o.d(t,{GameUIMixin:function(){return I}});o("./node_modules/jquery/dist/jquery.js"),o("./node_modules/jquery-ui/dist/jquery-ui.js"),o("./src/browser/icon_button.js");var l,u=o("./src/common/Utils.js"),f=o("./src/game/loadDictionary.js"),p=o("./src/game/Game.js"),m=o("./src/browser/UI.js"),g=o("./src/browser/UIEvents.js"),y=o("./node_modules/jquery/dist/jquery.js");function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return _(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var l=0,u=function(){};return{s:u,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,p=!0,m=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return p=e.done,e},e:function(e){m=!0,f=e},f:function(){try{p||null==o.return||o.return()}finally{if(m)throw f}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,l=new Array(t);o<t;o++)l[o]=e[o];return l}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,O(l.key),l)}}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var l=S(e,t);if(l){var u=Object.getOwnPropertyDescriptor(l,t);return u.get?u.get.call(arguments.length<3?e:o):u.value}},x.apply(this,arguments)}function S(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=E(e);if(t){var u=E(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return A(this,o)}}function A(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function D(e,t,o){return(t=O(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function O(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==v(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}function j(){try{l||(l=new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=")),l.play()}catch(e){console.error("Beep")}}var I=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(S,e);var t,o,l,_=C(S);function S(){var e;w(this,S);for(var t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return D(P(e=_.call.apply(_,[this].concat(o))),"game",void 0),D(P(e),"player",void 0),D(P(e),"selectedSquare",void 0),D(P(e),"boardLocked",!1),D(P(e),"undoStack",[]),e}return t=S,(o=[{key:"sendCommand",value:function(e,t){assert.fail("GameUIMixin.sendCommand ".concat(e," ").concat(t))}},{key:"getSetting",value:function(e){assert.fail("GameUIMixin.getSetting ".concat(e))}},{key:"getGameDefaults",value:function(){assert.fail("GameUIMixin.getGameDefaults")}},{key:"getDictionary",value:function(e){return(0,f.loadDictionary)(e)}},{key:"getEdition",value:function(e){assert.fail("GameUIMixin.getEdition ".concat(e))}},{key:"$log",value:function(e,t,o){var l=y(document.createElement("div")).addClass("message");o&&l.addClass(o),l.append(t);var u=y("#logBlock > .messages");return u.append(l),e&&u.animate({scrollTop:y("#logBlock > .messages").prop("scrollHeight")},300),l}},{key:"isThisPlayer",value:function(e){return this.player&&this.player.key===e}},{key:"handle_CONNECTIONS",value:function(e){if(console.debug("f<b connections",(0,u.stringify)(e)),!this.game.allowUndo&&!this.game.syncRacks){var t,o=b(this.game.getPlayers());try{for(o.s();!(t=o.n()).done;){var l=t.value;l!==this.player&&(console.debug(l.name,"is rack wild"),l.rack.isWild=!0)}}catch(e){o.e(e)}finally{o.f()}this.game.letterBag.isWild=!0}this.game.updatePlayerList(e.filter((function(e){return!e.isObserver}))),this.updateObservers(e.filter((function(e){return e.isObserver}))),this.updatePlayerTable();var f=this.isThisPlayer(this.game.whosTurnKey);this.lockBoard(!f)}},{key:"handle_MESSAGE",value:function(e){console.debug("f<b message");var t=[e.text];"string"==typeof e.args?t.push(e.args):e.args instanceof Array&&(t=t.concat(e.args));var o=/^chat-/.test(e.sender)?y.i18n(e.sender):e.sender,l=y(document.createElement("span")).addClass("chat-sender");l.text(o);var u=y(document.createElement("div")).addClass("chat-message");e.classes&&u.addClass(e.classes),u.append(l).append(": ");var f=y(document.createElement("span")).addClass("chat-text");if(f.text(y.i18n.apply(null,t)),u.append(f),this.$log(!0,u),"Advisor"===e.sender&&"_hint_"===t[0]){var p=t[2]-1,m=t[3]-1;y("#Board_".concat(m,"x").concat(p)).addClass("hint-placement")}}},{key:"handle_TICK",value:function(e){e.gameKey!==this.game.key&&console.error("key mismatch ".concat(this.game.key)),y(".player-clock").hide();var t=this.game.getPlayerWithKey(e.playerKey);if(t){var o=e.clock;t.clock=o;var l=m.UI.formatTimeInterval(o),u="tick-alert-none",f=60*this.game.timeAllowed;this.game.timerType===p.Game.Timer.TURN?(this.player&&t.key===this.player.key&&o<=10&&this.getSetting("warnings")&&this.playAudio("tick"),o<f/6?u="tick-alert-high":o<f/3?u="tick-alert-medium":o<f/2&&(u="tick-alert-low")):this.game.timerType===p.Game.Timer.GAME&&(o<f/10?u="tick-alert-high":o<f/5&&(u="tick-alert-medium")),y("#player".concat(t.key," .player-clock")).show().removeClass("tick-alert-low tick-alert-medium tick-alert-high").addClass(u).text(l)}else console.error("No such player",e.playerKey)}},{key:"handle_TURN",value:function(e){console.debug("f<b turn ",e),this.game.pushTurn(e),y("#undoButton").toggle(!0===this.game.allowUndo),this.removeMoveActionButtons();var t=this.game.getPlayerWithKey(e.playerKey),o="string"==typeof e.challengerKey?this.game.getPlayerWithKey(e.challengerKey):void 0;if(e.type===p.Game.Turns.CHALLENGE_LOST)o.score+=e.score,o.$refreshScore();else switch(v(e.score)){case"number":t.score+=e.score,t.$refreshScore();break;case"object":var l,u=b(e.score);try{for(u.s();!(l=u.n()).done;){var f=l.value,m=this.game.getPlayerWithKey(f.key);m.score+=(f.tiles||0)+(f.time||0),m.$refreshScore()}}catch(e){u.e(e)}finally{u.f()}}y(".last-placement").removeClass("last-placement"),this.$log(!0,this.game.describeTurn(e,this.player,!0));var g=t===this.player;switch(e.type){case p.Game.Turns.CHALLENGE_WON:case p.Game.Turns.TOOK_BACK:g&&this.takeBackTiles(),e.replacements&&this.game.rackToBag(e.replacements,t),e.placements&&this.game.boardToRack(e.placements,t),g&&e.type===p.Game.Turns.CHALLENGE_WON&&(this.getSetting("warnings")&&this.playAudio("oops"),this.notify(y.i18n("nfy-chall-wonH"),y.i18n("nfy-chall-wonB",this.game.getPlayerWithKey(e.playerKey).name,-e.score))),e.type==p.Game.Turns.TOOK_BACK&&this.notify(y.i18n("nfy-took-backH"),y.i18n("nfy-took-backB",this.game.getPlayerWithKey(e.playerKey).name));break;case p.Game.Turns.CHALLENGE_LOST:this.getSetting("warnings")&&this.playAudio("oops"),o===this.player?this.notify(y.i18n("nfy-you-failedH"),y.i18n("nfy-you-failedB")):this.notify(y.i18n("nfy-they-failedH"),y.i18n("nfy-they-failedB",t.name));break;case p.Game.Turns.PLAYED:g&&this.takeBackTiles(),this.game.rackToBoard(e.placements,t,(function(e){return e._$tile.addClass("last-placement")})),e.replacements&&this.game.bagToRack(e.replacements,t);break;case p.Game.Turns.SWAPPED:g&&this.takeBackTiles(),this.game.rackToBag(e.placements,t),this.game.bagToRack(e.replacements,t);break;case p.Game.Turns.GAME_ENDED:return g&&this.takeBackTiles(),this.game.state=p.Game.State.GAME_OVER,this.setAction("action_anotherGame",y.i18n("Another game?")),this.enableTurnButton(!0),this.notify(y.i18n("nfy-game-overH"),y.i18n("nfy-game-overB")),void(this.player===this.game.getWinner()?this.getSetting("cheers")&&this.playAudio("endCheer"):this.getSetting("cheers")&&this.playAudio("lost"))}this.isThisPlayer(e.nextToGoKey)?(this.getSetting("turn_alert")&&this.playAudio("yourturn"),this.lockBoard(!1),this.enableTurnButton(!0)):(this.lockBoard(!0),this.enableTurnButton(!1)),e.nextToGoKey&&e.type!==p.Game.Turns.CHALLENGE_WON&&(e.type==p.Game.Turns.PLAYED&&(g?this.game.allowTakeBack&&this.addTakeBackPreviousButton(e):this.addChallengePreviousButton(e)),this.isThisPlayer(e.nextToGoKey)&&e.type!==p.Game.Turns.TOOK_BACK&&this.notify(y.i18n("nfy-your-turnH"),y.i18n("nfy-your-turnB",this.game.getPlayerWithKey(e.playerKey).name)),this.game.whosTurnKey=e.nextToGoKey,this.updateWhosTurn()),this.updateGameStatus(),this.isThisPlayer(this.game.whosTurnKey)&&Platform.trigger("MY_TURN")}},{key:"handle_NEXT_GAME",value:function(e){console.debug("f<b nextGame",e.gameKey),this.game.nextGameKey=e.gameKey,this.setAction("action_nextGame",y.i18n("Next game"))}},{key:"handle_REJECT",value:function(e){console.debug("f<b reject",e),this.lockBoard(!1),this.enableTurnButton(!0),this.getSetting("warnings")&&this.playAudio("oops"),this.$log(!0,y.i18n("word-rejected",e.words.length,e.words.join(", ")),"turn-narrative"),Platform.trigger("MY_TURN")}},{key:"handle_PAUSE",value:function(e){var t=this;console.debug("f<b pause ".concat(e.name)),e.key!==this.game.key&&console.error("key mismatch ".concat(this.game.key)),y(".Surface .letter").addClass("hidden"),y(".Surface .score").addClass("hidden"),y("#pauseDialog > .banner").text(y.i18n("game-paused",e.name)),y("#pauseDialog").dialog({dialogClass:"no-close",modal:!0,buttons:[{text:y.i18n("label-unpause"),click:function(){t.sendCommand(p.Game.Command.UNPAUSE),y("#pauseDialog").dialog("close")}}]})}},{key:"handle_UNPAUSE",value:function(e){console.debug("f<b unpause ".concat(e.name)),y(".Surface .letter").removeClass("hidden"),y(".Surface .score").removeClass("hidden"),y("#pauseDialog").dialog("close")}},{key:"handle_UNDONE",value:function(e){assert(this.game.allowUndo,"Undo disabled"),this.undoStack.push(e),this.game.popTurn(),this.game.undo(e,!0);var t=this.isThisPlayer(this.game.whosTurnKey);this.updatePlayerTable(),this.updateWhosTurn(),this.updateGameStatus(),y("#redoButton").show(),y(".last-placement").removeClass("last-placement"),0===this.game.turns.length&&y("#undoButton").hide(),this.lockBoard(!t),this.enableTurnButton(t),this.$log(!0,y.i18n("undone",e.type,this.game.getPlayer().name)),y("#undoButton").toggle(this.game.allowUndo&&this.game.turns.length>0),t&&Platform.trigger("MY_TURN")}},{key:"keyDown",value:function(e){if("body"===e.target.id&&!this.boardLocked)switch(e.key){case"ArrowUp":case"Up":return void this.moveTypingCursor(0,-1);case"ArrowDown":case"Down":return void this.moveTypingCursor(0,1);case"ArrowLeft":case"Left":return void this.moveTypingCursor(-1,0);case"ArrowRight":case"Right":return void this.moveTypingCursor(1,0);case"Backspace":case"Delete":return void this.unplaceLastTyped();case"Home":return void this.takeBackTiles();case"Enter":case"End":return void this.action_commitMove();case"#":case"@":return void this.shuffleRack();case"?":return void this.action_pass();case"!":var t=this.game.lastTurn();return void(t&&t.type==p.Game.Turns.PLAYED&&(this.isThisPlayer(this.game.whosTurnKey)?this.challenge(t.playerKey):this.takeBackMove()));case"*":var o=this.game.board.at(this.game.board.midcol,this.game.board.midrow);return o.isEmpty()||this.game.board.forEachSquare((function(e){return!!e.isEmpty()&&(o=e,!0)})),void this.selectSquare(o);case" ":return void this.rotateTypingCursor();case";":return y("#chatInput").focus(),void e.preventDefault();default:this.manuallyPlaceLetter(e.key.toUpperCase())}}},{key:"updateObservers",value:function(e){e.length>0?y("#scoresBlock > .observerCount").show().text(y.i18n("observers",e.length)):y("#scoresBlock > .observerCount").hide()}},{key:"updatePlayerTable",value:function(){var e=this.game.$playerTable(this.player);y("#scoresBlock > .playerList").html(e),y(".player-clock").toggle(void 0!==this.game.timerType),this.updateWhosTurn()}},{key:"updateWhosTurn",value:function(){y(".whosTurn").removeClass("whosTurn"),y("#player".concat(this.game.whosTurnKey)).addClass("whosTurn")}},{key:"updateTileCounts",value:function(){var e=this.game.letterBag.remainingTileCount();if(e>0){var t=y.i18n("tiles-left",e);y("#scoresBlock > .letterbag").text(t),y("#scoresBlock td.remaining-tiles").empty()}else{y("#scoresBlock > .letterbag").text(y.i18n("warn-empty-bag"));var o=y("#scoresBlock td.remaining-tiles");this.game.getPlayers().forEach((function(e,t){return y(o[t]).text("(".concat(e.rack.squaresUsed(),")"))}))}y("#swapRack").toggle(e>=this.game.rackSize)}},{key:"createUI",value:function(e){var t=this;console.debug("Loading UI for game",e),e._debug=console.debug,this.game=e;var o=e.constructor.CLASSES;this.swapRack=new o.Rack(o,{id:"Swap",size:e.swapSize,underlay:y.i18n("SWAP")}),this.updatePlayerTable(),this.player?(this.player.rack.$populate(y("#playRack .Surface")),this.swapRack.$populate(y("#swapRack"))):y("#playRack .Surface").hide();var l=y("#board");e.board.$populate(l),this.handle_resize(),this.$log(!0,y.i18n("Game started"),"game-state"),e.forEachTurn((function(e,o){return t.$log(!1,t.game.describeTurn(e,t.player,o))})),this.$log(!0,""),e.turns.length>0&&y("#undoButton").toggle(!0===this.game.allowUndo),e.hasEnded()&&(e.nextGameKey?this.setAction("action_nextGame",y.i18n("Next game")):this.setAction("action_anotherGame",y.i18n("Another game?"))),y(".pauseButton").toggle(void 0!==e.timerType),y(".distributionButton").on("click",(function(){return t.showLetterDistributions()})),y("#undoButton").on("click",(function(){t.takeBackTiles(),t.sendCommand(p.Game.Command.UNDO)})),y("#redoButton").hide().on("click",(function(){if(t.undoStack.length>0){var e=t.undoStack.pop();t.sendCommand(p.Game.Command.REDO,e),0===t.undoStack.length&&y("#redoButton").hide()}}));var u=this.isThisPlayer(e.whosTurnKey);this.updateWhosTurn(),this.lockBoard(!u),this.enableTurnButton(u||e.hasEnded()),this.updateGameStatus();var f=e.lastTurn();return!f||f.type!==p.Game.Turns.PLAYED&&f.type!==p.Game.Turns.CHALLENGE_LOST||(this.isThisPlayer(f.playerKey)?e.allowTakeBack&&this.addTakeBackPreviousButton(f):this.addChallengePreviousButton(f)),this.player?(y(".shuffle-button").button({showLabel:!1,icon:"shuffle-icon",classes:{"ui-button-icon":"fat-icon"}}).on("click",(function(){return t.shuffleRack()})),y(".unplace-button").button({showLabel:!1,icon:"unplace-icon",classes:{"ui-button-icon":"fat-icon"}}).on("click",(function(){return t.takeBackTiles()})),y(".turn-button").on("click",(function(){return t.click_turnButton()}))):(y(".shuffle-button").hide(),y(".turn-button").hide()),Promise.resolve()}},{key:"readyToListen",value:function(){var e=this.player?this.player.key:void 0;return console.debug("f<b join"),this.notifyBackend(p.Game.Notify.JOIN,{gameKey:this.game.key,playerKey:e}),Promise.resolve()}},{key:"attachChannelHandlers",value:function(){var e=this;return assert(this.channel,"No channel"),this.channel.on(p.Game.Notify.CONNECTIONS,(function(t){return e.handle_CONNECTIONS(t)})).on(p.Game.Notify.TURN,(function(t){return e.handle_TURN(new e.game.constructor.CLASSES.Turn(t))})).on(p.Game.Notify.TICK,(function(t){return e.handle_TICK(t)})).on(p.Game.Notify.NEXT_GAME,(function(t){return e.handle_NEXT_GAME(t)})).on(p.Game.Notify.MESSAGE,(function(t){return e.handle_MESSAGE(t)})).on(p.Game.Notify.REJECT,(function(t){return e.handle_REJECT(t)})).on(p.Game.Notify.PAUSE,(function(t){return e.handle_PAUSE(t)})).on(p.Game.Notify.UNPAUSE,(function(t){return e.handle_UNPAUSE(t)})).on(p.Game.Notify.UNDONE,(function(t){return e.handle_UNDONE(t)})).on(p.Game.Notify.JOIN,(function(){return console.debug("f<b join")})),Promise.resolve()}},{key:"handle_resize",value:function(){if(this.game){var e=y(window).width(),t=y(window).height(),o=this.game.board.cols,l=(e>t?.9*t:Math.min(e,.9*t))/o-4;this.editCSSRule(".Surface td",{width:l,height:l,"font-size":.23*l,"line-height":l/3});var u=Math.min(l/11,3),f=l-2*u;this.editCSSRule(".Tile",{width:f,height:f,"font-size":.55*f,"border-width":u})}}},{key:"attachUIEventHandlers",value:function(){var e=this;x(E(S.prototype),"attachUIEventHandlers",this).call(this);var t=this;y("#chatInput").on("keydown",(function(e){"Tab"!==e.key&&"Escape"!==e.key||y("body").focus()})).on("change",(function(){console.debug("f>b message"),t.notifyBackend(p.Game.Notify.MESSAGE,{sender:t.player?t.player.name:"Observer",text:y(this).val()}),y(this).val(""),y("body").focus()})),y(".pauseButton").hide().on("click",(function(){return e.sendCommand(p.Game.Command.PAUSE)})),y(document).on(g.UIEvents.SELECT_SQUARE,(function(t,o){return e.selectSquare(o)})).on(g.UIEvents.CLEAR_SELECT,(function(){return e.clearSelect()})).on(g.UIEvents.DROP_TILE,(function(t,o,l){return e.dropTile(o,l)})).on("keydown",(function(t){return e.keyDown(t)})),y(window).on("resize",(function(){return e.handle_resize()}))}},{key:"manuallyPlaceLetter",value:function(e){if(this.selectedSquare&&this.selectedSquare.isEmpty()&&this.selectedSquare.isBoard&&!(this.game.letterBag.legalLetters.indexOf(e)<0)){var t=this.player.rack.findSquare(e);t?(this.moveTile(t,this.selectedSquare,e),this.getSetting("tile_click")&&this.playAudio("tiledown"),y("#typingCursor").hasClass("down")?this.moveTypingCursor(0,1):this.moveTypingCursor(1,0)):this.$log(y.i18n("nfy-on-rack",e))}}},{key:"moveTypingCursor",value:function(e,t){if(this.selectedSquare){var o=this.selectedSquare;do{try{var l=this.game.board.at(this.selectedSquare.col+e,this.selectedSquare.row+t);this.selectedSquare=l}catch(e){return void j()}}while(this.selectedSquare&&!this.selectedSquare.isEmpty());this.selectedSquare?(o.select(!1),this.selectedSquare.select(!0)):o&&(this.selectedSquare=o,j())}}},{key:"selectSquare",value:function(e){assert(e,"No square selected"),console.debug("select ".concat(e.squid));var t=e.isBoard&&e.hasLockedTile(),o=!e.isBoard&&e.isEmpty();if(this.selectedSquare){if(this.selectedSquare.isEmpty()){if(e===this.selectedSquare)return void this.rotateTypingCursor()}else{if(e&&e.isEmpty())return this.moveTile(this.selectedSquare,e),void this.clearSelect();if(t)return}this.clearSelect()}t||o||(this.selectedSquare=e,e.select(!0))}},{key:"clearSelect",value:function(){this.selectedSquare&&(this.selectedSquare.select(!1),this.selectedSquare=void 0)}},{key:"rotateTypingCursor",value:function(){var e=y("#typingCursor");e.hasClass("down")?e.removeClass("down"):e.addClass("down")}},{key:"unplaceLastTyped",value:function(){if(this.selectedSquare&&!y("#typingCursor").is(":hidden")){var e=0,t=0;y("#typingCursor").hasClass("down")?e=-1:t=-1;var o=this.selectedSquare;do{try{o=this.game.board.at(o.col+t,o.row+e)}catch(e){o=void 0}}while(o&&o.hasLockedTile());o&&!o.isEmpty()&&(this.takeBackTile(o),this.selectSquare(o))}}},{key:"dropTile",value:function(e,t){e.tile&&(this.clearSelect(),this.moveTile(e,t),this.getSetting("tile_click")&&this.playAudio("tiledown"))}},{key:"showLetterDistributions",value:function(){this.getEdition(this.game.edition).then((function(e){var t=y("#distributionDialog"),o=t.find(".distribution");o.empty(),o.append(e.bag.map((function(e){return e.isBlank?"".concat(y.i18n("BLANK"),"-").concat(e.count):"".concat(e.letter,"-").concat(e.count)})).join(" ")),t.dialog({title:y.i18n("title-dist-dlg"),modal:!1,closeText:"hide"})}))}},{key:"promptForLetter",value:function(){var e=this;return new Promise((function(t){var o=y("#blankDialog"),l=y("#blankDialog .letterTable");l.empty();for(var u=e.game.letterBag.legalLetters.slice().sort(),f=Math.ceil(Math.sqrt(u.length)),p=f,m=null,g=function(){var e=u.shift();p==f&&(m&&l.append(m),m=y(document.createElement("tr")),p=0);var g=y("<td>".concat(e,"</td>"));g.on("click",(function(){o.dialog("close"),t(e)})),m.append(g),p++};u.length>0;)g();m&&l.append(m),o.dialog({dialogClass:"no-title",modal:!0,closeOnEscape:!1,closeText:"hide"})}))}},{key:"moveTile",value:function(e,t,o){var l=this,u=e.tile;this.boardLocked&&(e.isBoard||t.isBoard)||(e.unplaceTile(),u.isBlank&&(t.isBoard?o?u.letter=o:" "===u.letter&&this.promptForLetter().then((function(e){u.letter=e,u.$ui()})):u.reset()),t.placeTile(u),window.setTimeout((function(){return l.updateGameStatus()}),500))}},{key:"updateGameStatus",value:function(){if(y("#playBlock > .your-move").empty(),this.updateTileCounts(),this.game.hasEnded())this.lockBoard(!0);else if(this.isThisPlayer(this.game.whosTurnKey)){var e=this.game.previousPlayer();if(e&&e.rack.isEmpty())return this.lockBoard(!0),void(this.player.key===this.game.whosTurnKey?this.setAction("action_confirmGameOver",y.i18n("Accept last move")):y(".turn-button").hide());if(this.game.board.hasUnlockedTiles()){this.setAction("action_commitMove",y.i18n("Finished Turn"));var t=this.game.board.analysePlay(),o=y("#playBlock > .your-move");if("string"==typeof t)o.append(t),this.enableTurnButton(!1);else{var l=this.game.calculateBonus(t.placements.length);t.score+=l,o.append(this.game.$formatScore(t,!this.game.predictScore)),this.enableTurnButton(!0)}return y(".unplace-button").css("visibility","inherit"),void y("#swapRack").hide()}if(this.swapRack.squaresUsed()>0)return this.setAction("action_swap",y.i18n("Swap")),y("#board .ui-droppable").droppable("disable"),this.enableTurnButton(!0),void y(".unplace-button").css("visibility","inherit");this.setAction("action_pass",y.i18n("Pass")),y("#board .ui-droppable").droppable("enable"),this.enableTurnButton(!0),y(".unplace-button").css("visibility","hidden")}else y(".turn-button").hide()}},{key:"lockBoard",value:function(e){this.boardLocked=e}},{key:"enableTurnButton",value:function(e){y(".turn-button").button(e?"enable":"disable")}},{key:"addChallengePreviousButton",value:function(e){var t=this;if(this.player){var o=this.game.getPlayerWithKey(e.playerKey);if(o){var l=y.i18n("button-challenge",o.name),u=y("<button>".concat(l,"</button>")).addClass("moveAction").button().on("click",(function(){return t.challenge(o.key)}));this.$log(!0,u,"turn-control")}}}},{key:"addTakeBackPreviousButton",value:function(){var e=this,t=y('<button name="takeBack" class="moveAction"></button>').text(y.i18n("Take back")).button().on("click",(function(){return e.takeBackMove()}));this.$log(!0,t,"turn-control")}},{key:"removeMoveActionButtons",value:function(){y("button.moveAction").remove()}},{key:"challenge",value:function(e){this.takeBackTiles(),this.sendCommand(p.Game.Command.CHALLENGE,{challengedKey:e})}},{key:"action_commitMove",value:function(){y(".hint-placement").removeClass("hint-placement");var e=this.game.board.analysePlay();assert("string"!=typeof e,"Bad move: ".concat(e));var t=this.game.calculateBonus(e.placements.length);e.score+=t,t>0&&this.getSetting("cheers")&&this.playAudio("bonusCheer"),this.sendCommand(p.Game.Command.PLAY,e)}},{key:"takeBackMove",value:function(){this.takeBackTiles(),this.sendCommand(p.Game.Command.TAKE_BACK)}},{key:"action_pass",value:function(){this.takeBackTiles(),this.sendCommand(p.Game.Command.PASS)}},{key:"action_confirmGameOver",value:function(){this.takeBackTiles(),this.sendCommand(p.Game.Command.CONFIRM_GAME_OVER)}},{key:"action_anotherGame",value:function(){assert.fail("GameUIMixin.action_nextGame")}},{key:"action_nextGame",value:function(){assert.fail("GameUIMixin.action_nextGame")}},{key:"action_swap",value:function(){var e=this.swapRack.empty();this.player.rack.addTiles(e),this.sendCommand(p.Game.Command.SWAP,e)}},{key:"setAction",value:function(e,t){this.player&&y(".turn-button").data("action",e).empty().append(t).show()}},{key:"click_turnButton",value:function(){var e=y(".turn-button").data("action");console.debug("click_turnButton =>",e),this[e]()}},{key:"takeBackTiles",value:function(e){var t=this;this.game.board.forEachSquare((function(e){return t.takeBackTile(e),!1})),e||this.swapRack.forEachSquare((function(e){return t.takeBackTile(e),!1})),this.updateGameStatus()}},{key:"takeBackTile",value:function(e){if(e.hasLockedTile())return!1;var t=e.unplaceTile();return!!t&&(this.player.rack.addTile(t),!0)}},{key:"shuffleRack",value:function(){this.player.rack.shuffle()}},{key:"undo",value:function(){this.sendComand(p.Game.Command.UNDO)}},{key:"redo",value:function(){}},{key:"canNotify",value:function(){if(0!==document.URL.indexOf("https:")||!this.getSetting("notification")||!("Notification"in window))return Promise.reject();switch(Notification.permission){case"denied":return Promise.reject();case"granted":return Promise.resolve();default:return new Promise((function(e,t){return Notification.requestPermission().then((function(o){"granted"===o?e():t()}))}))}}},{key:"notify",value:function(e,t){var o=this;this.canNotify().then((function(){o.cancelNotification();var l=new Notification(e,{icon:"../images/favicon.ico",body:t});o._notification=l,y(l).on("click",(function(){this.cancel()})).on("close",(function(){delete o._notification}))})).catch((function(){}))}},{key:"cancelNotification",value:function(){this._notification&&(this._notification.close(),delete this._notification)}}])&&k(t.prototype,o),l&&k(t,l),Object.defineProperty(t,"prototype",{writable:!1}),S}(e)}},"./src/browser/SurfaceMixin.js":function(e,t,o){o.r(t),o.d(t,{SurfaceMixin:function(){return b}});o("./node_modules/jquery/dist/jquery.js");var l=o("./node_modules/jquery/dist/jquery.js");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,(f=l.key,p=void 0,p=function(e,t){if("object"!==u(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==u(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(f,"string"),"symbol"===u(p)?p:String(p)),l)}var f,p}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=v(e);if(t){var u=v(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return y(this,o)}}function y(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var b=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(v,e);var t,o,u,y=g(v);function v(){return f(this,v),y.apply(this,arguments)}return t=v,(o=[{key:"$populate",value:function(e){var t=l(document.createElement("tbody"));e.append(t);for(var o=0;o<this.rows;o++){var u=l(document.createElement("tr"));t.append(u);for(var f=0;f<this.cols;f++){var p=this.at(f,o),m=l(document.createElement("td"));u.append(m),p.$populate(m)}}}}])&&p(t.prototype,o),u&&p(t,u),Object.defineProperty(t,"prototype",{writable:!1}),v}(e)}},"./src/browser/UI.js":function(e,t,o){o.r(t),o.d(t,{UI:function(){return b}});o("./node_modules/jquery/dist/jquery.js"),o("./node_modules/@wikimedia/jquery.i18n/src/jquery.i18n.js"),o("./node_modules/@wikimedia/jquery.i18n/src/jquery.i18n.language.js"),o("./node_modules/@wikimedia/jquery.i18n/src/jquery.i18n.messagestore.js"),o("./node_modules/@wikimedia/jquery.i18n/src/jquery.i18n.parser.js"),o("./node_modules/@wikimedia/jquery.i18n/src/jquery.i18n.fallbacks.js"),o("./node_modules/@wikimedia/jquery.i18n/src/jquery.i18n.emitter.js");var l=o("./src/common/Utils.js"),u=o("./node_modules/jquery/dist/jquery.js");function f(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var l=0,u=function(){};return{s:u,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,m=!0,g=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return m=e.done,e},e:function(e){g=!0,f=e},f:function(){try{m||null==o.return||o.return()}finally{if(g)throw f}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,l=new Array(t);o<t;o++)l[o]=e[o];return l}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,v(l.key),l)}}function y(e,t,o){return(t=v(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function v(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==m(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"debug",(function(){})),y(this,"channel",void 0),y(this,"soundClips",{})}var t,p,v;return t=e,v=[{key:"parseURLArguments",value:function(e){var t,o=e.split("?"),l={_URL:o.shift()},u=f(o.join("?").split(/[;&]/));try{for(u.s();!(t=u.n()).done;){var p=t.value.split("="),m=p.shift();l[decodeURIComponent(m)]=0===p.length||decodeURIComponent(p.join("="))}}catch(e){u.e(e)}finally{u.f()}return l}},{key:"makeURL",value:function(e){var t=Object.keys(e).filter((function(e){return!/^_/.test(e)})).sort().map((function(t){return e[t]&&"boolean"==typeof e[t]?t:"".concat(t,"=").concat(encodeURIComponent(e[t]))}));return"".concat(e._URL,"?").concat(t.join(";"))}},{key:"formatTimeInterval",value:function(e){var t=e<0?"-":"";e=Math.abs(e);var o="0".concat(e%60).slice(-2);e=Math.floor(e/60);var l="0".concat(e%60).slice(-2);if(0===(e=Math.floor(e/60)))return"".concat(t).concat(l,":").concat(o);var u="0".concat(e%24).slice(-2);return 0===(e=Math.floor(e/24))?"".concat(t).concat(u,":").concat(l,":").concat(o):"".concat(t).concat(e,":").concat(u,":").concat(l,":").concat(o)}}],(p=[{key:"alert",value:function(e,t){var o;return console.error("ALERT",m(e),e),"object"===m(e)&&(e.responseJSON?e=e.responseJSON:e.responseText?e=e.responseText:e.statusText&&(e=e.statusText)),o="string"==typeof e?u.i18n(e):e instanceof Error?(0,l.stringify)(e):e instanceof Array?u.i18n.apply(u.i18n,e):(0,l.stringify)(e),u("#alertDialog").dialog({modal:!0,title:t||u.i18n("XANADO problem")}).html("<p>".concat(o,"</p>"))}},{key:"notifyBackend",value:function(e,t){this.channel.emit(e,t)}},{key:"playAudio",value:function(e){var t=this.soundClips[e];t||(t=new Audio("../audio/".concat(e,".mp3")),this.soundClips[e]=t),t.playing&&t.pause(),t.play().catch((function(){u(t).on("canplaythrough",(function(){u(t).off("canplaythrough"),t.play().catch((function(){}))}))}))}},{key:"initTheme",value:function(){var e=this.getSetting("jqTheme");e&&u("#jQueryTheme").each((function(){this.href=this.href.replace(/\/themes\/[^/.]+/,"/themes/".concat(e))}));var t=this.getSetting("xanadoCSS");return t&&u("#xanadoCSS").each((function(){this.href=this.href.replace(/\/css\/[^/.]+/,"/css/".concat(t))})),Promise.resolve()}},{key:"findCSSRule",value:function(e){var t,o=f(document.styleSheets);try{for(o.s();!(t=o.n()).done;){var l=t.value;try{var u,p=f(l.cssRules);try{for(p.s();!(u=p.n()).done;){var m=u.value;if(m instanceof CSSStyleRule&&m.selectorText==e)return m}}catch(e){p.e(e)}finally{p.f()}}catch(e){}}}catch(e){o.e(e)}finally{o.f()}}},{key:"editCSSRule",value:function(e,t){var o=this.findCSSRule(e);assert(o,e);var l=o.style.cssText;u.each(t,(function(e,t){var o=new RegExp("(^|[{; ])".concat(e,":[^;]*"));l=l.replace(o,"$1".concat(e,":").concat(t,"px"))})),o.style.cssText=l}},{key:"initLocale",value:function(){var e=this;return this.getLocales().then((function(t){var o=e.getSetting("language")||"en";console.debug("User language",o);var l={};return l[o]="../i18n/".concat(o,".json"),u.i18n({locale:o}).load(l).then((function(){return t}))})).then((function(e){return console.debug("Locales available",e.join(", ")),new Promise((function(t){u(document).ready((function(){console.debug("Translating HTML to",u.i18n().locale),u("body").i18n(),t(e)}))}))})).then((function(){u("button").button(),u(document).tooltip({items:"[data-i18n-tooltip]",content:function(){return u.i18n(u(this).data("i18n-tooltip"))},open:function(e,t){"focusin"===e.originalEvent.type&&t.tooltip.hide()}})}))}},{key:"getSetting",value:function(e){return e}},{key:"setSetting",value:function(e,t){assert.fail("UI.setSetting ".concat(e,"=").concat(t))}},{key:"setSettings",value:function(e){var t=this;return Promise.all([Object.keys(e).map((function(o){return t.setSetting(o,e[o])}))])}},{key:"getSession",value:function(){assert.fail("UI.getSession")}},{key:"getLocales",value:function(){assert.fail("UI.getLocales")}},{key:"getCSS",value:function(){assert.fail("UI.getCSS")}},{key:"getDictionaries",value:function(){assert.fail("UI.getDictionaries")}},{key:"getEditions",value:function(){assert.fail("UI.getEditions")}},{key:"attachUIEventHandlers",value:function(){var e=this;u("#personaliseButton").on("click",(function(){o.e("SettingsDialog").then(o.bind(o,"./src/browser/SettingsDialog.js")).then((function(t){return new(t[Object.keys(t)[0]])({ui:e,onSubmit:function(t,o){e.setSettings(o).then((function(){return window.location.reload()}))},error:console.error})}))}))}}])&&g(t.prototype,p),v&&g(t,v),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/browser/UIEvents.js":function(e,t,o){o.r(t),o.d(t,{UIEvents:function(){return l}});var l={CLEAR_SELECT:"ClearSelect",DROP_TILE:"DropTile",SELECT_SQUARE:"SelectSquare"}},"./src/browser/icon_button.js":function(e,t,o){o.r(t);o("./node_modules/jquery/dist/jquery.js"),o("./node_modules/jquery-ui/dist/jquery-ui.js");var l=o("./node_modules/jquery/dist/jquery.js");l.widget("jquery.icon_button",l.ui.button,{_create:function(){this.options.icon=this.options.icon||this.element.data("icon"),this.options.icon&&!/^ui-icon-/.test(this.options.icon)&&(this.options.icons={primary:this.options.icon},this.options.classes={"ui-button-icon":"icon_button"},delete this.options.icon),this.options.text=!1,this._super()},_setOption:function(e,t){"icon"!==e||/^ui-icon-/.test(t)||(e="icons",t={primary:t}),this._super(e,t)}})},"./src/common/Channel.js":function(e,t,o){function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var o=0;o<t.length;o++){var u=t[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,(f=u.key,p=void 0,p=function(e,t){if("object"!==l(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var u=o.call(e,t||"default");if("object"!==l(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(f,"string"),"symbol"===l(p)?p:String(p)),u)}var f,p}o.r(t),o.d(t,{Channel:function(){return f}});var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._receiver=new WeakRef(this),this.handlers={}}var t,o,l;return t=e,(o=[{key:"on",value:function(e,t){return this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t),this}},{key:"receiver",set:function(e){this._receiver=new WeakRef(e)}},{key:"emit",value:function(e,t){var o=this._receiver.deref();o.handlers[e]&&o.handlers[e].forEach((function(o){return o(t,e)}))}}])&&u(t.prototype,o),l&&u(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/common/Fridge.js":function(e,t,o){function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var o=0;o<t.length;o++){var u=t[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,(f=u.key,p=void 0,p=function(e,t){if("object"!==l(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var u=o.call(e,t||"default");if("object"!==l(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(f,"string"),"symbol"===l(p)?p:String(p)),u)}var f,p}o.r(t),o.d(t,{Fridge:function(){return y}});var f="_Í",p="_Ć",m="_Ð",g="_Ŕ",y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,o,y;return t=e,y=[{key:"freeze",value:function(e){for(var t=[],o=function e(o){if("function"==typeof o)throw Error("Can't freeze functions");if(!o||"object"!==l(o))return o;if(Array.isArray(o))return o.map((function(t){return e(t)}));try{if(Object.prototype.hasOwnProperty.call(o,f)&&o.constructor){var u={};return u[g]=o[f],u}}catch(e){throw new Error("Corrupt fridge")}var y=t.length;Object.defineProperty(o,f,{configurable:!0,value:y}),t.push(o);var v={};if(v[f]=y,o.constructor&&o.constructor.name&&"Object"!==o.constructor.name){for(var b=o.constructor;b.UNFREEZABLE;)if("Object"===(b=Object.getPrototypeOf(b)).name)throw Error("Bottomless unfreezable chain");v[p]=b.name}var _=Object.getPrototypeOf(o);if(_&&"function"==typeof _.Freeze)v[m]=o.Freeze();else{if("Date"===v[p])return v[m]=o.getTime(),v;for(var w in v[m]={},o)if(!/^#?_/.test(w)&&"function"!=typeof o[w])try{v[m][w]=e(o[w])}catch(e){}}return v}(e),u=0,y=t;u<y.length;u++)delete y[u][f];return JSON.stringify(o,null,1)}},{key:"thaw",value:function(e,t){var o=[];return function e(u){if(!u||"object"!==l(u))return u;if(Array.isArray(u))return u.map((function(t){return e(t)}));if(Object.prototype.hasOwnProperty.call(u,g)){if(o[u[g]])return o[u[g]];throw new Error("reference to unthawed ".concat(u[g]))}var y,v=!1,b=t[u[p]];if("Date"===u[p])return new Date(u[m]);if(b)"function"==typeof b.Thaw?y=b.Thaw(u[m]):(y=Object.create(b.prototype),v=!0);else{if(u[p])throw Error("".concat(u[p]," missing from type map"));y={},v=!0}if(Object.prototype.hasOwnProperty.call(u,f)&&(o[u[f]]=y),v)for(var _ in u[m])y[_]=e(u[m][_]);return y}(JSON.parse(e))}}],(o=null)&&u(t.prototype,o),y&&u(t,y),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/common/Utils.js":function(e,t,o){function l(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var l=0,f=function(){};return{s:f,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:f}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var p,m=!0,g=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return m=e.done,e},e:function(e){g=!0,p=e},f:function(){try{m||null==o.return||o.return()}finally{if(g)throw p}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,l=new Array(t);o<t;o++)l[o]=e[o];return l}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e){var t="0123456789abcdef".split("");if(e){var o;do{o=p()}while(o in e);return o}for(var l=[],u=0;u<16;u++)l.push(t[Math.floor(16*Math.random())]);return l.join("")}function m(e){switch(f(e)){case"undefined":return"?";case"string":return'"'.concat(e,'"');case"number":case"boolean":case"null":return String(e)}if(!e)return"null";if("object"===f(e)&&"function"==typeof e.stringify)return e.stringify();var t=[];if(e instanceof Date)return e.toISOString();if("[object Array]"===Object.prototype.toString.apply(e)){var o,u=l(e);try{for(u.s();!(o=u.n()).done;){var p=o.value;t.push(m(p))}}catch(e){u.e(e)}finally{u.f()}return"[".concat(t.join(","),"]")}for(var g in e)if(Object.prototype.hasOwnProperty.call(e,g)){var y=m(e[g]);y&&t.push("".concat(g,":").concat(y))}return"{".concat(t.join(","),"}")}o.r(t),o.d(t,{genKey:function(){return p},stringify:function(){return m}})},"./src/game/Board.js":function(e,t,o){function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,b(l.key),l)}}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=y(e);if(t){var u=y(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return m(this,o)}}function m(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function v(e,t,o){return(t=b(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function b(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var u=o.call(e,t||"default");if("object"!==l(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}o.r(t),o.d(t,{Board:function(){return _}});var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(y,e);var t,o,l,m=p(y);function y(e,t){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);var l={id:"Board",rows:t.rows,cols:t.cols};return l.type=t instanceof y?function(e,o){return t.at(e,o).type}:function(e,o){return t.squareType(e,o)},v(g(o=m.call(this,e,l)),"midrow",-1),v(g(o),"midcol",-1),o.midrow=Math.floor(o.rows/2),o.midcol=Math.floor(o.cols/2),o}return t=y,(o=[{key:"hasUnlockedTiles",value:function(){return this.forEachTiledSquare((function(e){return!e.tile.isLocked}))}},{key:"parse",value:function(e,t,o){var l=o.split("\n");assert(l.length>=this.rows,"Too many rows");for(var u=0;u<this.rows;u++){var f=l[u].split("|");assert(f.length===this.cols+2,"".concat(f.length," === ").concat(this.cols," + 2"));for(var p=0;p<this.cols;p++){var m=f[p+1];if(" "!=m){var g=m.toUpperCase()!=m,y=new e.Tile({letter:m.toUpperCase(),isBlank:g,score:g?0:t.letterScore(m)});this.at(p,u).placeTile(y,!0)}}}}},{key:"touchingOld",value:function(e,t){return e>0&&this.at(e-1,t).tile&&this.at(e-1,t).hasLockedTile()||e<this.cols-1&&this.at(e+1,t).tile&&this.at(e+1,t).hasLockedTile()||t>0&&this.at(e,t-1).tile&&this.at(e,t-1).hasLockedTile()||t<this.rows-1&&this.at(e,t+1).tile&&this.at(e,t+1).hasLockedTile()}},{key:"stringify",value:function(){for(var e="",t=0;t<this.rows;t++){for(var o=[],l=0;l<this.cols;l++){var u=this.at(l,t),f=u.tile;f?f.isBlank?o.push(f.letter.toLowerCase()):o.push(f.letter):(u.letterScoreMultiplier||0)>1?o.push(u.letterScoreMultiplier):(u.wordScoreMultiplier||0)>1?o.push(4+u.wordScoreMultiplier):o.push(" ")}e+="|".concat(o.join("|"),"|\n")}return e}},{key:"scorePlay",value:function(e,t,o,l,u,f){for(var p=0,m=0,g=1,y=e-o*u.length,v=t-l*u.length,b=0;b<u.length;b++){y+=o,v+=l;var _=u[b],w=_.score,k=this.at(y,v);if(k.hasLockedTile())p+=w;else{p+=w*=k.letterScoreMultiplier||1;var x=k.wordScoreMultiplier||1;g*=x;for(var S="",T=0,C=y-l,A=v-o;C>=0&&A>=0&&this.at(C,A).tile;C-=l,A-=o){var P=this.at(C,A).tile;S=P.letter+S,T+=P.score}S+=_.letter;for(var E=y+l,D=v+o;E<this.cols&&D<this.rows&&this.at(E,D).tile;E+=l,D+=o){var O=this.at(E,D).tile;S+=O.letter,T+=O.score}T>0&&(T+=w,T*=x,f&&f.push({word:S,score:T}),m+=T)}}return p*=g,f&&f.push({word:u.map((function(e){return e.letter})).join(""),score:p}),p+=m}}])&&u(t.prototype,o),l&&u(t,l),Object.defineProperty(t,"prototype",{writable:!1}),y}(o("./src/game/Surface.js").Surface)},"./src/game/Commands.js":function(e,t,o){o.r(t),o.d(t,{Commands:function(){return S}});var l=o("./src/common/Utils.js"),u=o("./src/game/Game.js");function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(){p=function(){return e};var e={},t=Object.prototype,o=t.hasOwnProperty,l=Object.defineProperty||function(e,t,o){e[t]=o.value},u="function"==typeof Symbol?Symbol:{},m=u.iterator||"@@iterator",g=u.asyncIterator||"@@asyncIterator",y=u.toStringTag||"@@toStringTag";function v(e,t,o){return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{v({},"")}catch(e){v=function(e,t,o){return e[t]=o}}function b(e,t,o,u){var f=t&&t.prototype instanceof k?t:k,p=Object.create(f.prototype),m=new M(u||[]);return l(p,"_invoke",{value:O(e,o,m)}),p}function _(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}e.wrap=b;var w={};function k(){}function x(){}function S(){}var T={};v(T,m,(function(){return this}));var C=Object.getPrototypeOf,A=C&&C(C(L([])));A&&A!==t&&o.call(A,m)&&(T=A);var P=S.prototype=k.prototype=Object.create(T);function E(e){["next","throw","return"].forEach((function(t){v(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function u(l,p,m,g){var y=_(e[l],e,p);if("throw"!==y.type){var v=y.arg,b=v.value;return b&&"object"==f(b)&&o.call(b,"__await")?t.resolve(b.__await).then((function(e){u("next",e,m,g)}),(function(e){u("throw",e,m,g)})):t.resolve(b).then((function(e){v.value=e,m(v)}),(function(e){return u("throw",e,m,g)}))}g(y.arg)}var p;l(this,"_invoke",{value:function(e,o){function l(){return new t((function(t,l){u(e,o,t,l)}))}return p=p?p.then(l,l):l()}})}function O(e,t,o){var l="suspendedStart";return function(u,f){if("executing"===l)throw new Error("Generator is already running");if("completed"===l){if("throw"===u)throw f;return R()}for(o.method=u,o.arg=f;;){var p=o.delegate;if(p){var m=j(p,o);if(m){if(m===w)continue;return m}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===l)throw l="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);l="executing";var g=_(e,t,o);if("normal"===g.type){if(l=o.done?"completed":"suspendedYield",g.arg===w)continue;return{value:g.arg,done:o.done}}"throw"===g.type&&(l="completed",o.method="throw",o.arg=g.arg)}}}function j(e,t){var o=t.method,l=e.iterator[o];if(void 0===l)return t.delegate=null,"throw"===o&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==o&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+o+"' method")),w;var u=_(l,e.iterator,t.arg);if("throw"===u.type)return t.method="throw",t.arg=u.arg,t.delegate=null,w;var f=u.arg;return f?f.done?(t[e.resultName]=f.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):f:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function L(e){if(e){var t=e[m];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var l=-1,u=function t(){for(;++l<e.length;)if(o.call(e,l))return t.value=e[l],t.done=!1,t;return t.value=void 0,t.done=!0,t};return u.next=u}}return{next:R}}function R(){return{value:void 0,done:!0}}return x.prototype=S,l(P,"constructor",{value:S,configurable:!0}),l(S,"constructor",{value:x,configurable:!0}),x.displayName=v(S,y,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,v(e,y,"GeneratorFunction")),e.prototype=Object.create(P),e},e.awrap=function(e){return{__await:e}},E(D.prototype),v(D.prototype,g,(function(){return this})),e.AsyncIterator=D,e.async=function(t,o,l,u,f){void 0===f&&(f=Promise);var p=new D(b(t,o,l,u),f);return e.isGeneratorFunction(o)?p:p.next().then((function(e){return e.done?e.value:p.next()}))},E(P),v(P,y,"Generator"),v(P,m,(function(){return this})),v(P,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),o=[];for(var l in t)o.push(l);return o.reverse(),function e(){for(;o.length;){var l=o.pop();if(l in t)return e.value=l,e.done=!1,e}return e.done=!0,e}},e.values=L,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function l(o,l){return p.type="throw",p.arg=e,t.next=o,l&&(t.method="next",t.arg=void 0),!!l}for(var u=this.tryEntries.length-1;u>=0;--u){var f=this.tryEntries[u],p=f.completion;if("root"===f.tryLoc)return l("end");if(f.tryLoc<=this.prev){var m=o.call(f,"catchLoc"),g=o.call(f,"finallyLoc");if(m&&g){if(this.prev<f.catchLoc)return l(f.catchLoc,!0);if(this.prev<f.finallyLoc)return l(f.finallyLoc)}else if(m){if(this.prev<f.catchLoc)return l(f.catchLoc,!0)}else{if(!g)throw new Error("try statement without catch or finally");if(this.prev<f.finallyLoc)return l(f.finallyLoc)}}}},abrupt:function(e,t){for(var l=this.tryEntries.length-1;l>=0;--l){var u=this.tryEntries[l];if(u.tryLoc<=this.prev&&o.call(u,"finallyLoc")&&this.prev<u.finallyLoc){var f=u;break}}f&&("break"===e||"continue"===e)&&f.tryLoc<=t&&t<=f.finallyLoc&&(f=null);var p=f?f.completion:{};return p.type=e,p.arg=t,f?(this.method="next",this.next=f.finallyLoc,w):this.complete(p)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),N(o),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var l=o.completion;if("throw"===l.type){var u=l.arg;N(o)}return u}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:L(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=void 0),w}},e}function m(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var l=0,u=function(){};return{s:u,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,p=!0,m=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return p=e.done,e},e:function(e){m=!0,f=e},f:function(){try{p||null==o.return||o.return()}finally{if(m)throw f}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,l=new Array(t);o<t;o++)l[o]=e[o];return l}function y(e,t,o,l,u,f,p){try{var m=e[f](p),g=m.value}catch(e){return void o(e)}m.done?t(g):Promise.resolve(g).then(l,u)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,(u=l.key,p=void 0,p=function(e,t){if("object"!==f(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==f(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(u,"string"),"symbol"===f(p)?p:String(p)),l)}var u,p}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=x(e);if(t){var u=x(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return k(this,o)}}function k(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var S=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(S,e);var t,o,f,g,k,x=w(S);function S(){return v(this,S),x.apply(this,arguments)}return t=S,o=[{key:"play",value:(g=p().mark((function e(t,o){var f,g,y,v,b,_,w=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(assert(o,"No move"),assert(t&&t.key===this.whosTurnKey,"Not ".concat(t.name,"'s turn")),this._debug&&(this._debug("Playing",(0,l.stringify)(o)),this._debug("Player's rack is ".concat(t.rack.stringify()))),!this.dictionary||this.isRobot||this.wordCheck!==u.Game.WordCheck.REJECT){e.next=12;break}return this._debug&&this._debug("Validating play"),f=[],e.next=8,this.getDictionary().then((function(e){var t,l=m(o.words);try{for(l.s();!(t=l.n()).done;){var u=t.value;e.hasWord(u.word)||f.push(u.word)}}catch(e){l.e(e)}finally{l.f()}}));case 8:if(!(f.length>0)){e.next=12;break}return this._debug&&this._debug("\trejecting",f),this.notifyPlayer(t,u.Game.Notify.REJECT,{playerKey:t.key,words:f}),e.abrupt("return",Promise.resolve());case 12:if(!t.wantsAdvice){e.next=15;break}return e.next=15,this.advise(t,o.score);case 15:for(assert(o.placements,"No placements"),this.rackToBoard(o.placements,t),t.score+=o.score,this.dictionary&&this.wordCheck===u.Game.WordCheck.AFTER&&!t.isRobot&&this.getDictionary().then((function(e){if(o.words){var l,f=m(o.words);try{for(f.s();!(l=f.n()).done;){var p=l.value;w._debug&&w._debug("Checking ",p),e.hasWord(p.word)||w.notifyPlayer(t,u.Game.Notify.MESSAGE,{sender:"Advisor",text:"word-not-found",args:[p.word,e.name]})}}catch(e){f.e(e)}finally{f.f()}}})),g=t.passes,t.passes=0,y=[],v=0;v<o.placements.length;v++)(b=this.letterBag.getRandomTile())&&(t.rack.addTile(b),y.push(b));return _=this.nextPlayer(),this.whosTurnKey=_.key,e.abrupt("return",this.finishTurn(t,{type:u.Game.Turns.PLAYED,nextToGoKey:_.key,score:o.score,placements:o.placements,replacements:y,words:o.words,passes:g}).then((function(){return w.startTurn(_)})));case 26:case"end":return e.stop()}}),e,this)})),k=function(){var e=this,t=arguments;return new Promise((function(o,l){var u=g.apply(e,t);function f(e){y(u,o,l,f,p,"next",e)}function p(e){y(u,o,l,f,p,"throw",e)}f(void 0)}))},function(e,t){return k.apply(this,arguments)})},{key:"pause",value:function(e){return this.pausedBy?Promise.resolve(this):(this.stopTheClock(),this.pausedBy=e.name,this._debug&&this._debug("".concat(this.pausedBy," has paused game")),this.notifyAll(u.Game.Notify.PAUSE,{key:this.key,name:e.name,timestamp:Date.now()}),this.save())}},{key:"unpause",value:function(e){return this.pausedBy?(this._debug&&this._debug("".concat(e.name," has unpaused game")),this.notifyAll(u.Game.Notify.UNPAUSE,{key:this.key,name:e.name,timestamp:Date.now()}),this.pausedBy=void 0,this.startTheClock(),this.save()):Promise.resolve(this)}},{key:"confirmGameOver",value:function(e,t){var o,l=this;if(this.state!==u.Game.State.PLAYING)return Promise.resolve();this.state=t||u.Game.State.GAME_OVER,this._debug&&this._debug("Confirming game over because ".concat(this.state)),this.stopTheClock();var f=0,p={};this.players.forEach((function(e){var t={key:e.key,tiles:0};if(e.rack.isEmpty())assert(!o,"Found more than one player with no tiles when finishing game"),o=e;else{var m=e.rack.score();e.score-=m,t.tiles-=m,t.tilesRemaining=e.rack.lettersLeft().join(","),f+=m,l._debug&&l._debug("\t".concat(e.name,": ").concat(m," points left ").concat(t.tilesRemaining))}if(l.timerType===u.Game.Timer.GAME&&e.clock<0){var g=Math.round(e.clock*l.timePenalty/60);l._debug&&l._debug(e.name,"over by",-e.clock,"s, score",g,"points"),g<0&&(t.time=g)}p[e.key]=t})),o&&(o.score+=f,p[o.key].tiles=f,this._debug&&this._debug(o.name,"gains",f));var m=this.constructor.CLASSES;return this.finishTurn(e,new m.Turn({type:u.Game.Turns.GAME_ENDED,endState:t,score:Object.keys(p).map((function(e){return p[e]}))}))}},{key:"takeBack",value:function(e,t){var o=this,l=this.lastTurn();assert(l,"No previous move to take back"),assert(l.type==u.Game.Turns.PLAYED,"Cannot challenge a ".concat(l.type));var f=this.getPlayerWithKey(l.playerKey);this.rackToBag(l.replacements,f),l.placements&&this.boardToRack(l.placements,f),f.score-=l.score;var p={type:t,nextToGoKey:t===u.Game.Turns.CHALLENGE_WON?this.whosTurnKey:e.key,score:-l.score,placements:l.placements,replacements:l.replacements};return t===u.Game.Turns.CHALLENGE_WON&&(p.challengerKey=e.key),this.finishTurn(f,p).then((function(){return t===u.Game.Turns.TOOK_BACK?o.startTurn(e,l.remainingTime):Promise.resolve(o)}))}},{key:"pass",value:function(e,t){var o=this;assert(e.key===this.whosTurnKey,"Not ".concat(e.name,"'s turn")),e.passes++;var l=this.nextPlayer();return this.finishTurn(e,{type:t||u.Game.Turns.PASSED,nextToGoKey:l.key}).then((function(){return o.startTurn(l)}))}},{key:"challenge",value:function(e,t){var o=this;assert(e.key!==t.key,"Cannot challenge your own play"),assert(this.turns.length>0,"No previous move to challenge");var l=this.lastTurn();return assert(l.type===u.Game.Turns.PLAYED,"Cannot challenge a ".concat(l.type)),assert(t.key===l.playerKey,"Last player challenge mismatch"),this.getDictionary().catch((function(){return o._debug&&o._debug("No dictionary, so challenge always succeeds"),o.takeBack(e,u.Game.Turns.CHALLENGE_WON)})).then((function(f){var p=l.words.filter((function(e){return!f.hasWord(e.word)}));if(p.length>0)return o._debug&&o._debug("Bad words: ",p),o.takeBack(e,u.Game.Turns.CHALLENGE_WON);o._debug&&o._debug("Challenge failed,",o.challengePenalty);var m=o.getPlayer().key,g=o.nextPlayer();if(e.key===m&&o.challengePenalty===u.Game.Penalty.MISS)return l.replacements&&0!==l.replacements.length||!t.rack.isEmpty()?o.finishTurn(t,{type:u.Game.Turns.CHALLENGE_LOST,penalty:u.Game.Penalty.MISS,challengerKey:e.key,nextToGoKey:g.key}).then((function(){return o.startTurn(g)})):o.confirmGameOver(o.getPlayer(),u.Game.State.FAILED_CHALLENGE);var y=0;switch(o.challengePenalty){case u.Game.Penalty.MISS:e.missNextTurn=!0;break;case u.Game.Penalty.PER_TURN:y=-o.penaltyPoints;break;case u.Game.Penalty.PER_WORD:y=-o.penaltyPoints*l.words.length}return e.score+=y,o.finishTurn(t,{type:u.Game.Turns.CHALLENGE_LOST,score:y,challengerKey:e.key,nextToGoKey:m})}))}},{key:"swap",value:function(e,t){var o=this;assert(e.key===this.whosTurnKey,"Not ".concat(e.name,"'s turn")),assert(this.letterBag.remainingTileCount()>=t.length,"Cannot swap, bag only has ".concat(this.letterBag.remainingTileCount()," tiles")),e.passes++;var l=this.letterBag.getRandomTiles(t.length);this.rackToBag(t,e);var f,p=m(l);try{for(p.s();!(f=p.n()).done;){var g=f.value;e.rack.addTile(g)}}catch(e){p.e(e)}finally{p.f()}var y=this.nextPlayer();return this.finishTurn(e,{type:u.Game.Turns.SWAPPED,nextToGoKey:y.key,placements:t,replacements:l}).then((function(){return o.startTurn(y)}))}},{key:"anotherGame",value:function(){var e=this;if(this.nextGameKey)return Promise.reject("Next game already exists");this._debug&&this._debug("Create game to follow",this.key);var t=new this.constructor(this);return t.key=(0,l.genKey)(),t.create().then((function(){return t.onLoad(e._db)})).then((function(){return e.nextGameKey=t.key})).then((function(){return e.save()})).then((function(){t.creationTimestamp=Date.now(),t.turns=[];var o,l=e.constructor.CLASSES,f=m(e.players);try{for(f.s();!(o=f.n()).done;){var p=o.value,g=new l.Player(p,l);t.addPlayer(g,!0)}}catch(e){f.e(e)}finally{f.f()}t.state=u.Game.State.WAITING,t.whosTurnKey=void 0,t._noPlayerShuffle=e._noPlayerShuffle,e._debug&&e._debug("Created follow-on game",t.key)})).then((function(){return t.save()})).then((function(){return t.playIfReady()})).then((function(){return e.notifyAll(u.Game.Notify.NEXT_GAME,{gameKey:t.key,timestamp:Date.now()})})).then((function(){return t}))}},{key:"toggleAdvice",value:function(e){e.toggleAdvice(),this.notifyPlayer(e,u.Game.Notify.MESSAGE,{sender:"Advisor",text:e.wantsAdvice?"Enabled":"Disabled"}),e.wantsAdvice&&this.notifyAll(u.Game.Notify.MESSAGE,{sender:"Advisor",text:"advised",classes:"warning",args:[e.name],timestamp:Date.now()})}},{key:"advise",value:function(e,t){var o=this;if(!this.dictionary)return this.notifyPlayer(e,u.Game.Notify.MESSAGE,{sender:"Advisor",text:"No dictionary"}),Promise.resolve();this._debug&&this._debug("Computing advice for",e.name," > ",t,e.rack.tiles().map((function(e){return e.letter})),this.board.stringify());var l=null;return Platform.findBestPlay(this,e.rack.tiles(),(function(e){"string"==typeof e?o._debug&&o._debug(e):l=e}),this.dictionary).then((function(){if(o._debug&&o._debug("Incoming",l),l&&l.score>t){o._debug("Better play found for ".concat(e.name));var f=l.placements[0],p={sender:"Advisor",text:"possible-score",args:[l.words.map((function(e){return e.word})).join(","),f.row+1,f.col+1,l.score]};o.notifyPlayer(e,u.Game.Notify.MESSAGE,p),o.notifyOthers(e,u.Game.Notify.MESSAGE,{sender:"Advisor",text:"was-advised",classes:"warning",args:[e.name],timestamp:Date.now()})}else o._debug&&o._debug("No better plays found for",e.name)})).catch((function(e){console.error("Error",e)}))}},{key:"hint",value:function(e){var t=this;if(this.dictionary){this._debug&&this._debug("Player",e.name,"asked for a hint");var o=null;Platform.findBestPlay(this,e.rack.tiles(),(function(e){"string"==typeof e?t._debug&&t._debug(e):o=e}),this.dictionary).then((function(){var l={sender:"Advisor"};if(o){var f=o.placements[0];l.text="_hint_";var p=o.words.map((function(e){return e.word})).join(",");l.args=[p,f.row+1,f.col+1,o.score]}else l.text="log-no-play";t.notifyPlayer(e,u.Game.Notify.MESSAGE,l),t.notifyOthers(e,u.Game.Notify.MESSAGE,{sender:"Advisor",text:"hinted",classes:"warning",args:[e.name],timestamp:Date.now()})})).catch((function(e){t._debug&&t._debug("Error:",e),t.notifyAll(u.Game.Notify.MESSAGE,{sender:"Advisor",text:e.toString(),timestamp:Date.now()})}))}else this.notifyPlayer(e,u.Game.Notify.MESSAGE,{sender:"Advisor",text:"No dictionary"})}},{key:"allow",value:function(e,t){var o=this;t=t.toUpperCase(),this.getDictionary().then((function(l){l.addWord(t)?o.notifyAll(u.Game.Notify.MESSAGE,{sender:"Advisor",text:"log-word-added",args:[e.name,t,l.name]}):o.notifyPlayer(e,u.Game.Notify.MESSAGE,{sender:"Advisor",text:"word-there",args:[t,l.name]})}))}},{key:"dispatchCommand",value:function(e,t,o){switch(this._debug&&this._debug("COMMAND",e,"player",t.name,"game",this.key),e){case u.Game.Command.CHALLENGE:return this.challenge(t,this.getPlayerWithKey(o.challengedKey));case u.Game.Command.CONFIRM_GAME_OVER:return this.confirmGameOver(t,u.Game.State.GAME_OVER);case u.Game.Command.PASS:return this.pass(t,u.Game.Turns.PASSED);case u.Game.Command.PAUSE:return this.pause(t);case u.Game.Command.PLAY:return this.play(t,o);case u.Game.Command.REDO:return this.redo(o);case u.Game.Command.SWAP:return this.swap(t,o);case u.Game.Command.TAKE_BACK:return this.takeBack(t,u.Game.Turns.TOOK_BACK);case u.Game.Command.UNDO:this.undo(this.popTurn());break;case u.Game.Command.UNPAUSE:return this.unpause(t);default:return assert.fail("unrecognized command: ".concat(e))}}}],o&&b(t.prototype,o),f&&b(t,f),Object.defineProperty(t,"prototype",{writable:!1}),S}(e)}},"./src/game/Edition.js":function(e,t,o){function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var l=0,u=function(){};return{s:u,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var p,m=!0,g=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return m=e.done,e},e:function(e){g=!0,p=e},f:function(){try{m||null==o.return||o.return()}finally{if(g)throw p}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,l=new Array(t);o<t;o++)l[o]=e[o];return l}function p(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,g(l.key),l)}}function m(e,t,o){return(t=g(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function g(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var u=o.call(e,t||"default");if("object"!==l(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}o.r(t),o.d(t,{Edition:function(){return v}});var y={},v=function(){function e(t){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"name",void 0),m(this,"bag",void 0),m(this,"layout",void 0),m(this,"rackCount",void 0),m(this,"swapCount",void 0),m(this,"maxPlayers",void 0),m(this,"bonuses",void 0),m(this,"scores",void 0),m(this,"rows",void 0),m(this,"cols",void 0),m(this,"alphabet",void 0),Object.getOwnPropertyNames(t).forEach((function(e){return o[e]=t[e]})),this.bonuses=t.bonuses,this.scores={},this.rows=2*this.layout.length-1,this.cols=this.rows;var l,f=[],p=u(this.bag);try{for(p.s();!(l=p.n()).done;){var g=l.value;g.letter?f.push(g.letter):(g.letter=" ",g.isBlank=!0),this.scores[g.letter]=g.score||0}}catch(e){p.e(e)}finally{p.f()}this.alphabet=f.sort()}var t,o,l;return t=e,l=[{key:"load",value:function(t){return y[t]?Promise.resolve(y[t]):Platform.readFile(Platform.getFilePath("editions/".concat(t,".json"))).then((function(o){return o.name=t,y[t]=new e(o),y[t]}))}}],(o=[{key:"squareType",value:function(e,t){var o=Math.abs(e-Math.floor(this.cols/2)),l=Math.abs(t-Math.floor(this.rows/2));return this.layout[o].charAt(l)}},{key:"letterScore",value:function(e){return this.scores[e]?this.scores[e]:0}},{key:"calculateBonus",value:function(e){return this.bonuses&&this.bonuses[e]||0}}])&&p(t.prototype,o),l&&p(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/game/Game.js":function(e,t,o){o.r(t),o.d(t,{Game:function(){return O}});var l=o("./node_modules/@cdot/cbor/dist/mjs/index.js"),u=o("./src/common/Utils.js"),f=o("./src/common/Fridge.js"),p=o("./src/game/loadDictionary.js"),m=o("./src/game/Board.js"),g=o("./src/game/Edition.js"),y=o("./src/game/LetterBag.js"),v=o("./src/game/Move.js"),b=o("./src/game/Player.js"),_=o("./src/game/Rack.js"),w=o("./src/game/Square.js"),k=o("./src/game/Tile.js"),x=o("./src/game/Turn.js");function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function T(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return C(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var l=0,u=function(){};return{s:u,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,p=!0,m=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return p=e.done,e},e:function(e){m=!0,f=e},f:function(){try{p||null==o.return||o.return()}finally{if(m)throw f}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,l=new Array(t);o<t;o++)l[o]=e[o];return l}function A(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,E(l.key),l)}}function P(e,t,o){return(t=E(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function E(e){var t=function(e,t){if("object"!==S(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==S(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===S(t)?t:String(t)}var D=new((0,l.KeyDictionaryHandler)((0,l.IDREFHandler)((0,l.TypeMapHandler)(l.TagHandler))))({added:function(e){throw Error(e)},keys:["type","surface","col","row","tile","underlay","letterScoreMultiplier","wordScoreMultiplier","letter","score","isBlank","isLocked","id","cols","rows","squares","midrow","midcol","tiles","legalLetters","isWild","predictable","key","state","creationTimestamp","players","turns","board","rackSize","swapSize","bonuses","letterBag","whosTurnKey","edition","dictionary","timerType","timeAllowed","timePenalty","challengePenalty","penaltyPoints","wordCheck","minPlayers","maxPlayers","predictScore","allowTakeBack","allowUndo","syncRacks","nextGameKey","pausedBy","3","4","5","6","7","8","9","name","rack","passes","clock","missNextTurn","wantsAdvice","isRobot","canChallenge","delayBeforePlay","gameKey","playerKey","nextToGoKey","timestamp","placements","replacements","challengerKey","endState","tilesRemaining","time","words","word","game","Platform","data","nextTurn","predictable"]}),O=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),P(this,"_channels",[]),this._debug=t._debug,this.key=t.key||(0,u.genKey)(),this.state=e.State.WAITING,this.creationTimestamp=t.creationTimestamp||Date.now(),this.players=[],this.turns=[],this.board=void 0,this.rackSize=void 0,this.swapSize=void 0,this.bonuses=void 0,this.letterBag=void 0,this.whosTurnKey=void 0,this._undoer=void 0,this.edition=t.edition,t.dictionary&&(this.dictionary=t.dictionary),t.timerType&&"none"!==t.timerType&&(this.timerType=t.timerType),this.timerType&&(void 0!==t.timeAllowed?this.timeAllowed=t.timeAllowed:this.timeAllowed=0,this.timeAllowed<=0&&(this.timerType===e.Timer.GAME?this.timeAllowed=25:this.timeAllowed=1),this.timerType===e.Timer.GAME&&(this.timePenalty=t.timePenalty||5)),t.challengePenalty&&"none"!==t.challengePenalty&&(this.challengePenalty=t.challengePenalty),this.challengePenalty!==e.Penalty.PER_TURN&&this.challengePenalty!==e.Penalty.PER_WORD||(this.penaltyPoints=t.penaltyPoints||5),t.wordCheck&&"none"!==t.wordCheck&&(this.wordCheck=t.wordCheck),t.minPlayers>2&&(this.minPlayers=t.minPlayers),t.maxPlayers>2&&(this.maxPlayers=t.maxPlayers),void 0!==this.maxPlayers&&this.maxPlayers<(this.minPlayers||2)&&delete this.maxPlayers,t.predictScore&&(this.predictScore=!0),t.allowTakeBack&&(this.allowTakeBack=!0),t.allowUndo&&(this.allowUndo=!0),t.syncRacks&&(this.syncRacks=!0),t._noPlayerShuffle&&(this._noPlayerShuffle=!0),t.nextGameKey&&(this.nextGameKey=t.nextGameKey),t.pausedBy&&(this.pausedBy=t.pausedBy)}var t,o,m;return t=e,m=[{key:"fromSerialisable",value:function(e,t){var o=new t.Game(e);return o.state=e.state,o.players=e.players.map((function(e){return t.Player.fromSerialisable(e,t)})),o.turns=e.turns.map((function(e){return x.Turn.fromSerialisable(e,t)})),o}},{key:"toCBOR",value:function(t,o){return D.typeMap=e.CLASSES,l.Encoder.encode(t,D,o)}},{key:"fromCBOR",value:function(e,t,o){D.typeMap=t;try{return l.Decoder.decode(e,D,o)}catch(l){o&&o("CBOR error decoding:\n",l.message);try{return f.Fridge.thaw(e.toString(),t)}catch(e){throw Error("Thawing error: ".concat(e))}}}}],(o=[{key:"create",value:function(){var e=this;return this.getEdition().then((function(t){var o=e.constructor.CLASSES;return e.board=new o.Board(o,t),e.letterBag=new y.LetterBag(t),e.bonuses=t.bonuses,e.rackSize=t.rackCount,e.swapSize=t.swapCount,e}))}},{key:"getEdition",value:function(){return g.Edition.load(this.edition)}},{key:"addPlayer",value:function(e,t){return assert(this.letterBag,"Cannot addPlayer() before create()"),assert(!this.maxPlayers||this.players.length<this.maxPlayers,"Cannot addPlayer() to a full game"),e._debug=this._debug,this.players.push(e),this.timerType&&(e.clock=60*this.timeAllowed),t&&e.fillRack(this.letterBag,this.rackSize),this._debug&&this._debug(this.key,"added player",e.stringify()),this}},{key:"removePlayer",value:function(t){t.returnTiles(this.letterBag);var o=this.players.findIndex((function(e){return e.key===t.key}));assert(o>=0,"No such player ".concat(t.key," in ").concat(this.key)),this.players.splice(o,1),this._debug&&this._debug(t.key,"left",this.key),this.players.length<(this.minPlayers||2)&&this.state!==e.State.GAME_OVER&&(this.state=e.State.WAITING)}},{key:"getPlayerWithKey",value:function(e){return this.players.find((function(t){return t.key===e}))}},{key:"getPlayer",value:function(){return this.getPlayerWithKey(this.whosTurnKey)}},{key:"getPlayers",value:function(){return this.players}},{key:"previousPlayer",value:function(e){void 0===e?e=this.getPlayer():"string"==typeof e&&(e=this.getPlayerWithKey(e));var t=this.players.findIndex((function(t){return t.key===e.key}));return assert(t>=0,"".concat(e.key," not found in ").concat(this.key)),this.players[(t+this.players.length-1)%this.players.length]}},{key:"nextPlayer",value:function(e){void 0===e?e=this.getPlayer():"string"==typeof e&&(e=this.getPlayerWithKey(e));var t=this.players.findIndex((function(t){return t.key===e.key}));assert(t>=0,"".concat(e.key," not found in ").concat(this.key));for(var o=0;o<this.players.length;o++){var l=this.players[(t+1)%this.players.length];if(!l.missNextTurn)return l;l.missNextTurn=!1,t++}return assert.fail("Unable to determine next player after ".concat(e.key))}},{key:"calculateBonus",value:function(e){return this.bonuses&&this.bonuses[e]||0}},{key:"winningScore",value:function(){return this.players.reduce((function(e,t){return Math.max(e,t.score)}),0)}},{key:"getWinner",value:function(){return this.players.reduce((function(e,t){return t.score>e.score?t:e}),this.players[0])}},{key:"getPlayerWithNoTiles",value:function(){return this.players.find((function(e){return 0===e.rack.tiles().length}))}},{key:"hasEnded",value:function(){switch(this.state){case e.State.WAITING:case e.State.FAILED_CHALLENGE:case e.State.PLAYING:return!1;case void 0:case e.State.GAME_OVER:case e.State.TWO_PASSES:case e.State.TIMED_OUT:return!0;default:return assert.fail("Bad game state ".concat(this.state)),!0}}},{key:"lastActivity",value:function(){var e=this.lastTurn();return e?e.timestamp:this.creationTimestamp}},{key:"lastTurn",value:function(){if(0!==this.turns.length)return this.turns[this.turns.length-1]}},{key:"pushTurn",value:function(e){return this.turns.push(e)}},{key:"popTurn",value:function(){return assert(this.turns.length>0,"No turns"),this.turns.pop()}},{key:"forEachTurn",value:function(e){var t=this;this.turns.forEach((function(o,l){return e(o,l===t.turns.length-1)}))}},{key:"at",value:function(e,t){return this.board.at(e,t)}},{key:"stringify",value:function(){var t=["edition:".concat(this.edition)];this.dictionary&&t.push("dictionary:".concat(this.dictionary)),this.timerType&&(t.push("".concat(this.timerType,":").concat(this.timeAllowed)),this.timerType===e.Timer.GAME&&t.push("timePenalty:".concat(this.timePenalty))),this.challengePenalty&&(t.push(this.challengePenalty),this.challengePenalty!==e.Penalty.PER_TURN&&this.challengePenalty!==e.Penalty.PER_WORD||t.push("lose:".concat(this.penaltyPoints))),this.whosTurnKey&&t.push("next:".concat(this.whosTurnKey)),this.wordCheck&&t.push(this.wordCheck),this.challengePenalty&&t.push(this.challengePenalty),this.predictScore&&t.push("Predict"),this.allowTakeBack&&t.push("Allow takeback"),this.minPlayers&&t.push(">=".concat(this.minPlayers));var o=this.players.map((function(e){return e.stringify()})).join(",");return t.push("players:[".concat(o,"]")),this.maxPlayers&&t.push("<=".concat(this.maxPlayers)),this.nextGameKey&&t.push("Next game ".concat(this.nextGameKey)),this.pausedBy&&t.push("Paused by ".concat(this.pausedBy)),"Game ".concat(this.key," {").concat(t.join(", "),"}")}},{key:"hasRobot",value:function(){return this.players.find((function(e){return e.isRobot}))}},{key:"serialisable",value:function(t){var o=this;return Promise.all(this.players.map((function(e){return e.serialisable(o,t)}))).then((function(t){var l={key:o.key,creationTimestamp:o.creationTimestamp,edition:o.edition,dictionary:o.dictionary,state:o.state,allowUndo:o.allowUndo,players:t,whosTurnKey:o.whosTurnKey,timerType:o.timerType,challengePenalty:o.challengePenalty,lastActivity:o.lastActivity(),turns:o.turns.map((function(e){return e.serialisable()}))};return o.minPlayers&&(l.minPlayers=o.minPlayers),o.maxPlayers&&(l.maxPlayers=o.maxPlayers),o.wordCheck&&(l.wordCheck=o.wordCheck),o.timerType!=e.TIMER_NONE&&(l.timeAllowed=o.timeAllowed,l.timePenalty=o.timePenalty),o.challengePenalty!==e.Penalty.PER_TURN&&o.challengePenalty!==e.Penalty.PER_WORD||(l.penaltyPoints=o.penaltyPoints),o.nextGameKey&&(l.nextGameKey=o.nextGameKey),o.pausedBy&&(l.pausedBy=o.pausedBy),o.predictScore&&(l.predictScore=!0),o.allowTakeBack&&(l.allowTakeBack=!0),l}))}},{key:"onLoad",value:function(e){var t=this;return this._db=e,this._channels||(this._channels=[]),this.timeLimit&&!this.timeAllowed&&(this.timeAllowed=this.timeLimit/60),this._debug||(this._debug=function(){},this.players.forEach((function(e){return e._debug=t._debug}))),Promise.resolve(this)}},{key:"boardToRack",value:function(e,t){var o,l=T(e);try{for(l.s();!(o=l.n()).done;){var f=o.value,p=this.at(f.col,f.row).unplaceTile();assert(p,"No tile at ".concat((0,u.stringify)(f))),t.rack.addTile(p)}}catch(e){l.e(e)}finally{l.f()}}},{key:"rackToBoard",value:function(e,t,o){var l,f=T(e);try{for(f.s();!(l=f.n()).done;){var p=l.value,m=t.rack.removeTile(p);assert(m,"Tile ".concat((0,u.stringify)(p)," not found on rack")),this.at(p.col,p.row).placeTile(m,!0),o&&o(m)}}catch(e){f.e(e)}finally{f.f()}}},{key:"bagToRack",value:function(e,t){var o,l=T(e);try{for(l.s();!(o=l.n()).done;){var f=o.value,p=this.letterBag.removeTile(f);assert(p,"".concat((0,u.stringify)(f)," missing from bag")),t.rack.addTile(p)}}catch(e){l.e(e)}finally{l.f()}}},{key:"rackToBag",value:function(e,t){var o,l=T(e);try{for(l.s();!(o=l.n()).done;){var f=o.value,p=t.rack.removeTile(f);assert(p,"".concat((0,u.stringify)(f)," missing from rack")),this.letterBag.returnTile(p)}}catch(e){l.e(e)}finally{l.f()}}},{key:"playIfReady",value:function(){var t=this;if(this._debug&&this._debug("playIfReady ",this.key,this.whosTurnKey?"player ".concat(this.whosTurnKey):"","state",this.state),this.hasEnded())return this._debug&&this._debug("\tgame is over"),Promise.resolve(this);if(this.players.length<(this.minPlayers||2))return this._debug&&this._debug("\tnot enough players"),Promise.resolve(this);if(this.state===e.State.WAITING){if(this._debug&&this._debug("\tpreconditions met"),this.players.length>1&&!this._noPlayerShuffle){this._debug&&this._debug("\tshuffling player order");for(var o=this.players.length-1;o>0;o--){var l=Math.floor(Math.random()*(o+1)),u=this.players[o];this.players[o]=this.players[l],this.players[l]=u}this.sendCONNECTIONS()}var f=this.players[0];return this.whosTurnKey=f.key,this._debug&&this._debug("\t",f.key,"to play"),this.state=e.State.PLAYING,this.save().then((function(){return t.startTurn(f)}))}var p=this.getPlayer();if(p){if(p.isRobot)return this.startTurn(p);this._debug&&this._debug("\twaiting for",p.name,"to play"),this.startTheClock()}return Promise.resolve(this)}},{key:"finishTurn",value:function(t,o){var l=this;(o=new x.Turn(o)).gameKey=this.key,o.playerKey=t.key,this.pushTurn(o);var u=o;if(!this.allowUndo&&!this.syncRacks&&o.replacements){(u=new x.Turn(o)).replacements=[];var f,p=T(o.replacements);try{for(p.s();!(f=p.n()).done;){var m=f.value,g=new k.Tile(m);g.letter="#",u.replacements.push(g)}}catch(e){p.e(e)}finally{p.f()}}return this.save().then((function(){return Promise.all([l.notifyPlayer(t,e.Notify.TURN,o),l.notifyOthers(t,e.Notify.TURN,u)])})).then((function(){return l}))}},{key:"startTheClock",value:function(){var t=this;return!(void 0!==this._intervalTimer||!this.timerType||this.state!==e.State.PLAYING||(this._intervalTimer=setInterval((function(){return t.tick()}),1e3),this._debug&&this._debug(this.key,"started the clock"),0))}},{key:"stopTheClock",value:function(){return void 0!==this._intervalTimer&&(this._debug&&this._debug(this.key,"stopped the clock"),clearInterval(this._intervalTimer),delete this._intervalTimer,!0)}},{key:"tick",value:function(){var t=this.getPlayer();t&&(t.tick(),this.notifyAll(e.Notify.TICK,{gameKey:this.key,playerKey:t.key,clock:t.clock,timestamp:Date.now()}))}},{key:"startTurn",value:function(t,o){var l=this;return assert(t,"No player"),this.players.find((function(e){return e.passes<2}))?(this._debug&&this._debug("startTurn",t.name,t.key),this.whosTurnKey=t.key,t.isRobot?this.autoplay():this.timerType?(this._debug&&this._debug("\ttimed game,",t.name,"has",o||this.timeAllowed,"left to play",this.timerType),this.startTheClock(),this.timerType===e.Timer.TURN&&t.setTimeout(o||60*this.timeAllowed,(function(){return l.pass(t,e.Turns.TIMED_OUT)})),Promise.resolve(this)):(this._debug&&this._debug("\tuntimed game, wait for",t.name,"to play"),Promise.resolve(this))):this.confirmGameOver(t,e.State.TWO_PASSES)}},{key:"autoplay",value:function(){var t=this,o=this.getPlayer();this._debug&&this._debug("Autoplaying",o.name,"using",o.dictionary||this.dictionary);var l=(o.delayBeforePlay||0)>0?new Promise((function(e){return setTimeout(e,500*o.delayBeforePlay)})):Promise.resolve(),u=(o.delayBeforePlay||0)>0?new Promise((function(e){return setTimeout(e,500*o.delayBeforePlay)})):Promise.resolve(),f=this.lastTurn();if(f&&f.type===e.Turns.PLAYED&&this.dictionary&&o.canChallenge){var p=this.getPlayerWithKey(f.playerKey);p.isRobot||(l=l.then((function(){return t.getDictionary()})).then((function(l){var u=f.words.filter((function(e){return!l.hasWord(e.word)}));return u.length>0&&(t._debug&&t._debug("Challenging",p.name),t._debug&&t._debug("Bad words:",u),t.takeBack(o,e.Turns.CHALLENGE_WON).then((function(){return!0})))})))}return l.then((function(l){if(!l&&f&&t.getPlayerWithKey(f.playerKey).rack.isEmpty())return t.confirmGameOver(o,e.State.GAME_OVER);var p=null;return Platform.findBestPlay(t,o.rack.tiles(),(function(e){"string"==typeof e?t._debug&&t._debug(e):(p=e,t._debug&&t._debug("Best",p.stringify()))}),o.dictionary||t.dictionary).then((function(){return p?u.then((function(){return t.play(o,p)})):(t._debug&&t._debug(o.name,"can't play, passing"),t.pass(o,e.Turns.PASSED))}))}))}},{key:"getDictionary",value:function(){return assert(this.dictionary,"Game has no dictionary"),(0,p.loadDictionary)(this.dictionary)}},{key:"save",value:function(){var t=this;return assert(this._db,"No _db for save()"),this._debug&&this._debug("Saving game",this.key),this._db.set(this.key,e.toCBOR(this)).then((function(){return t}))}},{key:"notifyPlayer",value:function(e,t,o){this._debug&&this._debug("b>f",e.key,t,(0,u.stringify)(o)),this._channels.forEach((function(l){return l.player&&l.player.key===e.key&&l.emit(t,o),!1}))}},{key:"notifyAll",value:function(t,o){t!==e.Notify.TICK&&this._debug&&this._debug("b>f *",t,(0,u.stringify)(o)),this._channels.forEach((function(e){return e.emit(t,o)}))}},{key:"notifyOthers",value:function(e,t,o){this._debug&&this._debug("b>f !",e.key,t,(0,u.stringify)(o)),this._channels.forEach((function(l){return l.player&&l.player.key!==e.key&&l.emit(t,o),!1}))}},{key:"getConnection",value:function(e){if(e){var t,o=T(this._channels);try{for(o.s();!(t=o.n()).done;){var l=t.value;if(l.player&&l.player===e)return e._isConnected=!0,l}}catch(e){o.e(e)}finally{o.f()}e._isConnected=!1}}},{key:"sendCONNECTIONS",value:function(){var t=this;Promise.all(this.players.map((function(e){return e.serialisable(t).then((function(e){return e.gameKey=t.key,e.key===t.whosTurnKey&&(e.isNextToGo=!0),e}))}))).then((function(o){o=o.concat(t._channels.filter((function(e){return!e.player})).map((function(){return{isObserver:!0}}))),t.notifyAll(e.Notify.CONNECTIONS,o)}))}},{key:"connect",value:function(e,t){var o=this,l=this.players.find((function(e){return e.key===t}));return t&&!l&&console.error("WARNING: player key",t,"not found in game",this.key),this.getConnection(l)?(console.error("WARNING:",t,"already connected to",this.key),l._isConnected=!0):l?(this._debug&&this._debug("\t",l.name,"connected to",this.key),l._isConnected=!0):this._debug&&this._debug("\tconnected non-player"),e.game=this,e.player=l,this._channels||(this._channels=[]),this._channels.push(e),this.sendCONNECTIONS(),e.on("disconnect",(function(){e.player?(e.player._isConnected=!1,o._debug&&o._debug(e.player.name,"disconnected")):o._debug&&o._debug("non-player disconnected"),o._channels.splice(o._channels.indexOf(e),1),o.sendCONNECTIONS()})),this.playIfReady()}},{key:"loadBoard",value:function(e){var t=this;return this.getEdition().then((function(o){return t.board.parse(t.constructor.CLASSES,o,e)})).then((function(){return t}))}}])&&A(t.prototype,o),m&&A(t,m),Object.defineProperty(t,"prototype",{writable:!1}),e}();P(O,"CLASSES",{Square:w.Square,Tile:k.Tile,Board:m.Board,Game:O,LetterBag:y.LetterBag,Move:v.Move,Player:b.Player,Rack:_.Rack,Turn:x.Turn}),P(O,"State",{WAITING:"Waiting for players",PLAYING:"Playing",FAILED_CHALLENGE:"Challenge failed",GAME_OVER:"Game over",TWO_PASSES:"All players passed twice",TIMED_OUT:"Timed out"}),P(O,"Command",{CHALLENGE:"challenge",CONFIRM_GAME_OVER:"confirmGameOver",PASS:"pass",PAUSE:"pause",PLAY:"play",REDO:"redo",SWAP:"swap",TAKE_BACK:"takeBack",UNDO:"undo",UNPAUSE:"unpause"}),P(O,"Notify",{ANOTHER_GAME:"another game",CONNECTIONS:"connections",JOIN:"join game",MESSAGE:"message",NEXT_GAME:"next game",PAUSE:"pause game",REJECT:"reject play",TICK:"tick timer",TURN:"play turn",UNDONE:"undone",UNPAUSE:"unpause",UPDATE:"update",MONITOR:"monitor"}),P(O,"Turns",{PLAYED:"play",SWAPPED:"swap",GAME_ENDED:"game-over",CHALLENGE_LOST:"challenge-lost",CHALLENGE_WON:"challenge-won",TOOK_BACK:"took-back",PASSED:"passed",TIMED_OUT:"timed-out"}),P(O,"Timer",{NONE:void 0,TURN:"Turn timer",GAME:"Game timer"}),P(O,"Penalty",{NONE:void 0,MISS:"Miss next turn",PER_TURN:"Lose points",PER_WORD:"Lose points per word"}),P(O,"WordCheck",{NONE:void 0,AFTER:"Check words after play",REJECT:"Reject unknown words"})},"./src/game/LetterBag.js":function(e,t,o){o.r(t),o.d(t,{LetterBag:function(){return v}});var l=o("./src/game/Tile.js");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var l=0,u=function(){};return{s:u,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,m=!0,g=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return m=e.done,e},e:function(e){g=!0,f=e},f:function(){try{m||null==o.return||o.return()}finally{if(g)throw f}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,l=new Array(t);o<t;o++)l[o]=e[o];return l}function m(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,y(l.key),l)}}function g(e,t,o){return(t=y(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function y(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==u(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}var v=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"tiles",[]),g(this,"legalLetters",[]),t instanceof e){this.predictable=!0;var o,u=f(t.tiles);try{for(u.s();!(o=u.n()).done;){var p=o.value;this.tiles.push(new l.Tile(p))}}catch(e){u.e(e)}finally{u.f()}}else{var m,y=f(t.bag);try{for(y.s();!(m=y.n()).done;){var v=m.value;v.isBlank||this.legalLetters.push(v.letter);for(var b=Math.floor(v.count),_=0;_<b;++_){var w=new l.Tile({letter:v.letter,score:v.score});v.isBlank&&(w.isBlank=!0),this.tiles.push(w)}}}catch(e){y.e(e)}finally{y.f()}this.shake()}t.isWild&&(this.isWild=!0)}var t,o,u;return t=e,(o=[{key:"isEmpty",value:function(){return 0===this.tiles.length}},{key:"shake",value:function(){if(!this.predictable&&!this.isWild)for(var e=this.tiles.length-1;e>1;e--){var t=Math.floor(Math.random()*(e+1));if(t!==e){var o=this.tiles[e];this.tiles[e]=this.tiles[t],this.tiles[t]=o}}}},{key:"getRandomTile",value:function(){if(this.tiles.length>0)return this.tiles.pop()}},{key:"getRandomTiles",value:function(e){assert(!this.isWild,"Bag is wild");var t=[];console.assert(e>=0,"Bag is empty");for(var o=0;this.tiles.length>0&&o<e;o++)t.push(this.getRandomTile());return t}},{key:"returnTile",value:function(e){this.tiles.push(e.reset(this.isWild)),this.shake()}},{key:"returnTiles",value:function(e){var t,o=f(e);try{for(o.s();!(t=o.n()).done;){var l=t.value;this.tiles.push(l.reset(this.isWild))}}catch(e){o.e(e)}finally{o.f()}this.shake()}},{key:"removeTile",value:function(e){if(this.isWild)return this.tiles.pop().copy(e);for(var t=0;t<this.tiles.length;t++){var o=this.tiles[t];if(o===e||o.isBlank&&e.isBlank||!o.isBlank&&!e.isBlank&&o.letter===e.letter)return this.tiles.splice(t,1),o}}},{key:"removeTiles",value:function(e){var t,o=[],l=f(e);try{for(l.s();!(t=l.n()).done;){var u=t.value;o.push(this.removeTile(u))}}catch(e){l.e(e)}finally{l.f()}return o}},{key:"remainingTileCount",value:function(){return this.tiles.length}},{key:"letters",value:function(){return this.tiles.map((function(e){return e.letter}))}},{key:"stringify",value:function(){return"("+this.letters().sort().join("")+")"}}])&&m(t.prototype,o),u&&m(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/game/Move.js":function(e,t,o){o.r(t),o.d(t,{Move:function(){return m}});var l=o("./src/game/Tile.js");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,p(l.key),l)}}function p(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==u(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}var m=function(){function e(t){var o,u,f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,f=void 0,(u=p(u="score"))in o?Object.defineProperty(o,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):o[u]=f,t.words&&(this.words=t.words),this.score=t&&t.score||0,t.placements&&(this.placements=t.placements.map((function(e){return new l.Tile(e)})))}var t,o,u;return t=e,(o=[{key:"addPlacement",value:function(e){this.placements?this.placements.push(e):this.placements=[e]}},{key:"stringify",value:function(){var e=this.placements?this.placements.map((function(e){return e.stringify(!0)})):"<no placements>",t=this.words?this.words.map((function(e){return"".concat(e.word,"(").concat(e.score,")")})):"<no words>";return"Move ".concat(e," words ").concat(t," for ").concat(this.score)}}])&&f(t.prototype,o),u&&f(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/game/Player.js":function(e,t,o){function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var l=0,u=function(){};return{s:u,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var p,m=!0,g=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return m=e.done,e},e:function(e){g=!0,p=e},f:function(){try{m||null==o.return||o.return()}finally{if(g)throw p}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,l=new Array(t);o<t;o++)l[o]=e[o];return l}function p(e,t){for(var o=0;o<t.length;o++){var u=t[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,(f=u.key,p=void 0,p=function(e,t){if("object"!==l(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var u=o.call(e,t||"default");if("object"!==l(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(f,"string"),"symbol"===l(p)?p:String(p)),u)}var f,p}o.r(t),o.d(t,{Player:function(){return m}});var m=function(){function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._factory=o,this.key=t.key,this.name=t.name,this.rack=new this._factory.Rack(this._factory,{id:"Rack_".concat(this.key),size:8}),this.passes=0,this.score=0,t.clock&&(this.clock=0),t._isConnected&&(this._isConnected=!0),t.missNextTurn&&(this.missNextTurn=!0),t.wantsAdvice&&(this.wantsAdvice=!0),t.isRobot&&(this.isRobot=!0),t.canChallenge&&(this.canChallenge=!0),t.dictionary&&(this.dictionary=t.dictionary),t.delayBeforePlay&&t.delayBeforePlay>0&&(this.delayBeforePlay=t.delayBeforePlay),this._debug=t._debug}var t,o,l;return t=e,l=[{key:"fromSerialisable",value:function(e,t){var o=new t.Player(e,t);return e.passes&&(o.passes=e.passes),e.score&&(o.score=e.score),e.clock&&(o.clock=e.clock),o}}],(o=[{key:"serialisable",value:function(e,t){var o=this;return(this.isRobot||!t?Promise.resolve(this):t.getUser({key:this.key}).catch((function(){return o}))).then((function(e){var t={name:o.name,key:o.key,score:o.score};return o.isRobot&&(t.isRobot=!0),o._isConnected&&(t._isConnected=!0),o.dictionary&&(t.dictionary=o.dictionary),o.clock&&(t.clock=o.clock),e.email&&(t.email=!0),o.missNextTurn&&(t.missNextTurn=!0),t}))}},{key:"fillRack",value:function(e,t){this.rack=new this._factory.Rack(this._factory,{id:"Rack_".concat(this.key),size:t+1});for(var o=0;o<t;o++)this.rack.addTile(new this._factory.Tile(e.getRandomTile()));this.score=0}},{key:"returnTiles",value:function(e){var t,o=u(this.rack.tiles());try{for(o.s();!(t=o.n()).done;){var l=t.value;e.returnTile(this.rack.removeTile(l))}}catch(e){o.e(e)}finally{o.f()}}},{key:"tick",value:function(){this.clock--,this._debug&&this._debug("Tick",this.name,this.clock),this.clock<=0&&"function"==typeof this._onTimeout&&(this._debug&&this._debug(this.name,"has timed out at",new Date),this._onTimeout(),delete this._onTimeout)}},{key:"setTimeout",value:function(e,t){this._debug&&this._debug(this.name,"turn timeout in ".concat(e,"s")),this.clock=e,this._onTimeout=t}},{key:"stringify",value:function(){var e="Player '".concat(this.name,"'");return this.isRobot&&(e+=" (Robot)"),this.key&&(e+=" key ".concat(this.key)),(e+=' rack "'.concat(this.rack.letters().sort().join(""),'"'))+" score ".concat(this.score)}},{key:"toggleAdvice",value:function(){this.wantsAdvice=!this.wantsAdvice}}])&&p(t.prototype,o),l&&p(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/game/Rack.js":function(e,t,o){o.r(t),o.d(t,{Rack:function(){return _}});var l=o("./src/common/Utils.js");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var l=0,u=function(){};return{s:u,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,m=!0,g=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return m=e.done,e},e:function(e){g=!0,f=e},f:function(){try{m||null==o.return||o.return()}finally{if(g)throw f}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,l=new Array(t);o<t;o++)l[o]=e[o];return l}function m(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,(f=l.key,p=void 0,p=function(e,t){if("object"!==u(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==u(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(f,"string"),"symbol"===u(p)?p:String(p)),l)}var f,p}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=b(e);if(t){var u=b(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return v(this,o)}}function v(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(b,e);var t,o,u,p=y(b);function b(e,t){var o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),t instanceof b?(o=p.call(this,e,{id:t.id,cols:t.cols,rows:1,type:function(){return"_"}}),t.forEachTiledSquare((function(t){return o.addTile(new e.Tile(t.tile)),!1}))):o=p.call(this,e,{id:t.id,cols:t.size,rows:1,type:function(){return"_"}}),t.isWild&&(o.isWild=!0),void 0!==t.underlay){var l=0;o.forEachSquare((function(e){return e.setUnderlay(t.underlay.charAt(l++)),l===t.underlay.length}))}return v(o)}return t=b,(o=[{key:"addTile",value:function(e){var t;return e.reset(this.isWild),this.forEachEmptySquare((function(o){return t=o,o.placeTile(e),!0})),t}},{key:"addTiles",value:function(e){var t=this;return e.map((function(e){return t.addTile(e)}))}},{key:"letters",value:function(){return this.tiles().map((function(e){return e.letter}))}},{key:"findSquare",value:function(e){var t,o=this;return this.forEachTiledSquare((function(l){(o.isWild||!t&&l.tile.isBlank||l.tile.letter===e)&&(t=l)})),t}},{key:"removeTile",value:function(e){var t=e.letter,o=this.findSquare(t);if(!o)throw Error("Cannot find '".concat(t,"' on ").concat(this.stringify()));var l=o.tile;return o.unplaceTile(),this.isWild?l.copy(e):l.isBlank&&(l.letter=t),l}},{key:"removeTiles",value:function(e){var t,o=[],u=f(e);try{for(u.s();!(t=u.n()).done;){var p=t.value,m=this.removeTile(p);if(!m)throw Error("".concat((0,l.stringify)(p)," missing from rack"));o.push(m)}}catch(e){u.e(e)}finally{u.f()}return o}},{key:"shuffle",value:function(){var e,t=[];for(e=0;e<this.cols;e++){var o=this.at(e);o.tile&&t.push(o.unplaceTile())}for(e=t.length-1;e>0;e--){var l=Math.floor(Math.random()*(e+1)),u=t[e];t[e]=t[l],t[l]=u}return this.addTiles(t),this}},{key:"lettersLeft",value:function(){return this.tiles().filter((function(e){return!e.isBlank})).map((function(e){return e.letter}))}},{key:"stringify",value:function(){return"[".concat(this.tiles().map((function(e){return(0,l.stringify)(e)})).join(","),"]")}}])&&m(t.prototype,o),u&&m(t,u),Object.defineProperty(t,"prototype",{writable:!1}),b}(o("./src/game/Surface.js").Surface)},"./src/game/Replay.js":function(e,t,o){o.r(t),o.d(t,{Replay:function(){return A}});var l=o("./src/game/Game.js");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var l=0,u=function(){};return{s:u,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,m=!0,g=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return m=e.done,e},e:function(e){g=!0,f=e},f:function(){try{m||null==o.return||o.return()}finally{if(g)throw f}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,l=new Array(t);o<t;o++)l[o]=e[o];return l}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,(f=l.key,p=void 0,p=function(e,t){if("object"!==u(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==u(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(f,"string"),"symbol"===u(p)?p:String(p)),l)}var f,p}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=_(e);if(t){var u=_(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return b(this,o)}}function b(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var w=l.Game.CLASSES.LetterBag,k=l.Game.CLASSES.Board,x=l.Game.CLASSES.Player,S=l.Game.CLASSES.Tile,T=l.Game.CLASSES.Rack,C=l.Game.CLASSES.Turn,A=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(b,e);var t,o,u,p=v(b);function b(){return m(this,b),p.apply(this,arguments)}return t=b,(o=[{key:"replay",value:function(e){var t=this;this.game=e,this.allowUndo=!0,this.nextTurn=0,this.letterBag=new w(this.game.letterBag),this.board=new k(l.Game.CLASSES,this.game.board),this.bonuses=this.game.bonuses,this.rackSize=this.game.rackSize,this.swapSize=this.game.swapSize,this.state=l.Game.State.PLAYING,this.whosTurnKey=this.game.turns[0].playerKey;var o,u=f(this.game.players);try{for(u.s();!(o=u.n()).done;){var p=o.value,m=new x(p,l.Game.CLASSES);m.isRobot=!1,m.rack=new T(l.Game.CLASSES,p.rack),m.passes=p.passes,m.score=p.score,this.addPlayer(m),this._debug&&this._debug("\tlast rack for",m.key,"was",m.rack.stringify())}}catch(e){u.e(e)}finally{u.f()}this.game.board.forEachTiledSquare((function(e,o,l){return t.board.at(o,l).tile=new S(e.tile),!1}));var g=this.game.turns;this._debug&&this._debug("unwrap",g.length,"turns");for(var y=this.game.turns.length-1;y>=0;y--){var v=this.game.turns[y];this.undo(v,!0)}var b,_=f(this.players);try{for(_.s();!(b=_.n()).done;){var C=b.value;C.missNextTurn=!1,this._debug&&this._debug("Start player",C.stringify())}}catch(e){_.e(e)}finally{_.f()}return this._debug&&(this._debug("Start bag",this.letterBag.stringify()),this._debug("--------------------------------")),this}},{key:"step",value:function(){var e=this,t=new C(this.game.turns[this.nextTurn++]);return t.gameKey=this.key,this.redo(t).then((function(){if(e._debug){var o,l=f(e.players);try{for(l.s();!(o=l.n()).done;){var u=o.value;e._debug(u.stringify())}}catch(e){l.e(e)}finally{l.f()}e._debug("---------------------")}return t}))}}])&&g(t.prototype,o),u&&g(t,u),Object.defineProperty(t,"prototype",{writable:!1}),b}(e)}},"./src/game/Square.js":function(e,t,o){function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var o=0;o<t.length;o++){var u=t[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,(f=u.key,p=void 0,p=function(e,t){if("object"!==l(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var u=o.call(e,t||"default");if("object"!==l(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(f,"string"),"symbol"===l(p)?p:String(p)),u)}var f,p}o.r(t),o.d(t,{Square:function(){return f}});var f=function(){function e(t){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t.type,this.surface=t.surface,this.col=t.col,void 0!==t.row&&(this.row=t.row),t.tile&&(this.tile=t.tile),t.underlay&&(this.underlay=t.underlay),this.type){case"d":this.letterScoreMultiplier=2;break;case"t":this.letterScoreMultiplier=3;break;case"q":this.letterScoreMultiplier=4;break;case"M":case"D":this.wordScoreMultiplier=2;break;case"T":this.wordScoreMultiplier=3;break;case"Q":this.wordScoreMultiplier=4}}var t,o,l;return t=e,(o=[{key:"isBoard",get:function(){return!!this.isOnBoard||void 0!==this.row}},{key:"isEmpty",value:function(){return!this.tile}},{key:"hasLockedTile",value:function(){return this.tile&&(this.tileLocked||this.tile.isLocked)}},{key:"placeTile",value:function(e,t){if(this.tile&&this.tile!==e)throw Error("Square already occupied");return e.col=this.col,void 0!==this.row&&(e.row=this.row),e.isLocked=t,e!==this.tile&&(this.tile=e,!0)}},{key:"unplaceTile",value:function(){var e=this.tile;if(e)return e.reset(),delete this.tile,e}},{key:"stringify",value:function(){var e="#".concat(this.type,"@").concat(this.col);return this.row>=0&&(e+=","+this.row),this.tile&&(e+="<=".concat(this.tile.stringify())),e}}])&&u(t.prototype,o),l&&u(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/game/Surface.js":function(e,t,o){function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var o=0;o<t.length;o++){var u=t[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,(f=u.key,p=void 0,p=function(e,t){if("object"!==l(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var u=o.call(e,t||"default");if("object"!==l(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(f,"string"),"symbol"===l(p)?p:String(p)),u)}var f,p}o.r(t),o.d(t,{Surface:function(){return f}});var f=function(){function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=o.id,this.cols=o.cols,this.rows=o.rows,this.squares=[];for(var l=0;l<this.cols;l++){for(var u=[],f=0;f<this.rows;f++){var p={type:o.type(l,f),surface:this,col:l};o.rows>1&&(p.row=f),u.push(new t.Square(p))}this.squares.push(u)}}var t,o,l;return t=e,(o=[{key:"at",value:function(e,t){return this.squares[e][t||0]}},{key:"forEachSquare",value:function(e){for(var t=0;t<this.cols;t++)for(var o=0;o<this.rows;o++)if(e(this.squares[t][o],t,o))return!0;return!1}},{key:"forEachTiledSquare",value:function(e){return this.forEachSquare((function(t,o,l){return!!t.tile&&e(t,o,l)}))}},{key:"forEachEmptySquare",value:function(e){return this.forEachSquare((function(t,o,l){return!t.tile&&e(t,o,l)}))}},{key:"squaresUsed",value:function(){var e=0;return this.forEachTiledSquare((function(){return e++,!1})),e}},{key:"tiles",value:function(){var e=[];return this.forEachTiledSquare((function(t){return e.push(t.tile),!1})),e}},{key:"empty",value:function(){var e=[];return this.forEachTiledSquare((function(t){e.push(t.tile),t.unplaceTile()})),e}},{key:"score",value:function(){return this.tiles().reduce((function(e,t){return e+t.score}),0)}},{key:"isEmpty",value:function(){return 0===this.tiles().length}}])&&u(t.prototype,o),l&&u(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/game/Tile.js":function(e,t,o){function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var o=0;o<t.length;o++){var u=t[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,(f=u.key,p=void 0,p=function(e,t){if("object"!==l(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var u=o.call(e,t||"default");if("object"!==l(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(f,"string"),"symbol"===l(p)?p:String(p)),u)}var f,p}o.r(t),o.d(t,{Tile:function(){return f}});var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.letter=t.letter,this.score=t.score||0,void 0!==t.col&&(this.col=t.col),void 0!==t.row&&(this.row=t.row),t.isBlank&&(this.isBlank=!0),t.isLocked&&(this.isLocked=!0)}var t,o,l;return t=e,(o=[{key:"copy",value:function(e){return this.reset(),e.isBlank?this.isBlank=!0:delete this.isBlank,this.letter=e.letter,this.score=e.score,void 0!==e.col&&(this.col=e.col),void 0!==e.row&&(this.row=e.row),this}},{key:"reset",value:function(e){return delete this.isLocked,delete this.row,delete this.col,e?(this.letter="#",this.score=0):this.isBlank&&(this.letter=" "),this}},{key:"stringify",value:function(){var e=this.isBlank?this.letter.toLowerCase():this.letter,t=this.isLocked?"<>":"[]",o=("number"==typeof this.col?"@".concat(this.col):"")+("number"==typeof this.row?",".concat(this.row):"");return"".concat(t.charAt(0)).concat(e).concat(o).concat(t.charAt(1))}}])&&u(t.prototype,o),l&&u(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}();f.cmp=function(e,t){return e.isBlank&&t.isBlank?0:e.isBlank?-1:t.isBlank?1:e.letter<t.letter?-1:e.letter>t.letter?1:0}},"./src/game/Turn.js":function(e,t,o){o.r(t),o.d(t,{Turn:function(){return w}});var l=o("./src/game/Tile.js");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,_(l.key),l)}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=v(e);if(t){var u=v(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return g(this,o)}}function g(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function b(e,t,o){return(t=_(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==u(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(_,e);var t,o,g,v=m(_);function _(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),b(y(t=v.call(this,e)),"type",void 0),b(y(t),"gameKey",void 0),b(y(t),"playerKey",void 0),b(y(t),"nextToGoKey",void 0),b(y(t),"timestamp",void 0),t.gameKey=e.gameKey,t.type=e.type,t.playerKey=e.playerKey,t.nextToGoKey=e.nextToGoKey,t.timestamp=e.timestamp||Date.now(),e.replacements&&(t.replacements=e.replacements.map((function(e){return new l.Tile(e)}))),e.challengerKey&&(t.challengerKey=e.challengerKey),e.endState&&(t.endState=e.endState),e.passes&&e.passes>0&&(t.passes=e.passes),t}return t=_,g=[{key:"fromSerialisable",value:function(e,t){return new t.Turn(e)}}],(o=[{key:"serialisable",value:function(){return{type:this.type,timestamp:this.timestamp}}},{key:"stringify",value:function(){var e="Turn ".concat(this.type," ").concat(this.playerKey);return this.challengerKey&&(e+=" by ".concat(this.challengerKey)),this.nextToGoKey&&this.nextToGoKey!==this.playerKey&&(e+=" ->".concat(this.nextToGoKey)),"object"===u(this.score)?e+=" (".concat(this.score.tiles||0,",").concat(this.score.time||0,")"):"number"==typeof this.score&&(e+=" (".concat(this.score,")")),this.placements&&(e+=" place"+this.placements.map((function(e){return e.stringify(!0)}))),this.words&&(e+=' "'+this.words.map((function(e){return e.word}))+'"'),this.replacements&&(e+=" replace"+this.replacements.map((function(e){return e.stringify(!0)}))),"Miss next turn"===this.penalty&&(e+=" MISS"),this.endState&&(e+=" ".concat(this.endState)),e}}])&&f(t.prototype,o),g&&f(t,g),Object.defineProperty(t,"prototype",{writable:!1}),_}(o("./src/game/Move.js").Move)},"./src/game/Undo.js":function(e,t,o){o.r(t),o.d(t,{Undo:function(){return x}});var l=o("./src/common/Utils.js"),u=o("./src/game/Game.js");function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var l=0,u=function(){};return{s:u,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,p=!0,g=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return p=e.done,e},e:function(e){g=!0,f=e},f:function(){try{p||null==o.return||o.return()}finally{if(g)throw f}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,l=new Array(t);o<t;o++)l[o]=e[o];return l}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,(u=l.key,p=void 0,p=function(e,t){if("object"!==f(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==f(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(u,"string"),"symbol"===f(p)?p:String(p)),l)}var u,p}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=w(e);if(t){var u=w(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return _(this,o)}}function _(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var k=u.Game.CLASSES.Tile,x=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(_,e);var t,o,f,m=b(_);function _(){return g(this,_),m.apply(this,arguments)}return t=_,(o=[{key:"unswap",value:function(e){this.state=u.Game.State.PLAYING;var t=this.getPlayerWithKey(e.playerKey);this.rackToBag(e.replacements,t),this.bagToRack(e.placements,t),t.passes--,this.whosTurnKey=t.key}},{key:"unplay",value:function(e){this.state=u.Game.State.PLAYING;var t=this.getPlayerWithKey(e.playerKey);e.replacements&&this.rackToBag(e.replacements,t),e.placements&&this.boardToRack(e.placements,t),t.score-=e.score,t.passes=e.prepasses||0,this.whosTurnKey=t.key}},{key:"unconfirmGameOver",value:function(e){var t,o=p(e.score);try{for(o.s();!(t=o.n()).done;){var l=t.value,f=this.getPlayerWithKey(l.key);assert(f,l.key),f.score-=(l.time||0)+(l.tiles||0)}}catch(e){o.e(e)}finally{o.f()}this.state=u.Game.State.PLAYING}},{key:"untakeBack",value:function(e){this.state=u.Game.State.PLAYING;var t=this.getPlayerWithKey(e.playerKey);e.placements&&this.rackToBoard(e.placements,t),e.replacements&&this.bagToRack(e.replacements,t),t.score-=e.score,this.whosTurnKey=this.nextPlayer(t).key,this._debug&&this._debug("\tplayer now",this.whosTurnKey,e)}},{key:"unpass",value:function(e){this.state=u.Game.State.PLAYING;var t=this.getPlayerWithKey(e.playerKey);t.passes--,this.whosTurnKey=t.key}},{key:"unchallenge",value:function(e){var t=this.getPlayerWithKey(e.challengerKey);this._debug&&this._debug("\t",(0,l.stringify)(t),"regained",e.score),t.score-=e.score}},{key:"undo",value:function(e,t){var o=this;switch(assert(this.allowUndo,"Cannot Undo"),this._debug&&this._debug("un-",e.type),e.type){case u.Game.Turns.SWAPPED:this.unswap(e,t);break;case u.Game.Turns.PASSED:case u.Game.Turns.TIMED_OUT:this.unpass(e,t);break;case u.Game.Turns.PLAYED:this.unplay(e,t);break;case u.Game.Turns.TOOK_BACK:case u.Game.Turns.CHALLENGE_WON:this.untakeBack(e,t);break;case u.Game.Turns.GAME_ENDED:this.unconfirmGameOver(e,t);break;case u.Game.Turns.CHALLENGE_LOST:this.unchallenge(e,t);break;default:assert.fail("Unknown turn type '".concat(e.type,"'"))}return t?Promise.resolve():this.save().then((function(){return o.notifyAll(u.Game.Notify.UNDONE,e)}))}},{key:"redo",value:function(e){var t=this,o=this.getPlayerWithKey(e.playerKey);switch(this._debug&&this._debug("REDO",e.type,e),e.type){case u.Game.Turns.SWAPPED:return this.letterBag.predictable=!0,this.letterBag.removeTiles(e.replacements),this.letterBag.returnTiles(e.replacements.map((function(e){return new k(e)}))),this._debug&&this._debug("\t-- swap"),this.swap(o,e.placements).then((function(){return delete t.letterBag.predictable}));case u.Game.Turns.PLAYED:return this.letterBag.predictable=!0,this.letterBag.removeTiles(e.replacements),this.letterBag.returnTiles(e.replacements.map((function(e){return new k(e)}))),this._debug&&this._debug("\t-- play"),this.play(o,e).then((function(){return delete t.letterBag.predictable}));case u.Game.Turns.PASSED:case u.Game.Turns.TIMED_OUT:return this._debug&&this._debug("\t-- pass"),this.pass(o,e.type);case u.Game.Turns.TOOK_BACK:return this._debug&&this._debug("\t-- takeBack"),this.takeBack(o,e.type);case u.Game.Turns.CHALLENGE_WON:case u.Game.Turns.CHALLENGE_LOST:return this._debug&&this._debug("\t-- challenge"),this.challenge(this.getPlayerWithKey(e.challengerKey),o);case u.Game.Turns.GAME_ENDED:return this._debug&&this._debug("\t-- confirmGameOver"),this.confirmGameOver(o,e.endState)}throw assert.fail("Unrecognised turn type ".concat(e.type)),Error("Unrecognised turn type")}}])&&y(t.prototype,o),f&&y(t,f),Object.defineProperty(t,"prototype",{writable:!1}),_}(e)}},"./src/game/loadDictionary.js":function(e,t,o){o.r(t),o.d(t,{loadDictionary:function(){return f}});var l=o("./node_modules/@cdot/dictionary/dist/mjs/index.js"),u={};function f(e){var t,o=Platform.parsePath(e);if(""===o.root&&""===o.dir&&""===o.ext?((o=Platform.parsePath(Platform.getFilePath("dictionaries/ignore"))).name=e,o.ext=".dict"):""===o.ext?o.ext=".dict":e=o.name,delete o.base,u[e])return Promise.resolve(u[e]);var f=Platform.formatPath(o);return Platform.readBinaryFile(f).then((function(o){(t=new l.Dictionary(e)).loadDAWG(o.buffer)})).catch((function(e){console.error("Failed to read",f,e)})).then((function(){o.ext=".white";var u=Platform.formatPath(o);return Platform.readFile(u).then((function(o){t||(t=new l.Dictionary(e)),o.toString().toUpperCase().split(/\r?\n/).map((function(e){return e.replace(/\s.*$/,"")})).filter((function(e){return e.length>0})).sort().forEach((function(e){return t._addWord(e)}))})).catch((function(){}))})).then((function(){return t&&(t.addLinks(),u[e]=t),t}))}},"./src/standalone/StandaloneUIMixin.js":function(e,t,o){o.r(t),o.d(t,{StandaloneUIMixin:function(){return P}});o("./node_modules/jquery/dist/jquery.js"),o("./node_modules/jquery-ui/dist/jquery-ui.js");var l=o("./src/game/Game.js"),u=o("./src/game/Edition.js"),f=o("./src/backend/BackendGame.js"),p=o("./src/browser/BrowserDatabase.js"),m=o("./src/browser/UI.js"),g=o("./node_modules/jquery/dist/jquery.js");function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,C(l.key),l)}}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=S(e);if(t){var u=S(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return k(this,o)}}function k(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function T(e,t,o){return(t=C(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function C(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==y(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y(t)?t:String(t)}var A=l.Game.CLASSES.Player,P=function(e){var t;return t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(S,e);var t,o,y,k=w(S);function S(){var e;v(this,S);for(var t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return T(x(e=k.call.apply(k,[this].concat(o))),"db",new p.BrowserDatabase(f.BackendGame)),T(x(e),"session",{key:null}),T(x(e),"args",void 0),e}return t=S,(o=[{key:"getSession",value:function(){return this.session?Promise.resolve(this.session):Promise.reject()}},{key:"getHistory",value:function(){}},{key:"getGameDefaults",value:function(){return Promise.resolve(this.constructor.DEFAULTS)}},{key:"getSetting",value:function(e){return localStorage.getItem("XANADO".concat(e))||this.constructor.DEFAULTS[e]}},{key:"setSetting",value:function(e,t){localStorage.setItem("XANADO".concat(e),t)}},{key:"getCSS",value:function(){return g.get("../css/index.json")}},{key:"getLocales",value:function(){return g.get("../i18n/index.json")}},{key:"getEditions",value:function(){return g.get("../editions/index.json")}},{key:"getDictionaries",value:function(){return g.get("../dictionaries/index.json")}},{key:"getEdition",value:function(e){return u.Edition.load(e)}},{key:"createGame",value:function(e){var t=this;return u.Edition.load(e.edition).then((function(){return new f.BackendGame(e).create()})).then((function(e){return e.onLoad(t.db)})).then((function(e){var o=new A({name:g.i18n("Robot"),key:t.constructor.ROBOT_KEY,isRobot:!0},f.BackendGame.CLASSES),u=new A({name:g.i18n("You"),key:t.constructor.HUMAN_KEY,isRobot:!1},f.BackendGame.CLASSES);return e.addPlayer(o,!0),e.addPlayer(u,!0),Math.random()>.5?e.whosTurnKey=t.constructor.HUMAN_KEY:e.whosTurnKey=t.constructor.ROBOT_KEY,e.state=l.Game.State.PLAYING,e}))}},{key:"redirectToGame",value:function(e){var t=m.UI.parseURLArguments(window.location.toString());t._URL=t._URL.replace(/standalone_games./,"standalone_game."),t.game=e,window.location=m.UI.makeURL(t)}},{key:"create",value:function(){this.args=m.UI.parseURLArguments(document.URL),this.args.debug&&(this.debug=console.debug),this.session.key=this.constructor.HUMAN_KEY}}])&&b(t.prototype,o),y&&b(t,y),Object.defineProperty(t,"prototype",{writable:!1}),S}(e),T(t,"GAME_TABLE_ROW",'<tr class="game" id="%k"><td class="h-key">%k</td><td class="h-edition">%e</td><td class="h-last-play">%l</td><td class="h-state">%s</td></tr>'),T(t,"ROBOT_KEY","Computer"),T(t,"HUMAN_KEY","You"),T(t,"DEFAULTS",{edition:"English_Scrabble",dictionary:"British_English",one_window:!1,notification:!1,theme:"default",warnings:!0,cheers:!0,tile_click:!0,turn_alert:!0,syncRacks:!0}),t}}},l={};function u(e){var t=l[e];if(void 0!==t)return t.exports;var f=l[e]={exports:{}};return o[e].call(f.exports,f,f.exports,u),f.exports}u.m=o,u.d=function(e,t){for(var o in t)u.o(t,o)&&!u.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},u.f={},u.e=function(e){return Promise.all(Object.keys(u.f).reduce((function(t,o){return u.f[o](e,t),t}),[]))},u.u=function(e){return"standalone/"+e+".StandaloneGameUI.js"},u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="@warren-bank/scrabble:",u.l=function(o,l,f,p){if(e[o])e[o].push(l);else{var m,g;if(void 0!==f)for(var y=document.getElementsByTagName("script"),v=0;v<y.length;v++){var b=y[v];if(b.getAttribute("src")==o||b.getAttribute("data-webpack")==t+f){m=b;break}}m||(g=!0,(m=document.createElement("script")).charset="utf-8",m.timeout=120,u.nc&&m.setAttribute("nonce",u.nc),m.setAttribute("data-webpack",t+f),m.src=o),e[o]=[l];var _=function(t,l){m.onerror=m.onload=null,clearTimeout(w);var u=e[o];if(delete e[o],m.parentNode&&m.parentNode.removeChild(m),u&&u.forEach((function(e){return e(l)})),t)return t(l)},w=setTimeout(_.bind(null,void 0,{type:"timeout",target:m}),12e4);m.onerror=_.bind(null,m.onerror),m.onload=_.bind(null,m.onload),g&&document.head.appendChild(m)}},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;u.g.importScripts&&(e=u.g.location+"");var t=u.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),u.p=e+"../"}(),function(){var e={app:0};u.f.j=function(t,o){var l=u.o(e,t)?e[t]:void 0;if(0!==l)if(l)o.push(l[2]);else{var f=new Promise((function(o,u){l=e[t]=[o,u]}));o.push(l[2]=f);var p=u.p+u.u(t),m=new Error;u.l(p,(function(o){if(u.o(e,t)&&(0!==(l=e[t])&&(e[t]=void 0),l)){var f=o&&("load"===o.type?"missing":o.type),p=o&&o.target&&o.target.src;m.message="Loading chunk "+t+" failed.\n("+f+": "+p+")",m.name="ChunkLoadError",m.type=f,m.request=p,l[1](m)}}),"chunk-"+t,t)}};var t=function(t,o){var l,f,p=o[0],m=o[1],g=o[2],y=0;if(p.some((function(t){return 0!==e[t]}))){for(l in m)u.o(m,l)&&(u.m[l]=m[l]);if(g)g(u)}for(t&&t(o);y<p.length;y++)f=p[y],u.o(e,f)&&e[f]&&e[f][0](),e[f]=0},o=window.webpackChunk_warren_bank_scrabble=window.webpackChunk_warren_bank_scrabble||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var f={};!function(){u.r(f);var e=u("./src/browser/BrowserPlatform.js"),t=u("./src/common/Channel.js"),o=u("./src/game/Game.js"),l=u("./src/backend/BackendGame.js"),p=u("./src/browser/BrowserGame.js"),m=u("./src/browser/UI.js"),g=u("./src/browser/GameUIMixin.js"),y=u("./src/standalone/StandaloneUIMixin.js"),v=u("./node_modules/jquery/dist/jquery.js");function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function _(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,(u=l.key,f=void 0,f=function(e,t){if("object"!==b(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!==b(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(u,"string"),"symbol"===b(f)?f:String(f)),l)}var u,f}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var l=k(e,t);if(l){var u=Object.getOwnPropertyDescriptor(l,t);return u.get?u.get.call(arguments.length<3?e:o):u.value}},w.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,l=C(e);if(t){var u=C(this).constructor;o=Reflect.construct(l,arguments,u)}else o=l.apply(this,arguments);return T(this,o)}}function T(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}window.Platform=e.BrowserPlatform,(new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(k,e);var f,g,y,b=S(k);function k(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k),(e=b.call(this)).backendGame=void 0,e.frontendGame=void 0,e}return f=k,(g=[{key:"sendCommand",value:function(e,t){var o=this.backendGame.getPlayerWithKey(this.player.key);this.backendGame.dispatchCommand(e,o,t)}},{key:"action_anotherGame",value:function(){var e=this;this.backendGame.anotherGame().then((function(t){e.backendGame.nextGameKey=e.frontendGame.nextGameKey=t.key,e.setAction("action_nextGame",v.i18n("Next game")),e.enableTurnButton(!0)})).catch(assert.fail)}},{key:"action_nextGame",value:function(){this.redirectToGame(this.backendGame.nextGameKey)}},{key:"create",value:function(){var e=this;w(C(k.prototype),"create",this).call(this);var f=this.session.key,g=new t.Channel,y=new t.Channel;g.receiver=y,y.receiver=g,y.on(o.Game.Notify.MESSAGE,(function(e){var t=e.text.split(/\s+/);switch(t[0]){case"autoplay":y.game.autoplay();break;case"hint":y.game.hint(y.player);break;case"advise":y.game.toggleAdvice(y.player);break;case"allow":y.game.allow(y.player,t[1]);break;default:y.game.notifyAll(o.Game.Notify.MESSAGE,e)}})),this.channel=g,this.getGameDefaults().then((function(){return e.initTheme()})).then((function(){return e.initLocale()})).then((function(){if(e.args.game)return console.debug("Loading game ".concat(e.args.game," from local storage")),e.db.get(e.args.game).then((function(e){return o.Game.fromCBOR(e,l.BackendGame.CLASSES)})).then((function(t){return e.backendGame=t,e.backendGame._debug=e.args.debug?console.debug:function(){},t.onLoad(e.db)}));console.debug("Constructing new game");var t=v.extend({},k.DEFAULTS);return t.debug=e.args.debug?console.debug:void 0,e.createGame(t).then((function(t){return e.backendGame=t}))})).then((function(){e.attachChannelHandlers(),e.frontendGame=p.BrowserGame.fromCBOR(o.Game.toCBOR(e.backendGame),p.BrowserGame.CLASSES),e.player=e.frontendGame.player=e.frontendGame.getPlayerWithKey(f)})).then((function(){return e.createUI(e.frontendGame)})).then((function(){v("#gameSetupButton").on("click",(function(){u.e("GameSetupDialog").then(u.bind(u,"./src/browser/GameSetupDialog.js")).then((function(t){return new(t[Object.keys(t)[0]])({html:"standalone_GameSetupDialog",title:v.i18n("Game setup"),ui:e,game:e.backendGame,onSubmit:function(t,o){for(var l=0,u=Object.keys(o);l<u.length;l++){var f=u[l];e.backendGame[f]=o[f]}e.backendGame.save(),e.redirectToGame(e.backendGame.key)},error:function(t){return e.alert(t,v.i18n("failed",v.i18n("Game setup")))}})}))})),v("#libraryButton").on("click",(function(){var e=m.UI.parseURLArguments(window.location.toString());e._URL=e._URL.replace(/standalone_game\./,"standalone_games."),window.location=m.UI.makeURL(e)}))})).then((function(){return e.attachUIEventHandlers()})).then((function(){return e.backendGame.connect(y,f)})).catch((function(t){return e.alert(t)})).then((function(){v(".loading").hide(),v(".waiting").removeClass("waiting")}))}}])&&_(f.prototype,g),y&&_(f,y),Object.defineProperty(f,"prototype",{writable:!1}),k}((0,y.StandaloneUIMixin)((0,g.GameUIMixin)(m.UI))))).create()}()}();
//# sourceMappingURL=StandaloneGameUI.js.map